webpackJsonp([0],{"/Ml/":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Yarq"),r=n(i),o=a("AA3o"),s=n(o),l=a("xSur"),d=n(l),u=a("UzKs"),c=n(u),h=a("Y7Ml"),f=n(h),m=a("HUPQ"),g=n(m),p=a("RFtt"),v=n(p),b=a("T+56"),S=n(b),y=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={alert:{isShow:!1,ok:"",type:""},confirm:{isShow:!1},isHasClassCenter:!1,title:"",message:"",callback:null},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;S.default.CoreController.addEventListener("showAlert",e.showAlert.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("showConfirm",e.showConfirm.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("showInputTooltip",e.showInputTooltip.bind(e),self.listernerBackupid)}},{key:"componentWillUnmount",value:function(){S.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"alertCloseClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0)}},{key:"confirmClick",value:function(e){var t={text:this.refs.subNode_1?this.refs.subNode_1.value:void 0,href:this.refs.subNode_2?this.refs.subNode_2.value:void 0};this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0,t)}},{key:"cancelClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!1)}},{key:"showAlert",value:function(e){var t=e.message.data,a=t.title,n=t.message,i=t.ok,r=t.callback,o=t.type;this.setState({alert:{isShow:!0,ok:i,type:o},confirm:{isShow:!1},title:a,message:n,callback:r,isHasClassCenter:!0})}},{key:"showConfirm",value:function(e){var t=e.message.data,a=t.title,n=t.message,i=t.isOk,r=t.callback;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:i},title:a,message:n,callback:r,isHasClassCenter:!0})}},{key:"showInputTooltip",value:function(e){var t=e.data,a=t.title,n=t.message,i=t.isOk,r=t.callback,o=t.contentType;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:i},title:a,message:n,callback:r,isHasClassCenter:!0,contentType:o})}},{key:"__loadContent",value:function(){var e=this,t=void 0;if(e.state.message)t=e.state.message;else if(e.state.contentType)switch(e.state.contentType){case"edit-text-area":t=v.default.createElement("div",{className:"edit-node"},v.default.createElement("textarea",{ref:"subNode_1",name:"",id:"",cols:"50",rows:"6",maxLength:"50"}));break;case"edit-input":t=v.default.createElement("div",{className:"edit-node"},v.default.createElement("label",{htmlFor:""},g.default.language.languageData.notice.content,":"),v.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".08rem"},maxLength:"20"}));break;case"edit-input-db":t=v.default.createElement("div",{className:"edit-node"},v.default.createElement("label",{htmlFor:""},g.default.language.languageData.notice.content,":"),v.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".22rem",marginBottom:".3rem"},maxLength:"30"}),v.default.createElement("br",null),v.default.createElement("label",{htmlFor:""},g.default.language.languageData.notice.href,":"),v.default.createElement("input",{ref:"subNode_2",type:"text",style:{marginLeft:".08rem"},maxLength:"50"}));break;default:L.Logger.error("This content type has not defined, please check out and define this content!")}return{content:t}}},{key:"render",value:function(){var e=this,t=this.state,a=t.alert,n=t.confirm,i=t.isHasClassCenter,r=t.title,o=(t.message,t.callback),s=e.__loadContent(),l=s.content;return v.default.createElement("section",{id:"alert-error-confrim",className:"alert-error-confrim "+(a.isShow?"error"===a.type?" error-message":" prompt-message":""),style:{display:a.isShow||n.isShow?"block":"none"}},v.default.createElement("div",{id:"alert-box",className:"alert-box "+(i?"center ":"")},v.default.createElement("div",{className:"alert-title"},v.default.createElement("p",{className:"title-text"},r),a.isShow?v.default.createElement("button",{onClick:e.alertCloseClick.bind(e,o),className:"title-close",id:"title-close"}):""),v.default.createElement("div",{className:"alert-contant"},l),v.default.createElement("div",{className:"alert-isOk"},v.default.createElement("button",{id:"alert-confrim",onClick:a.isShow?e.alertCloseClick.bind(e,o):n.isShow?e.confirmClick.bind(e,o):void 0},a.isShow?a.ok:n.isShow?n.isOk.ok:""),n.isShow?v.default.createElement("button",{id:"alert-cancel",onClick:e.cancelClick.bind(e,o),className:"alert-cancel"},n.isOk.cancel):"")))}}]),t}(v.default.Component);t.default=y},0:function(e,t,a){e.exports=a("6G9P")},"0jvK":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("hRKE"),r=n(i),o=a("AA3o"),s=n(o),l=a("xSur"),d=n(l),u=a("T+56"),c=n(u),h=function(){function e(){(0,s.default)(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return(0,d.default)(e,[{key:"productionDefaultAppAppPermissions",value:function(){return{canDraw:!1,isShowVideoDrawTool:!1,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,h5DocumentActionClick:!1,dynamicPptActionClick:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromWBPageCount:!1,sendSignallingFromSharpsChange:!1,sendSignallingFromShowPage:!1,sendSignallingFromDynamicPptShowPage:!1,sendSignallingFromPptVolumeControl:!1,sendSignallingFromH5ShowPage:!1,sendSignallingFromGeneralShowPage:!1,sendSignallingFromDynamicPptTriggerActionClick:!1,sendSignallingFromH5DocumentAction:!1,sendSignallingFromVideoDraghandle:!1,sendSignallingFromBlackBoardDrag:!1,allUserTools:!1,laser:!1,publishDynamicPptMediaPermission_video:!1,sendWhiteboardMarkTool:!1,jumpPage:!1,sendSignallingFromBlackBoard:!1,sendSignallingTimerToStudent:!1,sendSignallingDialToStudent:!1,sendSignallingDataStudentToTeacherAnswer:!0,studentInit:!1,dialIconClose:!1,sendSignallingAnswerToStudent:!1,sendSignallingQiangDaQi:!1,sendSignallingQiangDaZhe:!0,sendSignallingFromDialDrag:!1,isSendSignallingFromTimerDrag:!1,isSendSignallingFromAnswerDrag:!1,isSendSignallingFromResponderDrag:!1,isShowCoursewareRemarks:!1,isSendSignallingFromCaptureImg:!1,canDragCaptureImg:!1,isSendSignallingFromCaptureImgDrag:!1,canResizeCaptureImg:!1,isSendCaptureImgResize:!1,sendSignallingFromRemoteControl:!1,sendQuestion:!1,publishResult:!1,answerCommit:!1,getQuestionCount:!1}}},{key:"resetDefaultAppPermissions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&c.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;e&&"object"===(void 0===e?"undefined":(0,r.default)(e))&&(Object.customAssign(a.permissionsJson,e),t&&c.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:a.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){var a=this;if(a.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",a.permissionsJson[e]),a.permissionsJson[e]=t;var n={type:"updateAppPermissions_"+e,message:{key:e,value:t}};c.default.CoreController.dispatchEvent(n)}}},{key:"getAppPermissions",value:function(e){return this.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);var t=this;for(var a in e)t.permissionsJson[a]=e[a];Object.customAssign(t.permissionsJson,e),t.permissionsJson=e,c.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}}]),e}(),f=new h;t.default=f},"0lA4":function(e,t){},"1Aa/":function(e,t,a){var n=a("adiS"),i=a("biYF")("iterator"),r=a("ZVlJ");e.exports=a("AKd3").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||r.hasOwnProperty(n(t))}},"1J5t":function(e,t,a){a("Gquc"),a("IsPG"),a("A1pn"),a("oltR"),a("V7Pz"),a("DG01"),a("toDE"),e.exports=a("AKd3").Set},"27tL":function(e,t,a){var n=a("8Nvm");e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"292p":function(e,t){},"2vo4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠標"},pencil:{title:"筆",pen:{text:"鉛筆工具"},Highlighter:{text:"熒光筆工具"},linellae:{text:"線條工具"},arrow:{text:"箭頭工具"},laser:{title:"激光筆",text:"激光筆工具"}},text:{title:"文字",Msyh:{text:"微軟雅黑"},Ming:{text:"宋體"},Arial:{text:"Arial"}},shape:{title:"形狀",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心橢圓"},filledCircle:{text:"橢圓"}},eraser:{title:"橡皮擦"},undo:{title:"撤銷"},redo:{title:"恢復"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"縮小"},tool_rotate_left:{title:"逆時針旋轉"},tool_rotate_right:{title:"順時針旋轉"},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"},colors:{title:"顏色"},measure:{title:"粗細"}},page:{prev:{text:"上壹頁"},next:{text:"下壹頁"},add:{text:"加頁"},lcFullBtn:{title:"繪制區域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5課件全屏"},skipPage:{text_one:"至第",text_two:"頁"},ok:{text:"確定"},coursewareRemarks:{title:"課件備註"}},volume:{title:"音量"}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"計時器"},timerBegin:{text:"開始"},timerStop:{text:"暫停"},again:{text:"重新開始"}},dial:{turntable:{text:"轉盤"}},answers:{headerTopLeft:{text:"答題器"},headerMiddel:{text:"點擊字母預設正確答案"},beginAnswer:{text:"開始答題"},tureAccuracy:{text:"正確率"},trueAnswer:{text:"正確答案"},endAnswer:{text:"結束答題"},restarting:{text:"重新開始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"請至少選擇壹個答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答題人數"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"詳情 >"},statistics:{text:"統計"},student:{text:"學生"},TheSelectedTheAnswer:{text:"所選答案"},AnswerTime:{text:"答題用時"},end:{text:"請先結束答題"}},responder:{responder:{text:"搶答器"},begin:{text:"開始搶答"},restart:{text:"重新開始"},close:{text:"關閉"},update:{text:"當前瀏覽器不支持canvas組件請升級！"},inAnswer:{text:"搶答中..."},answer:{text:"搶答中"},noContest:{text:"無人搶答"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}},coursewareRemarks:{remarks:"備註",close:"關閉"}};t.default=n},"3cXf":function(e,t,a){e.exports={default:a("RJ+u"),__esModule:!0}},"4BpY":function(e,t,a){"use strict";var n=a("C02x"),i=a("AKd3"),r=a("lIiZ"),o=a("sjnA"),s=a("biYF")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];o&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},"4HpA":function(e,t,a){"use strict";var n=a("C02x"),i=a("FITv"),r=a("DVkV"),o=a("BRDz"),s=a("bHZz"),l=a("bodH"),d=a("k/7E"),u=a("t8DS"),c=a("8Nvm"),h=a("XAI7"),f=a("lIiZ").f,m=a("A+MN")(0),g=a("sjnA");e.exports=function(e,t,a,p,v,b){var S=n[e],y=S,k=v?"set":"add",w=y&&y.prototype,T={};return g&&"function"==typeof y&&(b||w.forEach&&!o(function(){(new y).entries().next()}))?(y=t(function(t,a){u(t,y,e,"_c"),t._c=new S,void 0!=a&&d(a,v,t[k],t)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!b||"clear"!=e)&&s(y.prototype,e,function(a,n){if(u(this,y,e),!t&&b&&!c(a))return"get"==e&&void 0;var i=this._c[e](0===a?0:a,n);return t?this:i})}),b||f(y.prototype,"size",{get:function(){return this._c.size}})):(y=p.getConstructor(t,e,v,k),l(y.prototype,a),r.NEED=!0),h(y,e),T[e]=y,i(i.G+i.W+i.F,T),b||p.setStrong(y,e,v),y}},"4MrL":function(e,t){},"4fCT":function(e,t,a){var n=a("FITv"),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var a,n,r=0,o=0,s=arguments.length,l=0;o<s;)a=i(arguments[o++]),l<a?(n=l/a,r=r*n*n+1,l=a):a>0?(n=a/l,r+=n*n):r+=a;return l===1/0?1/0:l*Math.sqrt(r)}})},"6G9P":function(e,t,a){"use strict";a("0lA4"),a("PRvV"),a("FDbx"),a("xPSH"),a("292p"),a("9Z7U"),a("4MrL"),a("sKCO"),a("DeyK"),a("CmTZ"),a("CPua"),a("bMTV"),a("WcKi"),a("CUPi"),a("9Xwq"),a("w5fS"),a("rPQW"),a("qVFD"),a("XkXc"),a("9j6Y"),a("gDty"),a("buLY"),a("PqAP");var n=a("01iU");(0,function(e){return e&&e.__esModule?e:{default:e}}(n).default)()},"72x0":function(e,t,a){a("7XU4"),e.exports=a("AKd3").Object.keys},"75+0":function(e,t,a){var n=a("biYF")("iterator"),i=!1;try{var r=[7][n]();r.return=function(){i=!0},Array.from(r,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var a=!1;try{var r=[7],o=r[n]();o.next=function(){return{done:a=!0}},r[n]=function(){return o},e(r)}catch(e){}return a}},"7XU4":function(e,t,a){var n=a("OXaN"),i=a("5pnV");a("t+Om")("keys",function(){return function(e){return i(n(e))}})},"8SsP":function(e,t,a){var n=a("FITv");n(n.P+n.R,"Map",{toJSON:a("Oyrx")("Map")})},"8zml":function(e,t,a){e.exports={default:a("kSVM"),__esModule:!0}},"9Xwq":function(e,t){},"9Z7U":function(e,t){},"9j6Y":function(e,t){},"A+MN":function(e,t,a){var n=a("WwGG"),i=a("mEMm"),r=a("OXaN"),o=a("CFGK"),s=a("dC2g");e.exports=function(e,t){var a=1==e,l=2==e,d=3==e,u=4==e,c=6==e,h=5==e||c,f=t||s;return function(t,s,m){for(var g,p,v=r(t),b=i(v),S=n(s,m,3),y=o(b.length),k=0,w=a?f(t,y):l?f(t,0):void 0;y>k;k++)if((h||k in b)&&(g=b[k],p=S(g,k,v),e))if(a)w[k]=p;else if(p)switch(e){case 3:return!0;case 5:return g;case 6:return k;case 2:w.push(g)}else if(u)return!1;return c?-1:d||u?u:w}}},BSn2:function(e,t,a){a("DfSj"),e.exports=a("AKd3").Object.is},CPua:function(e,t){},CUPi:function(e,t){},"Cl/E":function(e,t,a){var n=a("5pnV"),i=a("/r4/"),r=a("XvZ9").f;e.exports=function(e){return function(t){for(var a,o=i(t),s=n(o),l=s.length,d=0,u=[];l>d;)r.call(o,a=s[d++])&&u.push(e?[a,o[a]]:o[a]);return u}}},CmTZ:function(e,t){},DG01:function(e,t,a){a("vyS5")("Set")},DeyK:function(e,t){},DfSj:function(e,t,a){var n=a("FITv");n(n.S,"Object",{is:a("WQ47")})},DrPG:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("MgeX"),r=n(i),o=a("Q+Ik"),s=n(o),l=a("HzJ8"),d=n(l),u=a("KH7x"),c=n(u),h=a("ZLEe"),f=n(h),m=a("hRKE"),g=n(m),p={tool:{launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()},isFullScreenStatus:function(e){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},isFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},runPrefixMethod:function(e,t){var a=void 0;return["webkit","moz","ms","o",""].forEach(function(n){if(!a){""===n&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var i=(0,g.default)(e[n+t]);i+""!="undefined"&&(a="function"===i?e[n+t]():e[n+t])}}),a},addFullscreenchange:function(e){p.tool.addEvent(document,"fullscreenchange",e,!1),p.tool.addEvent(document,"webkitfullscreenchange",e,!1),p.tool.addEvent(document,"mozfullscreenchange",e,!1),p.tool.addEvent(document,"MSFullscreenChange",e,!1),p.tool.addEvent(document,"msfullscreenchange",e,!1),p.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){p.tool.removeEvent(document,"fullscreenchange",e,!1),p.tool.removeEvent(document,"webkitfullscreenchange",e,!1),p.tool.removeEvent(document,"mozfullscreenchange",e,!1),p.tool.removeEvent(document,"MSFullscreenChange",e,!1),p.tool.removeEvent(document,"msfullscreenchange",e,!1),p.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){p.tool.addEvent(document,"fullscreenerror",e,!1),p.tool.addEvent(document,"webkitfullscreenerror",e,!1),p.tool.addEvent(document,"mozfullscreenerror",e,!1),p.tool.addEvent(document,"MSFullscreenError",e,!1),p.tool.addEvent(document,"msfullscreenerror",e,!1),p.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){p.tool.removeEvent(document,"fullscreenerror",e,!1),p.tool.removeEvent(document,"webkitfullscreenerror",e,!1),p.tool.removeEvent(document,"mozfullscreenerror",e,!1),p.tool.removeEvent(document,"MSFullscreenError",e,!1),p.tool.removeEvent(document,"msfullscreenerror",e,!1),p.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,a,n){n=void 0!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,a,n):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,n){e.addEventListener?e.removeEventListener(t,a,n):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},fireEvent:function(e,t){if(document.createEventObject){var a=document.createEventObject();return e.fireEvent("on"+t,a)}var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!0),!e.dispatchEvent(n)},autoElementPositionCneter:function(e){e.css({"margin-left":-e.width()/2+"px","margin-top":-e.height()/2+"px"})},clearElementPositionCneter:function(e){e.css({"margin-left":"","margin-top":""})}},getGUID:function(){function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),a=this.hexadecimal(this.getGUIDTime(),16),n=0;n<9;n++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=a;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,a){return void 0!=a?parseInt(e.toString(),a).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)})}return new e},getNewGUID:function(){p.guidObj||(p.guidObj=new p.getGUID);var e=p.guidObj.newGUID();return p.guidObj=null,e},getBrowserInfo:function(){var e=window.navigator.userAgent,t=/(msie\s|trident.*rv:)([\w.]+)/,a=/(firefox)\/([\w.]+)/,n=/(opera).+version\/([\w.]+)/,i=/(chrome)\/([\w.]+)/,r=/version\/([\w.]+).*(safari)/,o=function(e){var o=t.exec(e);return null!=o?{browser:"IE",version:o[2]||"0"}:null!=(o=a.exec(e))?{browser:o[1]||"",version:o[2]||"0"}:null!=(o=n.exec(e))?{browser:o[1]||"",version:o[2]||"0"}:null!=(o=i.exec(e))?{browser:o[1]||"",version:o[2]||"0"}:(o=r.exec(e),null!=o?{browser:o[2]||"",version:o[1]||"0"}:null!=o?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"})}(e.toLowerCase());return{versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),info:{browserName:o.browser,browserVersion:o.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}}},isEmpty:function(e){return 0===(0,f.default)(e).length},getUrlParams:function(e,t){var a=window.location.href;window.TkConstant&&(a=p.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),a=t||a;var n=decodeURIComponent(a),i=n.indexOf("?"),r=n.substring(i+1),o=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=r.match(o);return null!=s?s[2]:""},replaceFirstUper:function(e){if(e.length>0)return e.substring(0,1).toUpperCase()+e.substring(1)},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"===(void 0===e?"undefined":(0,g.default)(e))&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){var t=p;if(e&&!t.isArray(e)&&"object"===(void 0===e?"undefined":(0,g.default)(e))){var a={},n=!0,i=!1,r=void 0;try{for(var o,l=(0,d.default)((0,s.default)(e));!(n=(o=l.next()).done);n=!0){var u=o.value,h=(0,c.default)(u,2),f=h[0],m=h[1];/^tkcustomdata/g.test(f)&&(a[f]=m)}}catch(e){i=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}return a}return e},getFiletyeByFilesuffix:function(e){return"jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){return{disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand}},getTimeDifferenceToFormat:function(e,t){var a=t-e;if(a>=0){var n=Math.floor(a/864e5),i=a%864e5,r=Math.floor(i/36e5),o=i%36e5,s=Math.floor(o/6e4),l=o%6e4,d=Math.round(l/1e3),u=r+24*n,c={};return d>=60&&(d=0,s+=1),s>=60&&(s=0,u+=1),c.hh=u>9?u:"0"+u,c.mm=s>9?s:"0"+s,c.ss=d>9?d:"0"+d,c}return void L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"!=typeof e)return void L.Logger.error("time must is number!");e=String(e);var t=e.length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a||p.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else if(p.getUrlParams("debug"))return e;return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,a="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(a)return"Mac";if("X11"===navigator.platform&&!t&&!a)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(t){if(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)return"Win2000";if(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)return"WinXP";if(e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1)return"Win2003";if(e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)return"WinVista";if(e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)return"Win7";if(e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1)return"Win8";if(e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1)return"Win10"}return"Other"},percentageChangeToRem:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(a);if(i){var r=i.offsetWidth,o=i.offsetHeight,s=void 0,l=void 0;if("pc"===TK.SDKTYPE){var d=document.getElementById("lc-full-vessel");s=d.clientWidth,l=d.clientHeight}else s=window.GLOBAL.windowInnerWidth,l=window.GLOBAL.windowInnerHeight;var u=e*(s-r)/n,c=t*(l-o)/n;return u=u&&u!==1/0&&!isNaN(u)&&u>0?u:0,c=c&&c!==1/0&&!isNaN(c)&&c>0?c:0,{left:u,top:c}}return{left:0,top:0}},RemChangeToPercentage:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(a);if(i){var r=i.offsetWidth,o=i.offsetHeight,s=void 0,l=void 0;if("pc"===TK.SDKTYPE){var d=document.getElementById("lc-full-vessel");s=d.clientWidth,l=d.clientHeight}else s=window.GLOBAL.windowInnerWidth,l=window.GLOBAL.windowInnerHeight;var u=e*n/(s-r),c=t*n/(l-o);return u=u&&u!==1/0&&!isNaN(u)&&u>0?u:0,c=c&&c!==1/0&&!isNaN(c)&&c>0?c:0,{percentLeft:u,percentTop:c}}return{percentLeft:0,percentTop:0}},controlDragBounds:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(t),r=i.offsetWidth/n,o=i.offsetHeight/n,s=document.getElementById(a),l=s.clientWidth/n,d=s.clientHeight/n;return e.state[t].left=e.state[t].left<0?e.state[t].left=0:e.state[t].left,e.state[t].left=e.state[t].left>l-r?l-r:e.state[t].left,e.state[t].top=e.state[t].top<0?e.state[t].top=0:e.state[t].top,e.state[t].top=e.state[t].top>d-o?d-o:e.state[t].top,e.state[t]},replaceRemToNumber:function(e){return e&&"string"==typeof e&&(e=Number(e.replace(/rem/g,""))),e},replaceCalc:function(e){return e&&"string"==typeof e&&(e=e.replace(/(^\s*)|(\s*$)/g,""),e=e.replace(/(^calc\s*\(|\)$)/g,"")),e},limitEleReSize:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=window.GLOBAL.windowInnerWidth/n,r=window.GLOBAL.windowInnerHeight/n;if("pc"===TK.SDKTYPE){var o=document.getElementById("lc-full-vessel");i=o.clientWidth/n,r=o.clientHeight/n}return(e>i||t>r)&&(a>i/r?(e=i,t=i/a):(t=r,e=r*a)),{width:e,height:t}},getStyle:function(e,t){return e?window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]:0},getSpecifyRoleList:function(e,t){if(void 0===e||void 0===t)return{};var a={},n=!0,i=!1,o=void 0;try{for(var s,l=(0,d.default)((0,r.default)(t));!(n=(s=l.next()).done);n=!0){var u=s.value;a[u.role]||(a[u.role]={}),a[u.role][u.id]=u}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return a[e]||{}}};t.default=p},EXAz:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("4YfN"),r=n(i),o=a("din6"),s=n(o),l=a("X1IT"),d=n(l),u=a("Yarq"),c=n(u),h=a("AA3o"),f=n(h),m=a("xSur"),g=n(m),p=a("UzKs"),v=n(p),b=a("Y7Ml"),S=n(b),y=a("RFtt"),k=n(y),w=a("Q/yb"),T=n(w),C=a("HUPQ"),D=n(C),A=a("T+56"),E=n(A),I=a("VSuD"),P=n(I),R=a("SQdn"),B=n(R),_=function(e){function t(e){(0,f.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.state={position:{top:e.defaultPosition?e.defaultPosition.top:0,left:e.defaultPosition?e.defaultPosition.left:0},size:{width:e.defaultSize?e.defaultSize.width:void 0,height:e.defaultSize?e.defaultSize.height:void 0},opacity:1,scale:1,isCanDrag:!1},a.newSize={},a.position={top:0,left:0},a.clientX=0,a.clientY=0,a.isCanDrag=!1,a.isDragging=!1,a.isResizing=!1,a.scale=0,a.onTouchTime=null,a.longTouchTime=500,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,S.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){E.default.Window.addEventListener(P.default.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),E.default.Document.addEventListener(P.default.EVENTTYPE.DocumentEvent.onFullscreenchange,this.handlerOnFullscreenchange.bind(this),this.listernerBackupid),E.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),E.default.CoreController.addEventListener("changeMainContentVesselSmartSize",this.changeMainContentVesselSmartSize.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){E.default.Window.removeBackupListerner(this.listernerBackupid),E.default.CoreController.removeBackupListerner(this.listernerBackupid),E.default.Document.removeBackupListerner(this.listernerBackupid)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=(t.id,t.size),n=t.percentPosition;if(e.percentPosition&&(!this.props.percentPosition||!(0,d.default)(e.percentPosition.percentLeft,n.percentLeft)||!(0,d.default)(e.percentPosition.percentTop,n.percentTop))){var i=this.getPosition(e.percentPosition,e.size);this.state.position=Object.customAssign(this.state.position,i),this.setState({position:this.state.position})}if(e.size&&(!a||!(0,d.default)(e.size.width,a.width)||!(0,d.default)(e.size.height,a.height))){var r=this.getPosition(e.percentPosition,e.size);this.state.position=Object.customAssign(this.state.position,r),this.setState({position:this.state.position,size:{width:e.size.width,height:e.size.height}})}}},{key:"handlerOnResize",value:function(){this.recalculation()}},{key:"handlerOnFullscreenchange",value:function(){this.recalculation()}},{key:"changeMainContentVesselSmartSize",value:function(){this.recalculation()}},{key:"recalculation",value:function(){var e=this.props,t=e.id,a=e.percentPosition,n=e.canResize,i=e.changeEleReSize,r=e.size,o=this.getPosition(a,r);this.state.position=Object.customAssign(this.state.position,o),this.setState({position:this.state.position}),n&&(this.newSize=this.limitResizeBounds(this.state.size),i&&"function"==typeof i&&i(t,this.newSize))}},{key:"getPosition",value:function(e,t){var a=this.props,n=a.bounds,i=void 0===n?"#tk_app":n,r=a.borderWidth,o=void 0===r?0:r,s=T.default.findDOMNode(this),l=void 0;if("string"==typeof i&&(l=document.querySelector(i)),s&&l&&e&&void 0!==e.percentLeft&&void 0!==e.percentTop){var d=D.default.windowInnerWidth/P.default.STANDARDSIZE,u=t?t.width*d+2*o*d:s.offsetWidth,c=t?t.height*d+2*o*d:s.offsetHeight,h=l.offsetWidth,f=l.offsetHeight,m=e.percentLeft*(h-u),g=e.percentTop*(f-c);return m=isNaN(m)||m===1/0||null===m||m<0?0:m,g=isNaN(g)||g===1/0||null===g||g<0?0:g,{left:m,top:g}}return{left:0,top:0}}},{key:"getPercentPosition",value:function(e){var t=this.props.bounds,a=void 0===t?"#tk_app":t,n=T.default.findDOMNode(this),i=void 0;if("string"==typeof a&&(i=document.querySelector(a)),n&&i&&e&&void 0!==e.left&&void 0!==e.top){var r=n.offsetWidth,o=n.offsetHeight,s=i.offsetWidth,l=i.offsetHeight,d=e.left/(s-r),u=e.top/(l-o);return d=isNaN(d)||d===1/0||null===d||d<0?0:d,u=isNaN(u)||u===1/0||null===u||u<0?0:u,{percentLeft:d,percentTop:u}}return{percentLeft:0,percentTop:0}}},{key:"limitDragBounds",value:function(e){var t=this.props.bounds,a=T.default.findDOMNode(this),n=void 0;return"string"==typeof t&&(n=document.querySelector(t)),a&&n&&void 0!==e.left&&void 0!==e.top&&(e.left=e.left<0?0:e.left>n.offsetWidth-a.offsetWidth?n.offsetWidth-a.offsetWidth:e.left,e.top=e.top<0?0:e.top>n.offsetHeight-a.offsetHeight?n.offsetHeight-a.offsetHeight:e.top),e}},{key:"limitResizeBounds",value:function(e){var t=this.props,a=t.bounds,n=t.defaultSize,i=t.minResize,r=t.borderWidth,o=void 0===r?0:r,s=T.default.findDOMNode(this),l=e.width,d=e.height;if(!n||!s)return e;var u=n.originalResizeScale,c=void 0,h=void 0,f=void 0;"string"==typeof a&&(c=document.querySelector(a),h=c.clientWidth,f=c.clientHeight);var m=window.innerWidth/P.default.STANDARDSIZE;return i&&(u>i.width/i.height?d<i.height&&(d=i.height,l=d*u):l<i.width&&(l=i.width,d=l/u)),c&&(l>=h/m-2*o||d>=f/m-2*o)&&(u>h/f?(l=h/m-2*o,d=l/u):(d=f/m-2*o,l=d*u)),{width:l,height:d}}},{key:"onPress",value:function(){}},{key:"onPressUp",value:function(){}},{key:"onTouchStart",value:function(e){var t=this;e.persist();var a=this.props.handle;if(a&&e.target&&"string"==typeof a){var n=T.default.findDOMNode(this).querySelector(a);if(e.target!==n&&$(e.target).parents(a).length<=0)return}clearTimeout(this.onTouchTime),this.clientX=e.targetTouches[0].clientX,this.clientY=e.targetTouches[0].clientY,this.position.left=this.state.position.left||0,this.position.top=this.state.position.top||0,this.onTouchTime=setTimeout(function(){t.state.isCanDrag=!0,t.setState({isCanDrag:t.state.isCanDrag});var a=t.props.onPanStart;a&&"function"==typeof a&&a(e)},this.longTouchTime)}},{key:"onTouchMove",value:function(e){var t=Math.abs(e.touches[0].clientX-this.clientX),a=Math.abs(e.touches[0].clientY-this.clientY);if((0,s.default)(t,a)>=40&&clearTimeout(this.onTouchTime),this.state.isCanDrag){this.state.position.top=this.position.top+e.targetTouches[0].clientY-this.clientY,this.state.position.left=this.position.left+e.targetTouches[0].clientX-this.clientX;var n=this.limitDragBounds(this.state.position);this.setState({position:n}),e.preventDefault()}}},{key:"onTouchEnd",value:function(e){if(clearTimeout(this.onTouchTime),this.state.isCanDrag){this.state.isCanDrag=!1,this.setState({isCanDrag:this.state.isCanDrag}),this.clientX=0,this.clientY=0,this.position.left=0,this.position.top=0;var t=this.getPercentPosition(this.state.position),a=this.props,n=a.onPanEnd,i=a.id;n&&"function"==typeof n&&n(e,this.state.position,t,i)}}},{key:"onPinchStart",value:function(e){this.scale=this.state.scale||1;var t=this.props.onPinchStart;t&&"function"==typeof t&&t(e)}},{key:"onPinch",value:function(e){var t=this.props,a=t.id,n=t.onPinch;t.defaultSize&&(this.state.scale=this.scale*e.scale,this.newSize.width=this.props.defaultSize.width*this.state.scale,this.newSize.height=this.props.defaultSize.height*this.state.scale,this.newSize=this.limitResizeBounds(this.newSize),this.setState({size:this.newSize}),n&&"function"==typeof n&&n(e,a,this.newSize))}},{key:"onPinchEnd",value:function(e){var t=this.props,a=t.id,n=t.onPinchEnd;n&&"function"==typeof n&&n(e,a,this.newSize)}},{key:"onPinchIn",value:function(e){}},{key:"onPinchOut",value:function(e){}},{key:"onPinchCancel",value:function(e){}},{key:"render",value:function(){var e=this.props,t=(e.id,e.disabled),a=e.canResize,n=this.state,i=n.position,o=n.size,s=(n.opacity,n.isCanDrag),l={left:i.left+"px",top:i.top+"px",width:a?o.width+"rem":void 0,height:a?o.height+"rem":void 0,pointerEvents:s?"none":"auto",transform:s?"scale(1.05)":void 0},d={recognizers:{pinch:{enable:a}}},u=k.default.Children.only(this.props.children),c={options:d,onPinchStart:this.onPinchStart.bind(this),onPinch:this.onPinch.bind(this),onPinchEnd:this.onPinchEnd.bind(this),onPinchIn:this.onPinchIn.bind(this),onPinchOut:this.onPinchOut.bind(this),onPress:this.onPress.bind(this),onPressUp:this.onPressUp.bind(this)};return k.default.createElement(B.default,c,k.default.cloneElement(u,{style:(0,r.default)({},u.props.style,l),onTouchStart:!0===t?void 0:this.onTouchStart.bind(this),onTouchMove:!0===t?void 0:this.onTouchMove.bind(this),onTouchEnd:!0===t?void 0:this.onTouchEnd.bind(this)}))}}]),t}(k.default.Component);t.default=_},F5u0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Yarq"),r=n(i),o=a("AA3o"),s=n(o),l=a("xSur"),d=n(l),u=a("UzKs"),c=n(u),h=a("Y7Ml"),f=n(h),m=a("RFtt"),g=n(m),p=a("p98y"),v=n(p);a("ocoG");var b=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={updateState:!1},a.isSlidering=!1,a.changeValue=void 0,a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"onChange",value:function(e){this.isSlidering&&(this.changeValue=e,this.setState({updateState:!this.state.updateState})),this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e)}},{key:"onBeforeChange",value:function(e){this.isSlidering=!0,this.changeValue=e,this.props.onBeforeChange&&"function"==typeof this.props.onBeforeChange&&this.props.onBeforeChange(e)}},{key:"onAfterChange",value:function(e){this.isSlidering=!1,this.changeValue=void 0,this.props.onAfterChange&&"function"==typeof this.props.onAfterChange&&this.props.onAfterChange(e)}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.disabled,n=e.vertical,i=e.style;return g.default.createElement(v.default,{style:i,vertical:n,className:t,disabled:a,value:void 0!==this.changeValue?this.changeValue:this.props.value,onChange:this.onChange.bind(this),onBeforeChange:this.onBeforeChange.bind(this),onAfterChange:this.onAfterChange.bind(this)})}}]),t}(g.default.Component);t.default=b},FDbx:function(e,t){},"G/71":function(e,t,a){a("Gquc"),a("IsPG"),a("A1pn"),a("uhis"),a("8SsP"),a("bJpG"),a("stem"),e.exports=a("AKd3").Map},GrKX:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("hRKE"),r=n(i),o=a("ZLEe"),s=n(o),l=a("Q+Ik"),d=n(l),u=a("HzJ8"),c=n(u),h=a("KH7x"),f=n(h),m=a("3cXf"),g=n(m),p=a("AA3o"),v=n(p),b=a("xSur"),S=n(b),y=a("T+56"),k=n(y),w=a("VSuD"),T=n(w),C=a("DrPG"),D=n(C),A=a("Wi6Q"),E=n(A),I=a("HUPQ"),P=n(I),R=a("yE5a"),B=n(R),_=a("0jvK"),x=n(_),N=a("YRCL"),M=n(N),W=function(){function e(t){(0,v.default)(this,e),this.room=t}return(0,S.default)(e,[{key:"registerEventToRoom",value:function(){for(var e in T.default.EVENTTYPE.RoomEvent)!function(e){B.default.getTkRoom().addEventListener(T.default.EVENTTYPE.RoomEvent[e],function(t){var a=!0;("stream-rtcStats"===t.type||"room-pubmsg"===t.type&&"sendNetworkState"===t.message.name)&&(a=!1),a&&L.Logger.debug(T.default.EVENTTYPE.RoomEvent[e]+" event:",t),k.default.Room.dispatchEvent(t,!1)})}(e)}},{key:"addEventListenerToRoomHandler",value:function(){var e=this;for(var t in T.default.EVENTTYPE.RoomEvent)!function(t){k.default.Room.addEventListener(T.default.EVENTTYPE.RoomEvent[t],function(a){if(!e["handler"+D.default.replaceFirstUper(t)]||"function"!=typeof e["handler"+D.default.replaceFirstUper(t)]||!e["handler"+D.default.replaceFirstUper(t)](a)){var n=!0;("stream-rtcStats"===a.type||"room-pubmsg"===a.type&&"sendNetworkState"===a.message.name)&&(n=!1),k.default.CoreController.dispatchEvent(a,n)}})}(t)}},{key:"handlerRoomPubmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var a=e.message;if(P.default.signallingMessageList&&P.default.signallingMessageList.length>0&&"UpdateTime"!==a.name&&"LowConsume"!==a.name&&"StreamFailure"!==a.name)return P.default.signallingMessageList.push(a),!0;switch(P.default.serviceTime||(P.default.serviceTime=1e3*a.ts,P.default.remindServiceTime=1e3*a.ts),a.name){case"ClassBegin":P.default.serviceTime=D.default.isMillisecondClass(a.ts)?a.ts:1e3*a.ts,P.default.remindServiceTime=D.default.isMillisecondClass(a.ts)?a.ts:1e3*a.ts,t._classBeginStartHandler(a);break;case"UpdateTime":P.default.serviceTime=1e3*a.ts,P.default.remindServiceTime=1e3*a.ts,P.default.firstGetServiceTime||P.default.isHandleMsglistFromRoomPubmsg||!P.default.signallingMessageList||(P.default.firstGetServiceTime=!0,P.default.classBegin||this._msglistOnConnected(P.default.signallingMessageList,"roomConnected"),this._msglistOnConnected(P.default.signallingMessageList,"roomPubmsg"),P.default.signallingMessageList=null,delete P.default.signallingMessageList);break;case"RemoteControl":switch(a.data.action){case"getDocServer":M.default.sendSignallingFromRemoteControl(a.fromID,{action:"pushDocServer",serverInfo:{serverList:P.default.docAddressList,serverIndex:P.default.docAddressIndex}});break;case"changeLine":var n=Number(a.data.lineIndex);P.default.docAddressIndex!==n&&(P.default.docAddressIndex=n%P.default.docAddressList.length,P.default.nowUseDocAddress=P.default.docAddressList[P.default.docAddressIndex]||T.default.SERVICEINFO.docAddress,B.default.getTkWhiteBoardManager().switchDocAddress(Number(P.default.docAddressIndex),!0))}break;case"StreamFailure":L.Logger.info("StreamFailure signalling:"+(0,g.default)(a))}return"sendNetworkState"===a.name||"BlackBoardDrag"===a.name||"videoDraghandle"===a.name||void 0}},{key:"handlerRoomDelmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var a=e.message;if(P.default.signallingMessageList&&P.default.signallingMessageList.length>0){for(var n=P.default.signallingMessageList.length-1;n>=0;n--)P.default.signallingMessageList[n].id!==a.id&&P.default.signallingMessageList[n].associatedMsgID!==a.id||P.default.signallingMessageList.splice(n,1);return!0}switch(a.name){case"ClassBegin":t._classBeginEndHandler(a)}}},{key:"handlerRoomConnected",value:function(e){this._compareDocServerSpeedSwitchCND(),B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({languageType:"chinese"===P.default.language.name?"ch":"complex"===P.default.language.name?"tw":"en",mediaShareToID:B.default.getTkRoom().getMySelf().id,clientMediaShare:P.default.isClient&&P.default.clientversion>=2018031e3&&!P.default.isMacClient,synchronization:!1,canDraw:B.default.getTkRoom().getMySelf().candraw,canPage:B.default.getTkRoom().getMySelf().candraw||T.default.hasRole.roleTeachingAssistant||T.default.hasRole.roleChairman||T.default.hasRole.roleStudent&&T.default.joinRoomInfo.isSupportPageTrun,actionClick:B.default.getTkRoom().getMySelf().candraw,isMobile:"mobile"===TK.SDKTYPE,addPage:!1}),P.default.showShapeAuthor=T.default.joinRoomInfo.brushName&&!P.default.playback,P.default.firstGetServiceTime=!1,P.default.isHandleMsglistFromRoomPubmsg=!1,P.default.appConnected=!0;var t=E.default.getRoleHasDefalutAppPermissions();x.default.initAppPermissions(t);var a=e.message;P.default.signallingMessageList=a,this._msglistOnConnected(P.default.signallingMessageList,"roomConnected"),P.default.serviceTime&&!P.default.firstGetServiceTime&&!P.default.isHandleMsglistFromRoomPubmsg&&P.default.signallingMessageList&&(P.default.firstGetServiceTime=!0,this._msglistOnConnected(P.default.signallingMessageList,"roomPubmsg"),P.default.signallingMessageList=null,delete P.default.signallingMessageList),M.default.setParticipantPropertyToAll(B.default.getTkRoom().getMySelf().id,{codeVersion:1}),$(window).resize()}},{key:"handlerRoomDisconnected",value:function(e){P.default.appConnected=!1,P.default.classBegin=!1,P.default.serviceTime=void 0,P.default.remindServiceTime=void 0,P.default.signallingMessageList=null,delete P.default.signallingMessageList,P.default.isHandleMsglistFromRoomPubmsg=!1,P.default.participantGiftNumberJson={}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user,n=!0,i=!1,r=void 0;try{for(var o,s=(0,c.default)((0,d.default)(t));!(n=(o=s.next()).done);n=!0){var l=o.value,u=(0,f.default)(l,2),h=u[0],m=u[1];a.id===B.default.getTkRoom().getMySelf().id&&"candraw"===h&&(B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({canDraw:m,canPage:m||T.default.hasRole.roleStudent&&T.default.joinRoomInfo.isSupportPageTrun,actionClick:m,synchronization:m}),x.default.setAppPermissions("sendSignallingFromShowPage",m),x.default.setAppPermissions("sendSignallingFromH5ShowPage",m),x.default.setAppPermissions("sendSignallingFromDynamicPptShowPage",m),x.default.setAppPermissions("sendSignallingFromGeneralShowPage",m),x.default.setAppPermissions("sendSignallingFromDynamicPptTriggerActionClick",m),x.default.setAppPermissions("sendSignallingFromH5DocumentAction",m),x.default.setAppPermissions("sendWhiteboardMarkTool",m),x.default.setAppPermissions("h5DocumentActionClick",m),x.default.setAppPermissions("dynamicPptActionClick",m),x.default.setAppPermissions("publishDynamicPptMediaPermission_video",m),x.default.setAppPermissions("canDraw",m),x.default.setAppPermissions("canDragCaptureImg",m),x.default.setAppPermissions("canResizeCaptureImg",m),T.default.hasRole.roleStudent&&(x.default.setAppPermissions("whiteboardPagingPage",m||T.default.joinRoomInfo.isSupportPageTrun),x.default.setAppPermissions("newpptPagingPage",m||T.default.joinRoomInfo.isSupportPageTrun),x.default.setAppPermissions("h5DocumentPagingPage",m||T.default.joinRoomInfo.isSupportPageTrun),x.default.setAppPermissions("jumpPage",m||T.default.joinRoomInfo.isSupportPageTrun)))}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}},{key:"handlerRoomPlaybackClearAll",value:function(e){return k.default.CoreController.dispatchEvent({type:T.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController}),!0}},{key:"handlerRoomReceiveActionCommand",value:function(e){var t=e.message,a=t.action;switch(t.cmd,a){case"transmitWindowSize":document.getElementById("tk_app")?(P.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,P.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(P.default.windowInnerWidth=window.innerWidth,P.default.windowInnerHeight=window.innerHeight);var n=P.default.windowInnerWidth/T.default.STANDARDSIZE,i=document.getElementById("all_root")||document.getElementsByTagName("html");if(i){var r=D.default.isArray(i)?i[0]:i;r&&r.style&&(r.style.fontSize=n+"px")}return k.default.Window.dispatchEvent({type:T.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:n}}),!0}}},{key:"handlerRoomModeChanged",value:function(e){e.message.roomMode===TK.ROOM_MODE.BIG_ROOM?P.default.HeightConcurrence=!0:e.message.roomMode===TK.ROOM_MODE.NORMAL_ROOM&&(P.default.HeightConcurrence=!1)}},{key:"handlerRoomAudiovideostateSwitched",value:function(e){var t=e.message;P.default.isOnlyAudioRoom=t.onlyAudio}},{key:"handlerRoomCheckroom",value:function(e){var t=e.message||{},a=t.ret,n=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(a,n)}},{key:"handlerRoomCheckroomPlayback",value:function(e){var t=e.message||{},a=t.ret,n=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(a,n)}},{key:"handlerRoomUpdateFakeJsSdkInitInfo",value:function(e){var t=e.message;void 0!==t.playback&&(P.default.playback=t.playback),void 0!==t.deviceType&&(P.default.mobileDeviceType=t.deviceType,P.default.clientType=t.clientType,T.default.STANDARDSIZE="pad"===t.deviceType?20.48:13.34)}},{key:"handlerRoomServeraddressUpdate",value:function(e){var t=e.message,a=t.web_protocol,n=t.web_host,i=t.web_port,r=t.doc_host,o=t.doc_port,s=t.backup_doc_host,l=t.backup_doc_port;T.default.bindServiceinfoToTkConstant(a,n,i,r,o,s,l,P.default.handlerRoomServeraddressUpdateIsInit)}},{key:"_classBeginStartHandler",value:function(e){P.default.classBeginTime=D.default.isMillisecondClass(e.ts)?e.ts:1e3*e.ts,P.default.classBegin=!0,B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:"__all",synchronization:!(!T.default.hasRole.roleChairman&&!T.default.hasRole.roleTeachingAssistant)||B.default.getTkRoom().getMySelf().candraw,addPage:T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant});var t=E.default.getRoleHasDefalutAppPermissions();x.default.initAppPermissions(t);var a=B.default.getTkRoom().getMySelf().candraw;x.default.setAppPermissions("sendSignallingFromShowPage",a),x.default.setAppPermissions("sendSignallingFromH5ShowPage",a),x.default.setAppPermissions("sendSignallingFromDynamicPptShowPage",a),x.default.setAppPermissions("sendSignallingFromGeneralShowPage",a),x.default.setAppPermissions("sendSignallingFromDynamicPptTriggerActionClick",a),x.default.setAppPermissions("sendSignallingFromH5DocumentAction",a),x.default.setAppPermissions("sendWhiteboardMarkTool",a),x.default.setAppPermissions("h5DocumentActionClick",a),x.default.setAppPermissions("dynamicPptActionClick",a),x.default.setAppPermissions("publishDynamicPptMediaPermission_video",a),x.default.setAppPermissions("canDraw",a),T.default.hasRole.roleStudent&&(x.default.setAppPermissions("whiteboardPagingPage",a||T.default.joinRoomInfo.isSupportPageTrun),x.default.setAppPermissions("newpptPagingPage",a||T.default.joinRoomInfo.isSupportPageTrun),x.default.setAppPermissions("h5DocumentPagingPage",a||T.default.joinRoomInfo.isSupportPageTrun),x.default.setAppPermissions("jumpPage",a||T.default.joinRoomInfo.isSupportPageTrun))}},{key:"_classBeginEndHandler",value:function(e){P.default.classBegin=!1,P.default.endClassBegin=!0,B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:void 0,synchronization:!1,addPage:!1});var t=E.default.getRoleHasDefalutAppPermissions();x.default.initAppPermissions(t)}},{key:"_msglistOnConnected",value:function(e,t){var a=this,n={};return function(e,t,n){var i={};for(var r in e)n&&n[e[r].name]||(e[r].data&&"string"==typeof e[r].data&&(e[r].data=JSON.parse(e[r].data)),/outIframe/.test(e[r].name)?k.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[r]}}):null==i[e[r].name]||void 0==i[e[r].name]?(i[e[r].name]=[],i[e[r].name].push(e[r])):i[e[r].name].push(e[r]));if("roomConnected"===t){var o=i.ClassBegin;null!=o&&void 0!=o&&o.length>0?"ClassBegin"==o[o.length-1].name&&(a._classBeginStartHandler(o[o.length-1]),k.default.CoreController.dispatchEvent({type:"receive-msglist-ClassBegin",source:"room-msglist",message:o[o.length-1]})):k.default.CoreController.dispatchEvent({type:"receive-msglist-not-ClassBegin",source:"room-msglist",message:{}}),i.ClassBegin=null}else if("roomPubmsg"===t){var l=i.whiteboardMarkTool;null!=l&&void 0!=l&&l.length>0&&"whiteboardMarkTool"==l[l.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-whiteboardMarkTool",source:"room-msglist",message:l[l.length-1]}),i.whiteboardMarkTool=null;var d=i.SharpsChange;null!=d&&void 0!=d&&d.length,i.SharpsChange=null;var u=i.CaptureImg;null!==u&&void 0!==u&&u.length>0&&k.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImg",message:{CaptureImgArray:u}}),i.CaptureImg=null;var c=i.CaptureImgDrag;null!==c&&void 0!==c&&c.length>0&&k.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImgDrag",message:{CaptureImgDragArray:c}}),i.CaptureImgDrag=null;var h=i.CaptureImgResize;null!==h&&void 0!==h&&h.length>0&&k.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImgResize",message:{CaptureImgResizeArray:h}}),i.CaptureImgResize=null;var f=i.WBPageCount;null!=f&&void 0!=f&&f.length>0&&"WBPageCount"==f[f.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-WBPageCount",source:"room-msglist",message:f[f.length-1]}),i.WBPageCount=null;var m=i.timer;null!=m&&void 0!=m&&m.length>0&&"timer"==m[m.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-timer",source:"room-msglist",message:{timerShowArr:m}}),i.timer=null;var g=i.TimerDrag;null!==g&&void 0!==g&&g.length>0&&k.default.CoreController.dispatchEvent({type:"receive-msglist-TimerDrag",message:{TimerDragArray:g}}),i.TimerDrag=null;var p=i.dial;null!=p&&void 0!=p&&p.length>0&&"dial"==p[p.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-dial",source:"room-msglist",message:{dialShowArr:p}}),i.dial=null;var v=i.DialDrag;null!==v&&void 0!==v&&v.length>0&&k.default.CoreController.dispatchEvent({type:"receive-msglist-DialDrag",message:{DialDragArray:v}}),i.DialDrag=null;var b=i.answer;null!=b&&void 0!=b&&b.length>0&&"answer"==b[b.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-answer",source:"room-msglist",message:{answerShowArr:b}}),i.answer=null;var S=i.submitAnswers;null!=S&&void 0!=S&&S.length>0&&"submitAnswers"==S[S.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-submitAnswers",source:"room-msglist",message:{submitAnswersArr:S}}),i.submitAnswers=null;var y=i.Question;null!=y&&void 0!=y&&y.length>0&&"Question"==y[y.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-question",source:"room-msglist",message:{data:y[0]}}),i.question=null;var w=i.PublishResult;null!=w&&void 0!=w&&w.length>0&&"PublishResult"==w[w.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-publishResult",source:"room-msglist",message:{data:w[0]}}),i.PublishResult=null;var T=i.AnswerDrag;null!==T&&void 0!==T&&T.length>0&&k.default.CoreController.dispatchEvent({type:"receive-msglist-AnswerDrag",message:{AnswerDragArray:T}}),i.AnswerDrag=null;var C=i.qiangDaQi;null!=C&&void 0!=C&&C.length>0&&"qiangDaQi"==C[C.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-qiangDaQi",source:"room-msglist",message:{qiangDaQiArr:C}}),i.qiangDaQi=null;var D=i.QiangDaZhe;null!=D&&void 0!=D&&D.length>0&&"QiangDaZhe"==D[D.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-QiangDaZhe",source:"room-msglist",message:{QiangDaZheArr:D}}),i.QiangDaZhe=null;var A=i.ResponderDrag;null!==A&&void 0!==A&&A.length>0&&k.default.CoreController.dispatchEvent({type:"receive-msglist-ResponderDrag",message:{ResponderDragArray:A}}),i.ResponderDrag=null;var E=i.MoreUsers;if(null!=E&&void 0!=E&&E.length>0)"MoreUsers"==E[E.length-1].name&&(P.default.isMoreUsers=!0,k.default.CoreController.dispatchEvent({type:"receive-msglist-MoreUsers",source:"room-msglist",message:E[E.length-1]}));else if((0,s.default)(B.default.getTkRoom().getUsers()).length>P.default.userCount&&!P.default.HeightConcurrence){var I={hasMoreUser:!0};P.default.isMoreUsers=!0,M.default.sendSignallingFromMoreUsers(I,!1)}i.MoreUsers=null;var R=i.BlackBoard;null!=R&&void 0!=R&&R.length>0&&"BlackBoard"==R[R.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-BlackBoard",source:"room-msglist",message:R[R.length-1]}),i.BlackBoard=null;var _=i.BlackBoard_new;null!=_&&void 0!=_&&_.length>0&&"BlackBoard_new"==_[_.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-NewBlackBoard",source:"room-msglist",message:_[_.length-1]}),i.BlackBoard_new=null;var x=i.UserHasNewBlackBoard;null!=x&&void 0!=x&&x.length>0&&"UserHasNewBlackBoard"==x[x.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-UserHasNewBlackBoard",source:"room-msglist",message:x}),i.UserHasNewBlackBoard=null;var N=i.PptVolumeControl;null!=N&&void 0!=N&&N.length>0&&"PptVolumeControl"==N[N.length-1].name&&k.default.CoreController.dispatchEvent({type:"receive-msglist-PptVolumeControl",source:"room-msglist",message:{PptVolumeControlArr:N}}),i.PptVolumeControl=null;var W=null,H=i.ShowPage;if(null!=H&&void 0!=H&&H.length>0)for(var O=0;O<H.length;O++)H[O].data.isMedia||(W=H[O]);i.ShowPage=null,void 0!=W&&null!=W&&(L.Logger.debug("receive-msglist-ShowPage-lastDocument info:",W),k.default.CoreController.dispatchEvent({type:"receive-msglist-ShowPage-lastDocument",message:{data:W.data,source:"room-msglist"}})),P.default.isHandleMsglistFromRoomPubmsg=!0}}(e,t,n),!0}},{key:"_handlerCheckroomOrInitPlaybackInfo",value:function(e,t){L.Logger.debug("checkroom  ret and roominfo:",e,t);var a=D.default.decrypt(T.default.SERVICEINFO.joinUrl)||window.location.href,n=B.default.getTkRoom().getRoomProperties().chairmancontrol,i=void 0,o=void 0;P.default.playback?"mobile"===TK.SDKTYPE&&TK.global&&void 0!==TK.global.fakeJsSdkInitInfo.mobileInfo.clientType?t.skins&&"object"===(0,r.default)(t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType])&&(i=t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType].tplId,o=t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType].skinId):t.skins&&"object"===(0,r.default)(t.skins.pc)&&(i=t.skins.pc.tplId,o=t.skins.pc.skinId):t.room&&"object"===(0,r.default)(t.room)&&(i=t.room.tplId,o=t.room.skinId);var s={starttime:B.default.getTkRoom().getRoomProperties().starttime,endtime:B.default.getTkRoom().getRoomProperties().endtime,nickname:B.default.getTkRoom().getMySelf().nickname,thirdid:B.default.getTkRoom().getMySelf().id,joinUrl:D.default.encrypt(a),serial:B.default.getTkRoom().getRoomProperties().serial,roomrole:Number(B.default.getTkRoom().getMySelf().role),roomtype:Number(B.default.getTkRoom().getRoomProperties().roomtype),companyid:Number(B.default.getTkRoom().getRoomProperties().companyid),isLivebypass:void 0!==B.default.getTkRoom().getRoomProperties().livebypass&&null!==B.default.getTkRoom().getRoomProperties().livebypass&&1===Number(B.default.getTkRoom().getRoomProperties().livebypass),autoStartAV:!P.default.playback&&!!n&&1===Number(n.substr(23,1)),autoClassBegin:!P.default.playback&&!!n&&1===Number(n.substr(32,1)),studentCloseMyseftAV:!P.default.playback&&!!n&&1===Number(n.substr(33,1)),hiddenClassBegin:!P.default.playback&&!!n&&1===Number(n.substr(34,1)),isUploadH5Document:!(P.default.playback||!n)&&1===Number(n.substr(35,1)),assistantOpenMyseftAV:!(P.default.playback||!n)&&1===Number(n.substr(36,1)),isSupportCandraw:!(P.default.playback||!n)&&1===Number(n.substr(37,1)),isSupportPageTrun:!(P.default.playback||!n)&&1===Number(n.substr(38,1)),isShowTheAnswer:!(P.default.playback||!n)&&1===Number(n.substr(42,1)),hasCoursewareRemarks:!(P.default.playback||!n)&&1===Number(n.substr(43,1)),isDoubleScreenDisplay:!(P.default.playback||!n)&&1===Number(n.substr(39,1)),isBeforeClassReleaseVideo:!(P.default.playback||!n)&&1===Number(n.substr(41,1)),isClassOverNotLeave:!(P.default.playback||!n)&&1===Number(n.substr(47,1)),videoWhiteboardDraw:!(P.default.playback||!n)&&1===Number(n.substr(48,1)),localRecord:!(P.default.playback||!n)&&1===Number(n.substr(49,1)),videoInFullScreen:!(P.default.playback||!n)&&1===Number(n.substr(50,1)),pictureInPicture:!(P.default.playback||!n)&&1===Number(n.substr(51,1)),pauseWhenOver:!(P.default.playback||!n)&&1===Number(n.substr(52,1)),classBeginEndCloseClient:!(P.default.playback||!n)&&1===Number(n.substr(54,1)),chatSendImg:!(P.default.playback||!n)&&1===Number(n.substr(53,1)),isDocumentClassification:!(P.default.playback||!n)&&1===Number(n.substr(56,1)),brushName:!(P.default.playback||!n)&&1===Number(n.substr(58,1)),hasCaptureImg:!(P.default.playback||!n)&&1===Number(n.substr(59,1)),pushflow:!(P.default.playback||!n)&&1===Number(n.substr(60,1)),qrCode:!(P.default.playback||!n)&&1===Number(n.substr(69,1)),shapeUndoRedoClear:!(P.default.playback||!n)&&1===Number(n.substr(68,1)),isMoviesShare:!!n&&1===Number(n.substr(70,1)),isDoubleShare:!!n&&1===Number(n.substr(72,1)),endOfClassHoursIsClassOver:!(P.default.playback||!n)&&1===Number(n.substr(71,1)),customTrophysVoice:!!n&&1===Number(n.substr(44,1)),pointerReminder:!!n&&1===Number(n.substr(73,1)),areaExchange:!(P.default.playback||!n)&&1===Number(n.substr(74,1)),tourCancelBtn:!(P.default.playback||!n)&&1===Number(n.substr(78,1)),isHasVideo:!!n&&1===Number(n.substr(1,1)),customWhiteboardBackground:!!n&&1===Number(n.substr(81,1)),createOnlyAudioRoom:!(P.default.playback||!n)&&1===Number(n.substr(80,1)),isConfigVideoMirror:!(P.default.playback||!n)&&1===Number(n.substr(55,1)),toolBox:{answer:!(P.default.playback||!n)&&1===Number(n.substr(61,1)),turnplate:!(P.default.playback||!n)&&1===Number(n.substr(62,1)),timer:!(P.default.playback||!n)&&1===Number(n.substr(63,1)),responder:!(P.default.playback||!n)&&1===Number(n.substr(64,1)),moreBlackboard:!(P.default.playback||!n)&&1===Number(n.substr(65,1)),destTopShare:!(P.default.playback||!n)&&1===Number(n.substr(66,1))},isHandsUpOnStage:!0,jumpurl:P.default.playback?"":D.default.getUrlParams("jumpurl"),roomname:B.default.getTkRoom().getRoomProperties().roomname,pullConfigure:B.default.getTkRoom().getRoomProperties().pullConfigure,pushConfigure:B.default.getTkRoom().getRoomProperties().pushConfigure,pushUrl:B.default.getTkRoom().getRoomProperties().pullid,helpcallbackurl:t.helpcallbackurl,classRoomLogoUrl:t.room.classroomlogo?t.room.classroomlogo:void 0,whiteboardcolor:P.default.playback?void 0!==B.default.getTkRoom().getRoomProperties().whiteboardcolor?Number(B.default.getTkRoom().getRoomProperties().whiteboardcolor)-1:0:void 0!==t.room.whiteboardcolor?Number(t.room.whiteboardcolor)-1:0,template:T.default.testTemplate?T.default.testTemplate:i&&!/^\d*$/g.test(i)?"template_"+i:T.default.template,skin:T.default.testSkin?T.default.testSkin:o&&!/^\d*$/g.test(o)?"skin_"+o:T.default.skin,localRecordInfo:{localrecordtype:B.default.getTkRoom().getRoomProperties().localrecordtype},foregroundpic:B.default.getTkRoom().getRoomProperties().foregroundpic,voicefileUrl:B.default.getTkRoom().getRoomProperties().voicefile,customTrophys:B.default.getTkRoom().getRoomProperties().trophy?B.default.getTkRoom().getRoomProperties().trophy:void 0,pushflowaddr:B.default.getTkRoom().getRoomProperties().pushflowaddr?B.default.getTkRoom().getRoomProperties().pushflowaddr:void 0};s.roomtype===T.default.ROOMTYPE.oneToOne&&s.assistantOpenMyseftAV&&(s.roomtype=3,P.default.roomChange=!0),B.default.setRoomName(B.default.getTkRoom().getRoomProperties().roomname),B.default.setUserName(B.default.getTkRoom().getMySelf().nickname),B.default.setUserThirdid(B.default.getTkRoom().getMySelf().id),document.head.getElementsByTagName("title")[0].innerHTML=B.default.getRoomName(),T.default.bindRoomInfoToTkConstant(s),T.default.bindParticipantHasRoleToTkConstant(),T.default.bindParticipantHasRoomtypeToTkConstant(),T.default.updateTemplate(s.template),T.default.updateSkin(s.skin),P.default.videoScale=T.default.joinRoomInfo.roomVideoWidth/T.default.joinRoomInfo.roomVideoHeight,P.default.showShapeAuthor=T.default.joinRoomInfo.brushName&&!P.default.playback,B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaSharePauseWhenOver:T.default.joinRoomInfo.pauseWhenOver,isLoadDocumentRemark:T.default.joinRoomInfo.hasCoursewareRemarks,canRemark:T.default.joinRoomInfo.hasCoursewareRemarks,showShapeAuthor:P.default.showShapeAuthor,documentToolBarConfig:{isLoadRemark:T.default.joinRoomInfo.hasCoursewareRemarks}})}},{key:"_compareDocServerSpeedSwitchCND",value:function(){var e=function(e,t){if("function"==typeof t)if("mobile"===TK.SDKTYPE){if(B.default.getTkRoom()&&"function"==typeof B.default.getTkRoom().getLocalStorageItem)try{B.default.getTkRoom().getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("getLocalStorageItem error:",e),t("")}}else t(L.Utils.localStorage.getItem("tkDocAddressIndex"))};e("tkDocAddressIndex",function(t){if(!t){var a=void 0,n=void 0,i=void 0,r=void 0,o=function(e,t){var a={},n=(new Date).getTime(),i=e+"/speed.bmp?ts="+n,r=new Image;r.onload=function(){var e=(new Date).getTime();a={code:0,loadingTime:e-n},"function"==typeof t&&t(a)},r.onerror=function(){a={code:-1,loadingTime:void 0},"function"==typeof t&&t(a)},r.src=i},s=function(t){e("tkDocAddressIndex",function(e){e||P.default.docAddressIndex!==t&&(P.default.docAddressIndex=t%P.default.docAddressList.length,P.default.nowUseDocAddress=P.default.docAddressList[P.default.docAddressIndex]||T.default.SERVICEINFO.docAddress,B.default.getTkWhiteBoardManager().switchDocAddress(Number(P.default.docAddressIndex),!1),L.Logger.info("auto switch cdn , cdn index is TkGlobal.docAddressIndex , address is "+P.default.nowUseDocAddress))})};o(T.default.SERVICEINFO.docAddress,function(e){L.Logger.info("load document cdn  speed.bmp , response is "+L.Utils.toJsonStringify(e)),0===e.code&&e.loadingTime&&(a=e.loadingTime,clearTimeout(r),n?s(a<n+50?0:1):i=setTimeout(function(){n||s(0)},100))}),o(T.default.SERVICEINFO.backupDocAddress,function(e){L.Logger.info("load backup document cdn  speed.bmp , response is "+L.Utils.toJsonStringify(e)),0===e.code&&e.loadingTime&&(n=e.loadingTime,clearTimeout(i),a?s(a<n+50?0:1):r=setTimeout(function(){a||s(1)},100))})}})}}]),e}(),H=new W;H.addEventListenerToRoomHandler(),t.default=H},HUPQ:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),r=n(i),o=a("DrPG"),s=n(o);window.GLOBAL=window.GLOBAL||{};var l=window.GLOBAL;l.classBegin=!1,l.endClassBegin=!1,l.routeName=void 0,l.playback=!1,l.playPptVideoing=!1,l.playMediaFileing=!1,l.serviceTime=void 0,l.firstGetServiceTime=!1,l.isHandleMsglist=!1,l.remindServiceTime=void 0,l.classBeginTime=void 0,l.isSkipPageing=!1,l.isClient=!1,l.isBroadcast=!1,l.mobileDeviceType=void 0,l.windowInnerWidth=window.innerWidth,l.windowInnerHeight=window.innerHeight,l.isOnlyAudioRoom=!1;var d=s.default.getBrowserInfo();L.Logger.info("浏览器 browserInfo:"+(0,r.default)(d)),l.isMobile=d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad,l.isBroadcastClient=l.isClient&&l.isBroadcast,l.isBroadcastMobile=l.isMobile&&l.isBroadcast,l.languageName="ch"===s.default.getUrlParams("languageType")?"chinese":"tw"===s.default.getUrlParams("languageType")?"complex":"english",l.defaultFileInfo={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0},l.showShapeAuthor=!1,l.isMoreUsers=!1,l.userCount=50,l.customWhiteboardColorArry=["ffffff","000000","415646","ffc973","d3465c","9ad0ea","756691","558289"],l.clientComponentName=s.default.getUrlParams("loadComponentName"),l.docAddressList=[],l.docAddressIndex=L.Utils.localStorage.getItem("tkDocAddressIndex")&&Number(L.Utils.localStorage.getItem("tkDocAddressIndex"))&&"number"==typeof Number(L.Utils.localStorage.getItem("tkDocAddressIndex"))?Number(L.Utils.localStorage.getItem("tkDocAddressIndex")):0,l.nowUseDocAddress=/https/.test(window.location.protocol)?"https://global.talk-cloud.net":"http://global.talk-cloud.net",l.handlerRoomServeraddressUpdateIsInit=!0,l.roomChange=!1,t.default=l},Ha7l:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("RFtt"),r=n(i),o=a("HUPQ"),s=n(o),l=function(e){var t=e.dispose;return e.parentState,r.default.createElement("div",{className:"header"},r.default.createElement("span",{className:"subject item"},s.default.language.languageData.qPanel.answerPanel),r.default.createElement("span",{className:"btn item"},r.default.createElement("button",{className:"size-btn",onClick:function(){t({action:"changeSizeState",data:{}})}}),r.default.createElement("button",{className:"close-btn",onClick:function(){t({action:"close",data:{}})}})))};t.default=l},HzJ8:function(e,t,a){e.exports={default:a("oMO2"),__esModule:!0}},"IW/2":function(e,t){},JfkP:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("hRKE"),r=n(i),o=a("3cXf"),s=n(o),l=a("Yarq"),d=n(l),u=a("AA3o"),c=n(u),h=a("xSur"),f=n(h),m=a("UzKs"),g=n(m),p=a("Y7Ml"),v=n(p),b=a("aA9S"),S=n(b),y=a("cUn4"),k=n(y),w=a("RFtt"),T=n(w),C=a("EXAz"),D=n(C),A=a("yE5a"),E=n(A),I=a("T+56"),P=n(I),R=a("YRCL"),B=n(R);a("QqT5"),a("IW/2");var _=a("HUPQ"),x=n(_),N=a("m/zC"),M=n(N),W=a("s3NG"),H=n(W),O=a("fC09"),z=n(O),F=a("hxXK"),U=n(F),j=a("Ha7l"),V=n(j),K=a("e+zB"),Y=n(K),q=a("VSuD"),Q=n(q),G={on:P.default.CoreController.addEventListener,off:P.default.CoreController.removeBackupListerner,emit:P.default.CoreController.dispatchEvent},Z={detail:"DETAIL",option:"OPTION",statistics:"STATISTICS",current:"CURRENT"},J=[Q.default.EVENTTYPE.RoomEvent.roomPubmsg,Q.default.EVENTTYPE.RoomEvent.roomDelmsg,"receive-msglist-question","receive-msglist-publishResult"],X=["UNCOMMIT","COMMITTED"],$=new k.default([[X[0],Z.option],[X[1],Z.current]]),ee=["RUNNING","FINISHED"],te=new k.default([[ee[0],Z.option],[ee[1],Z.statistics]]),ae=["NORMAL","MINIMIZED"],ne={hasChose:!1},ie=new Array(4).fill(void 0).map(function(e){return(0,S.default)({},ne)}),re=function(e){function t(){(0,c.default)(this,t);var e=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return e.owner=E.default.getTkRoom().getMySelf(),e.role=e.owner.role,e.markID=(new Date).getTime()+"_"+Math.random(),e.historyOptions=[],e.quesID=void 0,e.rightOptions=[],e.state={show:!1,commitState:X[0],questionState:ee[0],sizeState:ae[0],page:{index:Z.option,data:null},result:new Array(ie.length).fill(0),options:ie,resizeInfo:{width:0,height:0},rightOptions:[],detailPageInfo:{current:1,total:1},detailData:[],pubRight:!1},e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"reset",value:function(){this.historyOptions=[],this.setState({rightOptions:[],commitState:"UNCOMMIT",detailData:[],detailPageInfo:{current:1,total:1}})}},{key:"componentDidMount",value:function(){var e=this;J.forEach(function(t,a){return G.on(t,e.handleEvent.bind(e),e.markID)})}},{key:"componentWillUnmount",value:function(){G.off(this.markID)}},{key:"componentDidUpdate",value:function(e,t){this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=x.default.windowInnerWidth/Q.default.STANDARDSIZE,n=t.offsetWidth/a,i=t.offsetHeight/a;this.state.resizeInfo&&(Math.abs(this.state.resizeInfo.width-n)>.04||Math.abs(this.state.resizeInfo.height-i)>.04)&&(this.state.resizeInfo={width:n,height:i},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:.5,percentTop:0,isDrag:!1},!0)}},{key:"dispose",value:function(e){var t=e.action,a=e.data,n=e.extra;if(null===t||null===a)return L.Logger.error("Incomplete parameter");this[t]&&"function"==typeof this[t]&&this[t]({action:t,data:a,extra:n})}},{key:"turn",value:function(e){var t=e.data,a=e.extra,n=e.extra.page;if(null===t||null===a||void 0===n)return L.Logger.error("Error parameter");n.index!==Z.current&&this.setState({page:n})}},{key:"handleEvent",value:function(e){var t=e.type,a=e.message;t=/-/.test(t)&&t.replace(/\-/g,"")||t,this.dispose({action:t,data:a})}},{key:"changeQuestionState",value:function(e){var t=e.data,a=this.state.questionState,n=ee.indexOf(a),i=te.get(ee.length-1===n?ee[0]:ee[n+1]),r=i===Z.current?this.state.page:{index:i,data:t};this.setState({questionState:ee[ee.length-1===n?0:n+1],page:r})}},{key:"changeCommitState",value:function(e){var t=e.data,a=this.state.commitState,n=X.indexOf(a),i=$.get(X.length-1===n?X[0]:X[n+1]),r=i===Z.current?this.state.page:{index:i,data:t};("UNCOMMIT"!==a||this.state.options.some(function(e){return!0===e.hasChose}))&&(this["answerWill"+("UNCOMMIT"===a?"Commit":"Modify")](),this.setState({commitState:X[X.length-1===n?0:n+1],page:r}))}},{key:"changeSizeState",value:function(e){var t=(e.data,this.state.sizeState),a=ae.indexOf(t);this.setState({sizeState:ae[ae.length-1===a?0:a+1]})}},{key:"answerWillCommit",value:function(){var e=this.state.options,t={};this.historyOptions.length>0&&this.historyOptions.forEach(function(e,a){e.hasChose&&(t[""+a]=-1)}),e.forEach(function(e,a){e.hasChose&&!t[""+a]?t[""+a]=1:e.hasChose&&-1===t[""+a]&&delete t[""+a]}),B.default.answerCommit({options:e,actions:t,modify:this.historyOptions.length>0&&1||0,stuName:E.default.getTkRoom().getMySelf().nickname,quesID:this.quesID,isRight:this.equals(e,this.rightOptions)}),this.historyOptions=JSON.parse((0,s.default)(e))}},{key:"answerWillModify",value:function(){}},{key:"roompubmsg",value:function(e){var t=e.data;if(t.data){var a=t.data,n=a.action,i=a.options,r=a.quesID;switch(t.name){case"Question":switch(n){case"start":this.reset(),this.quesID=r,this.rightOptions=i,Q.default.hasRole.roleStudent&&this.setState({show:!0,questionState:"RUNNING",page:{index:Z.option,data:{}},options:new Array(i.length).fill(void 0).map(function(e){return(0,S.default)({},ne)}),pubRight:!1});break;case"end":Q.default.hasRole.roleStudent&&this.setState({show:!0})}break;case"PublishResult":var o=t.data,s=o.result,l=o.resultNum,d=o.ansTime,u=o.rightOptions,c=o.hasPub;Q.default.hasRole.roleStudent&&this.setState({questionState:"FINISHED",page:{index:Z.statistics,data:{}},show:!0,result:s,resultNum:l,ansTime:d,rightOptions:u,pubRight:c})}}}},{key:"roomdelmsg",value:function(e){switch(e.data.name){case"Question":case"ClassBegin":Q.default.hasRole.roleStudent&&this.setState({show:!1})}}},{key:"receivemsglistpublishResult",value:function(e){var t=e.data.data;this.state.show&&this.roompubmsg({data:t})}},{key:"receivemsglistquestion",value:function(e){var t=e.data.data;this.roompubmsg({data:t})}},{key:"equals",value:function(e,t){if(!e||!t)return 0;if(e.length!=t.length)return 0;for(var a=0,n=e.length;a<n;a++)if(e[a]instanceof Array&&t[a]instanceof Array){if(!this.equals(e[a],t[a]))return 0}else if("object"===(0,r.default)(e[a])&&"object"===(0,r.default)(t[a])){if((0,s.default)(e[a])!==(0,s.default)(t[a]))return 0}else if(e[a]!=t[a])return 0;return 1}},{key:"changeOptionLength",value:function(e){var t=e.data.num,a=this.state.options;t>0&&a.push((0,S.default)({},ne))||a.pop(),this.setState({options:a})}},{key:"optionClick",value:function(e){var t=e.data.index;if("UNCOMMIT"===this.state.commitState){var a=this.state.options;a[t].hasChose=!a[t].hasChose,this.setState({options:a})}}},{key:"changeDetail",value:function(e){var t=(e.action,e.data);1===this.state.detailPageInfo.current&&-1===t.action||this.state.detailPageInfo.current===this.state.detailPageInfo.total&&1===t.action||(-1===t.action?this.getDetailData(this.state.detailPageInfo.current-1):1===t.action&&this.getDetailData(this.state.detailPageInfo.current+1))}},{key:"changeDetailOrStatistics",value:function(){var e=this.state.page;this.getDetailData(1),this.setState({page:{index:e.index===Z.statistics?Z.detail:Z.statistics}})}},{key:"getDetailData",value:function(e){var t=this;M.default.getSimplifyAnswer({id:this.quesID,page:e},{doneCallback:function(a){0===a.result&&t.setState({detailData:a.data,detailPageInfo:{total:a.pageinfo&&Math.ceil(a.pageinfo.count/20)||1,current:e}})}})}},{key:"close",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.questionState,n=e.sizeState,i=e.commitState,r=e.resizeInfo,o=(0,S.default)(this.state,{role:this.role,owner:this.owner}),s=this.props,l=s.id,d=s.studentAnswerDrag,u=s.draggableData,c={position:"absolute",zIndex:130,display:t?"":"none",left:0},h=Object.customAssign({id:l,size:r,percentPosition:{percentLeft:d.percentLeft,percentTop:d.percentTop}},u);return T.default.createElement(D.default,h,T.default.createElement("div",{id:l,className:"question-panel student "+a.toLowerCase()+" "+n.toLowerCase()+" "+i.toLowerCase(),style:c},T.default.createElement(V.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:Z}),T.default.createElement("div",{className:"body"},this.state.page.index===Z.option?T.default.createElement(H.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:Z}):void 0,this.state.page.index===Z.detail?T.default.createElement(z.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:Z}):void 0,this.state.page.index===Z.statistics?T.default.createElement(Y.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:Z}):void 0),T.default.createElement(U.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:Z})))}}]),t}(T.default.Component);t.default=re},KH7x:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=a("MGgt"),r=n(i),o=a("HzJ8"),s=n(o);t.default=function(){function e(e,t){var a=[],n=!0,i=!1,r=void 0;try{for(var o,l=(0,s.default)(e);!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},KyAL:function(e,t,a){function n(e){return a(i(e))}function i(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./i18_chinese.js":"ppOE","./i18_complex.js":"2vo4","./i18_english.js":"yZ13"};n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id="KyAL"},MGgt:function(e,t,a){e.exports={default:a("hWTF"),__esModule:!0}},MNBs:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("zsLt"),r=n(i),o=a("kfHR"),s=n(o),l=a("Q+Ik"),d=n(l),u=a("KH7x"),c=n(u),h=a("HzJ8"),f=n(h),m=a("Yarq"),g=n(m),p=a("AA3o"),v=n(p),b=a("xSur"),S=n(b),y=a("UzKs"),k=n(y),w=a("Y7Ml"),T=n(w),C=a("RFtt"),D=n(C),A=a("HUPQ"),E=n(A),I=a("VSuD"),P=n(I),R=a("T+56"),B=n(R),_=a("YRCL"),x=n(_),N=a("yE5a"),M=n(N),L=a("Q/yb"),W=(n(L),function(e){function t(e){(0,v.default)(this,t);var a=(0,k.default)(this,(t.__proto__||(0,g.default)(t)).call(this,e));return a.state={initArr:[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],rightKey:!1,plusStyle:!0,reduceStyle:!0,beginStyle:!1,answerTeachWrapDiv:!1,changeOneAnswerStyle:!1,isSubmitOrBegin:"submitAnswer",isShowWarn:!1},a.liArr=[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1},{id:4,name:"E",sel:!1},{id:5,name:"F",sel:!1},{id:6,name:"G",sel:!1},{id:7,name:"H",sel:!1}],a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.lisStyle=!1,a.studentSelectKey=[],a.teacherTrueKeyArry=[],a.teacherBeginAnswerTime=0,a}return(0,T.default)(t,e),(0,S.default)(t,[{key:"componentDidMount",value:function(){var e=this;B.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(P.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(P.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;B.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerMsglistAnswerShow",value:function(e){var t=this,a=!0,n=!1,i=void 0;try{for(var r,o=(0,f.default)(e.message.answerShowArr);!(a=(r=o.next()).done);a=!0){var s=r.value;P.default.hasRole.roleStudent?t._studentRecevedServiceDataShow(s):t._teacherRecevedServiceDataShow(s)}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"answer":P.default.hasRole.roleStudent?t._studentRecevedServiceDataShow(a):t._teacherRecevedServiceDataShow(a)}}},{key:"_studentRecevedServiceDataShow",value:function(e){e.data.isShow||(e.data.isRound?this.setState({answerTeachWrapDiv:!1}):(this.teacherBeginAnswerTime=e.ts,this.setState({initArr:e.data.optionalAnswers,answerTeachWrapDiv:!0,isSubmitOrBegin:"submitAnswer"})))}},{key:"_teacherRecevedServiceDataShow",value:function(e){e.data.isShow?this.setState({initArr:e.data.optionalAnswers,answerTeachWrapDiv:!0}):(this.setState({initArr:e.data.optionalAnswers,answerTeachWrapDiv:!1}),this.props.callback())}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"answer":case"ClassBegin":t._restoreTheDefaultSettings()}}},{key:"_restoreTheDefaultSettings",value:function(){this.setState({initArr:[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],plusStyle:!0,reduceStyle:!0,beginStyle:!1,answerTeachKeyWrapDiv:!1,isSubmitOrBegin:"submitAnswer"}),this.studentSelectKey=[],this.lisStyle=!1,this.teacherTrueKeyArry=[]}},{key:"_loadOptionDescArray",value:function(e){var t=this,a=[],n=[];return e.map(function(e,i){e.sel&&n.push(e.name);var r=D.default.createElement("li",{className:"answer-teach-lis",key:e.id,onClick:t.changeColor.bind(t,i)},"A"===e.name?e.sel?D.default.createElement("div",{className:"children-options-A-selected"}):D.default.createElement("div",{className:"children-options-A-default"}):void 0,"B"===e.name?e.sel?D.default.createElement("div",{className:"children-options-B-selected"}):D.default.createElement("div",{className:"children-options-B-default"}):void 0,"C"===e.name?e.sel?D.default.createElement("div",{className:"children-options-C-selected"}):D.default.createElement("div",{className:"children-options-C-default"}):void 0,"D"===e.name?e.sel?D.default.createElement("div",{className:"children-options-D-selected"}):D.default.createElement("div",{className:"children-options-D-default"}):void 0,"E"===e.name?e.sel?D.default.createElement("div",{className:"children-options-E-selected"}):D.default.createElement("div",{className:"children-options-E-default"}):void 0,"F"===e.name?e.sel?D.default.createElement("div",{className:"children-options-F-selected"}):D.default.createElement("div",{className:"children-options-F-default"}):void 0,"G"===e.name?e.sel?D.default.createElement("div",{className:"children-options-G-selected"}):D.default.createElement("div",{className:"children-options-G-default"}):void 0,"H"===e.name?e.sel?D.default.createElement("div",{className:"children-options-H-selected"}):D.default.createElement("div",{className:"children-options-H-default"}):void 0);a.push(r)}),{beforeArray:a,rightArry:n}}},{key:"addHandel",value:function(e){if(P.default.hasRole.roleChairman||P.default.hasRole.roleTeachingAssistant){var t=this.state.initArr.length;if(t>=2&&this.setState({plusStyle:!0,reduceStyle:!0,noRemoveAnswer:!1}),t>6&&this.setState({plusStyle:!0}),7===t&&this.setState({plusStyle:!1}),t>7)return this.setState({plusStyle:!1}),!1;this.liArr[t].sel=!1,this.state.initArr.push(this.liArr[t]),this.setState({optionUl:this.state.optionUl,initArr:this.state.initArr})}}},{key:"reduceHandel",value:function(){var e=[];if(P.default.hasRole.roleChairman||P.default.hasRole.roleTeachingAssistant){if(this.state.initArr.length<=2)return this.setState({reduceStyle:!1}),!1;this.state.initArr.pop(),this.setState({initArr:this.state.initArr}),this.state.initArr.length>2?this.setState({plusStyle:!0,reduceStyle:!0}):this.setState({reduceStyle:!1});var t=!0,a=!1,n=void 0;try{for(var i,r=(0,f.default)((0,d.default)(this.state.initArr));!(t=(i=r.next()).done);t=!0){var o=i.value,s=(0,c.default)(o,2),l=(s[0],s[1]);e.push(l.sel),e.indexOf(!0)>=0?this.setState({beginStyle:!0}):this.setState({beginStyle:!1})}}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}}},{key:"changeColor",value:function(e,t){if(P.default.hasRole.roleChairman||P.default.hasRole.roleTeachingAssistant){this.state.initArr[e].sel=!this.state.initArr[e].sel,this.teacherTrueKeyArry=[],this.setState({initArr:this.state.initArr}),this.state.initArr[e].sel||this.setState({beginStyle:!1});var a=!0,n=!1,i=void 0;try{for(var r,o=(0,f.default)(this.state.initArr);!(a=(r=o.next()).done);a=!0)r.value.sel&&this.setState({beginStyle:!0})}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}else P.default.hasRole.roleStudent&&this._studentChangeColor(e)}},{key:"_studentChangeColor",value:function(e){if(this.lisStyle)return!1;var t=[];this.state.initArr[e].sel=!this.state.initArr[e].sel,this.studentSelectKey=[],this.setState({initArr:this.state.initArr}),this.state.initArr[e].sel||this.setState({beginStyle:!1});var a=!0,n=!1,i=void 0;try{for(var o,l=(0,f.default)(this.state.initArr);!(a=(o=l.next()).done);a=!0)o.value.sel&&this.setState({beginStyle:!0})}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}for(var d=0;d<this.state.initArr.length;d++)this.state.initArr[d].sel&&(t.push(this.state.initArr[d].name),t=(0,s.default)(new r.default(t)),this.studentSelectKey.push(t));this.studentSelectKey.length>0&&this.setState({changeOneAnswerStyle:!1})}},{key:"beginAnswer",value:function(e){var t=this;if(P.default.hasRole.roleChairman||P.default.hasRole.roleTeachingAssistant){for(var a=this.state.initArr.length,n=[],i=0;i<a;i++)this.state.initArr[i].sel&&(n.push(this.state.initArr[i].name),this.teacherTrueKeyArry=(0,s.default)(new r.default(n)));if(this.teacherTrueKeyArry.length<=0)return t.setState({isShowWarn:!0}),setTimeout(function(){t.setState({isShowWarn:!1})},3e3),!1;for(var o=0;o<a;o++)this.state.initArr[o].sel=!1;this.setState({answerTeachWrapDiv:!1});var l=(0,s.default)(new r.default(this.teacherTrueKeyArry));l=l.sort();var d={optionalAnswers:this.state.initArr,quizTimes:"00:00:00",rightAnswers:l,isRound:!1,studentSelect:[],trueLV:0,allNumbers:0,dataChoose:{},dataTable:{},isPublished:!1,idAS:[],idBS:[],idCS:[],idDS:[],idES:[],idFS:[],idGS:[],idHS:[],isShow:!1,teacherBeginAnswerTime:E.default.serviceTime};x.default.sendSignallingAnswerToStudent(d),this.props.addClass()}}},{key:"beginOrReviseAnswer",value:function(e){var t=this;if(this.studentSelectKey.length<=0)return this.setState({isShowWarn:!0,changeOneAnswerStyle:!0,isSubmitOrBegin:"submitAnswer"}),setTimeout(function(){t.setState({isShowWarn:!1})},3e3),!1;if(this.studentSelectKey.length>0&&this.setState({changeOneAnswerStyle:!1,isSubmitOrBegin:"submitAnswer"}),this.lisStyle=!this.lisStyle,this.lisStyle){this._initSelectArr();var a={mySelect:this.studentSelectKey,sendStudentName:M.default.getTkRoom().getMySelf().nickname,sendUserID:M.default.getTkRoom().getMySelf().id,times:this.teacherBeginAnswerTime,optionalAnswers:this.state.initArr};this.setState({userAdmin:M.default.getTkRoom().getMySelf().nickname,isSubmitOrBegin:"changeAnswer"}),x.default.sendSignallingDataStudentToTeacherAnswer(!1,a)}else{this.studentSelectKey=[],this.setState({beginStyle:!1,isSubmitOrBegin:"submitAnswer"});var n=!0,i=!1,r=void 0;try{for(var o,s=(0,f.default)(this.state.initArr);!(n=(o=s.next()).done);n=!0)o.value.sel=!1}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}},{key:"_initSelectArr",value:function(){this.studentSelectKey=[];for(var e=0;e<this.state.initArr.length;e++)!0===this.state.initArr[e].sel&&this.studentSelectKey.push(this.state.initArr[e].name)}},{key:"render",value:function(){var e=this,t=this.state,a=t.initArr,n=t.isSubmitOrBegin,i=t.plusStyle,r=t.reduceStyle,o=t.beginStyle,s=this._loadOptionDescArray(a),l=s.beforeArray,d=s.rightArry;return D.default.createElement("div",{className:"answer-teach-wrapDiv touch-select-select ",style:{display:this.state.answerTeachWrapDiv?"block":"none"},ref:"dragBox"},D.default.createElement("div",{className:"answer-teach-content"},D.default.createElement("ul",{className:"answer-teach-optionUl",onClick:function(){e.setState({rightKey:!0})}},l),P.default.hasRole.roleStudent?void 0:D.default.createElement("div",{className:"plus-or-reduce"},D.default.createElement("div",{className:"answer-teach-add"+(i?" can-plus":" no-plus"),ref:"addDiv",onClick:this.addHandel.bind(this)},"+",E.default.language.languageData.answers.add.text),D.default.createElement("div",{className:"answer-teach-reduce"+(r?" can-reduce":" no-reduce"),ref:"reduceDiv",onClick:this.reduceHandel.bind(this)},E.default.language.languageData.answers.reduce.text)),P.default.hasRole.roleStudent?void 0:D.default.createElement("div",{className:"answer-teach-prompt-title"},D.default.createElement("div",{className:"answer-teach-prompt-title-left"},o?D.default.createElement("span",{className:this.state.rightKey?"rightKey":"hideRightKey"},E.default.language.languageData.answers.trueAnswer.text,"："):void 0,o?D.default.createElement("span",null,d):D.default.createElement("span",null,E.default.language.languageData.answers.headerMiddel.text)),D.default.createElement("div",{className:"answer-teach-begin"+(o?" child-can-begin":" child-not-begin"),onClick:this.beginAnswer.bind(this)},E.default.language.languageData.answers.beginAnswer.text)),P.default.hasRole.roleStudent?D.default.createElement("div",{className:"answer-student-begin"+(o?" child-can-begin":" child-not-begin"),onClick:this.beginOrReviseAnswer.bind(this)},E.default.language.languageData.answers[n].text):void 0),D.default.createElement("div",{className:"warning-title",style:{display:this.state.isShowWarn?"block":"none"}},E.default.language.languageData.answers.selectAnswer.text))}}]),t}(D.default.Component));t.default=W},MgeX:function(e,t,a){e.exports={default:a("XEbU"),__esModule:!0}},MxwP:function(e,t,a){"use strict";var n=a("lIiZ").f,i=a("c1o2"),r=a("bodH"),o=a("WwGG"),s=a("t8DS"),l=a("k/7E"),d=a("uH+j"),u=a("z7iO"),c=a("4BpY"),h=a("sjnA"),f=a("DVkV").fastKey,m=a("27tL"),g=h?"_s":"size",p=function(e,t){var a,n=f(t);if("F"!==n)return e._i[n];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,a,d){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=n&&l(n,a,e[d],e)});return r(u.prototype,{clear:function(){for(var e=m(this,t),a=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete a[n.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var a=m(this,t),n=p(a,e);if(n){var i=n.n,r=n.p;delete a._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),a._f==n&&(a._f=i),a._l==n&&(a._l=r),a[g]--}return!!n},forEach:function(e){m(this,t);for(var a,n=o(e,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(n(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!p(m(this,t),e)}}),h&&n(u.prototype,"size",{get:function(){return m(this,t)[g]}}),u},def:function(e,t,a){var n,i,r=p(e,t);return r?r.v=a:(e._l=r={i:i=f(t,!0),k:t,v:a,p:n=e._l,n:void 0,r:!1},e._f||(e._f=r),n&&(n.n=r),e[g]++,"F"!==i&&(e._i[i]=r)),e},getEntry:p,setStrong:function(e,t,a){d(e,t,function(e,a){this._t=m(e,t),this._k=a,this._l=void 0},function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?"keys"==t?u(0,a.k):"values"==t?u(0,a.v):u(0,[a.k,a.v]):(e._t=void 0,u(1))},a?"entries":"values",!a,!0),c(t)}}},NUMX:function(e,t,a){"use strict";t.__esModule=!0;var n=a("kfHR"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){return Array.isArray(e)?e:(0,i.default)(e)}},NWpI:function(e,t,a){var n=a("FITv"),i=a("Cl/E")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},NZEr:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HzJ8"),r=n(i),o=a("Yarq"),s=n(o),l=a("AA3o"),d=n(l),u=a("xSur"),c=n(u),h=a("UzKs"),f=n(h),m=a("Y7Ml"),g=n(m),p=a("RFtt"),v=n(p),b=a("HUPQ"),S=n(b),y=a("VSuD"),k=n(y),w=a("yE5a"),T=n(w),C=a("YRCL"),D=n(C),A=a("ZZXC"),E=n(A),I=a("adC7"),P=(n(I),a("m/zC")),R=(n(P),a("T+56")),B=n(R),_=a("Sa83"),x=(n(_),a("DrPG")),N=(n(x),a("EXAz")),M=(n(N),function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={isShow:!1,qrCodeBoxIsShow:!1,disabledSharing:!1,toolsShow:{destTopShare:!1,answer:!1,turnplate:!1,qrCode:!1,timer:!1,responder:!1,moreBlackboard:!1},holdData:{answer:{name:S.default.language.languageData.answers.headerTopLeft.text,bgName:"answerBtn",click:a.answerAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"answer"},turnplate:{name:S.default.language.languageData.dial.turntable.text,bgName:"turnplateBtn",click:a.turntableAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"turnplate"},timer:{name:S.default.language.languageData.timers.timerSetInterval.text,bgName:"timerBtn",click:a.timerAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"timer"},responder:{name:S.default.language.languageData.responder.responder.text,bgName:"responderBtn",click:a.responderAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"responder"},blackboard:{name:S.default.language.languageData.header.tool.blackBoard.title.open,bgName:"blackboardBtn",click:a.handleBlackBoardClick.bind(a),isDisabled:!1,isShow:!0,id:"blackboard"}},holdPagingIndex:0},a.maxPagingIndex=0,a.minPagingIndex=0,a.maxPagingNum=6,a.holdBoxWidth=0,a.holdBoxHeight=0,a.contentWidth=0,a.contentHeight=0,a.holdAllProportion=1.42,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;B.default.CoreController.addEventListener(k.default.EVENTTYPE.RoomEvent.roomReceiveActionCommand,e.receiveActionCommand.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("togo_holdArr",e.handleTogoHoldAll.bind(e),this.listernerBackupid),B.default.CoreController.addEventListener(k.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(k.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("updateAppPermissions_isCapture",e.handlerIsCaptureUpdate.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("updateAppPermissions_isQrCode",e.handlerIsQrCode.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("updateAppPermissions_Asharing",e.Asharing.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("colse_holdAll_item",this.handleCloseItem.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-NewBlackBoard",e.handlerReceive_msglist_NewBlackBoard.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-timer",e.handlerMsglistTimerShow.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-dial",e.handlerMsglistDialShow.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-qiangDaQi",e.handlerMsglistQiangDaQi.bind(e),e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.isShow!==this.state.isShow&&this.state.isShow}},{key:"receiveActionCommand",value:function(e){var t=e.message,a=t.action,n=t.cmd;if("toolbox"===a){var i=document.querySelector("#tk_app");this.holdBoxHeight=i.offsetHeight*("phone"===S.default.mobileDeviceType?.85:.6),this.holdBoxWidth=this.holdBoxHeight*this.holdAllProportion,this.contentWidth=.85*this.holdBoxWidth,this.contentHeight=.7*this.holdBoxHeight;var r=document.querySelector("#"+this.props.id);r.style.width=this.holdBoxWidth+"px",r.style.height=this.holdBoxHeight+"px",this.setState({isShow:n.isShow})}}},{key:"handlerIsCaptureUpdate",value:function(){this.handlerInitAppPermissions()}},{key:"handlerIsQrCode",value:function(){this.handlerInitAppPermissions()}},{key:"Asharing",value:function(){this.handlerInitAppPermissions()}},{key:"handlerInitAppPermissions",value:function(){var e=this.state.holdData;e.turnplate.isShow=k.default.joinRoomInfo.toolBox.turnplate&&(k.default.hasRole.roleChairman||k.default.hasRole.roleTeachingAssistant),e.answer.isShow=k.default.joinRoomInfo.toolBox.answer&&(k.default.hasRole.roleChairman||k.default.hasRole.roleTeachingAssistant),e.responder.isShow=k.default.joinRoomInfo.toolBox.responder&&!k.default.hasRoomtype.oneToOne&&!S.default.roomChange&&(k.default.hasRole.roleChairman||k.default.hasRole.roleTeachingAssistant),e.blackboard.isShow=k.default.joinRoomInfo.toolBox.moreBlackboard&&(k.default.hasRole.roleChairman||k.default.hasRole.roleTeachingAssistant),e.timer.isShow=k.default.joinRoomInfo.toolBox.timer&&(k.default.hasRole.roleChairman||k.default.hasRole.roleTeachingAssistant),this.setState({holdData:e})}},{key:"handlerReceive_msglist_NewBlackBoard",value:function(e){this.handlerRoomPubmsg(e),"BlackBoard_new"===e.message.name&&this.isDisabledHoldItem("blackboard",!0)}},{key:"handlerMsglistTimerShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,o=(0,r.default)(e.message.timerShowArr);!(t=(i=o.next()).done);t=!0)i.value,this.isDisabledHoldItem("timer",!0)}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"handlerMsglistDialShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,o=(0,r.default)(e.message.dialShowArr);!(t=(i=o.next()).done);t=!0)i.value,this.isDisabledHoldItem("turnplate",!0)}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"handlerMsglistAnswerShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,o=(0,r.default)(e.message.answerShowArr);!(t=(i=o.next()).done);t=!0)i.value,this.isDisabledHoldItem("answer",!0)}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"handlerMsglistQrCodeShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,o=(0,r.default)(e.message.answerShowArr);!(t=(i=o.next()).done);t=!0)i.value,this.isDisabledHoldItem("qrCode",!0)}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,o=(0,r.default)(e.message.qiangDaQiArr);!(t=(i=o.next()).done);t=!0)i.value,this.isDisabledHoldItem("responder",!0)}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"handlerRoomPubmsg",value:function(e){switch(e.message.name){case"BlackBoard_new":this.isDisabledHoldItem("blackboard",!0);break;case"answer":this.isDisabledHoldItem("answer",!0);break;case"dial":this.isDisabledHoldItem("turnplate",!0);break;case"timer":this.isDisabledHoldItem("timer",!0);break;case"qiangDaQi":this.isDisabledHoldItem("responder",!0);break;case"OnlyAudioRoom":this.isDisabledHoldItem("sharing",!0),this.isDisabledHoldItem("movieShare",!0)}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"BlackBoard_new":this.isDisabledHoldItem("blackboard",!1);break;case"answer":this.isDisabledHoldItem("answer",!1);break;case"dial":this.isDisabledHoldItem("turnplate",!1);break;case"timer":this.isDisabledHoldItem("timer",!1);break;case"qiangDaQi":this.isDisabledHoldItem("responder",!1);break;case"OnlyAudioRoom":this.isDisabledHoldItem("sharing",!1),this.isDisabledHoldItem("movieShare",!1);break;case"ClassBegin":var t=this.state.holdData;for(var a in t)t[a].isDisabled=!1;this.setState({holdData:t})}}},{key:"close",value:function(){var e=this;B.default.CoreController.dispatchEvent({type:"colose_holdArr"}),e.setState({isShow:!1});var t={toolbox:!1};T.default.getTkRoom().sendActionCommand("viewStateUpdate",t)}},{key:"answerAssemblyShowHandel",value:function(e){D.default.sendQuestion(!1,{action:"open"}),B.default.CoreController.dispatchEvent({type:"handleAnswerShow",className:"answer-implement-bg",isShow:!0}),this.isDisabledHoldItem("answer",!0),this.close()}},{key:"turntableAssemblyShowHandel",value:function(){var e={rotationAngle:"rotate(0deg)",isShow:!0};D.default.sendSignallingDialToStudent(e,!1),this.isDisabledHoldItem("turnplate",!0),this.close()}},{key:"timerAssemblyShowHandel",value:function(){var e={isStatus:!1,sutdentTimerArry:[0,5,0,0],isShow:!0,isRestart:!1};D.default.sendSignallingTimerToStudent(e),B.default.CoreController.dispatchEvent({type:"handleTurnShow",className:"timer-implement-bg",isShow:!0}),this.isDisabledHoldItem("timer",!0),this.close()}},{key:"handleQrCodeBoxClick",value:function(){this.setState({qrCodeBoxIsShow:!0}),B.default.CoreController.dispatchEvent({type:"handleQrCodeShow",isShow:!0}),this.isDisabledHoldItem("qrCode",!0),this.close()}},{key:"responderAssemblyShowHandel",value:function(){var e=this,t={isShow:!0,begin:!1,userAdmin:""};D.default.sendSignallingQiangDaQi(!1,t),B.default.CoreController.dispatchEvent({type:"responderShow",className:"responder-implement-bg",isShow:!0}),e.isDisabledHoldItem("responder",!0),e.close()}},{key:"_screenSharing",value:function(){B.default.CoreController.dispatchEvent({type:"programmShare"}),this.setState({disabledSharing:!0}),this.isDisabledHoldItem("sharing",!0),this.close()}},{key:"handleBlackBoardClick",value:function(){var e={blackBoardState:"_prepareing",currentTapKey:"blackBoardCommon",currentTapPage:1};D.default.sendSignallingFromNewBlackBoard(e,!1),this.isDisabledHoldItem("blackboard",!0),this.close()}},{key:"handleTogoHoldAll",value:function(e){this.setState({isShow:e.isShow})}},{key:"handleMovieShareClick",value:function(){var e=this;S.default.isClient&&!S.default.isMacClient&&(T.default.getTkRoom().getOpenLocalFileName({caption:"Media File Selector",filter:{"Media File":"*.mp4;*.3gp;*.avi;*.flv;*.mkv;*.mov;*.mpg;*.rmvb;*.vob;*.wmv"}},function(e){"Complete"===e.action&&E.default.unpublishAllFileStream(function(t,a){switch(t){case-1:case 1:var n=e.filename;B.default.CoreController.dispatchEvent({type:"localFileStreamCreateFromClient",message:{path:n}})}})}),e.close())}},{key:"getOpenHoldItemArr",value:function(){var e=this,t=e.state.holdData,a=[];for(var n in t)t[n].isShow&&a.push(t[n]);return a}},{key:"createHoldItemElement",value:function(){var e=this,t=e.getOpenHoldItemArr(),a=0,n=[],i=-1,r=[];a=t.length%e.maxPagingNum==0?t.length/8:parseInt(t.length/e.maxPagingNum)+1;for(var o=0;o<a;o++)n.push([]);t.forEach(function(t,a,r){a%e.maxPagingNum==0&&(i+=1),n[i].push(v.default.createElement("li",{key:a,className:"holdAllitem "+t.bgName},v.default.createElement("button",{className:t.bgName+" "+(t.isDisabled?"disabled":""),onClick:t.click}),v.default.createElement("span",null,t.name)))});for(var s=0;s<n.length;s++)r.push(v.default.createElement("ul",{key:s,className:"holdAllList",style:{width:e.contentWidth+"px"}},n[s]));var l=v.default.createElement("div",{className:"holdAllListBox",style:{width:r.length*e.contentWidth+"px",left:-e.state.holdPagingIndex*e.contentWidth+"px"}},r);return this.maxPagingIndex=a-1,l}},{key:"createLimitBtns",value:function(){for(var e=this,t=[],a=0;a<=e.maxPagingIndex;a++)t.push(v.default.createElement("button",{key:a,className:"limitBtn "+(a===e.state.holdPagingIndex?"active":""),onClick:e.jumpPaging.bind(e,a)}));return t}},{key:"jumpPaging",value:function(e){var t=this;t.state.holdPagingIndex!==e&&t.setState({holdPagingIndex:e})}},{key:"preventPaging",value:function(){var e=this;0!==e.state.holdPagingIndex&&e.setState({holdPagingIndex:e.state.holdPagingIndex-1})}},{key:"nextPaging",value:function(){var e=this;e.state.holdPagingIndex!==e.maxPagingIndex&&e.setState({holdPagingIndex:e.state.holdPagingIndex+1})}},{key:"handleCloseItem",value:function(e){this.isDisabledHoldItem(e.message.type,!1)}},{key:"isDisabledHoldItem",value:function(e,t){var a=this,n=a.state.holdData;n[e].isDisabled=t,a.setState({holdData:n})}},{key:"render",value:function(){var e=this,t=(e.state.toolsShow,this.props),a=t.id;return t.holdAllBoxDrag,t.draggableData,v.default.createElement("div",{id:a,className:"holdAllBox",style:{display:e.state.isShow?"block":"none",width:e.holdBoxWidth+"px",height:e.holdBoxHeight+"px"}},v.default.createElement("h3",{className:"holdAllTit"},S.default.language.languageData.toolCase.toolBox.text),v.default.createElement("button",{className:"closeHoldAll",onClick:e.close.bind(this)}),v.default.createElement("div",{className:"holdItemBox",ref:"holdItemBox",style:{width:e.contentWidth+"px"}},e.createHoldItemElement()),e.maxPagingIndex>0?v.default.createElement("button",{className:"preventBtn "+(e.state.holdPagingIndex>e.minPagingIndex?"":"disabled"),onClick:e.preventPaging.bind(e),disabled:!(e.state.holdPagingIndex>e.minPagingIndex)}):void 0,e.maxPagingIndex>0?v.default.createElement("button",{className:"nextBtn "+(e.state.holdPagingIndex<e.maxPagingIndex?"":"disabled"),onClick:e.nextPaging.bind(e),disabled:!(e.state.holdPagingIndex<e.maxPagingIndex)}):void 0,e.maxPagingIndex>0?v.default.createElement("div",{className:"limitBox"},e.createLimitBtns()):void 0)}}]),t}(v.default.Component));t.default=M},Ovlj:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),r=n(i),o=a("hRKE"),s=n(o),l=a("AA3o"),d=n(l),u=a("xSur"),c=n(u),h=a("HUPQ"),f=n(h),m=a("yE5a"),g=n(m),p=a("Sa83"),v=n(p),b=a("VSuD"),S=(n(b),function(){function e(){(0,d.default)(this,e)}return(0,c.default)(e,[{key:"pubMsg",value:function(e,t,a,n,i,o,l,d){if(v.default.handler.getAppPermissions("pubMsg")&&f.default.appConnected){a=a||"__all";var u=!i;n&&"object"===(void 0===n?"undefined":(0,s.default)(n))&&(n=(0,r.default)(n));var c={msgName:e,msgId:t,toId:a,data:n,save:u,expiresabs:o,associatedMsgID:l,associatedUserID:d,expires:void 0,type:void 0,write2DB:void 0,actions:void 0,do_not_replace:void 0};g.default.getTkRoom().pubMsg(c)}}},{key:"delMsg",value:function(e,t,a,n){if(v.default.handler.getAppPermissions("delMsg")&&f.default.appConnected){a=a||"__all",n&&"object"===(void 0===n?"undefined":(0,s.default)(n))&&(n=(0,r.default)(n));var i={msgName:e,msgId:t,toId:a,data:n};g.default.getTkRoom().delMsg(i)}}},{key:"setProperty",value:function(e,t,a){v.default.handler.getAppPermissions("setProperty")&&f.default.appConnected&&(t=t||"__all",g.default.getTkRoom().changeUserProperty(e,t,a))}},{key:"setParticipantPropertyToAll",value:function(e,t){v.default.handler.getAppPermissions("setParticipantPropertyToAll")&&this.setProperty(e,"__all",t)}},{key:"sendSignallingDataToParticipant",value:function(e,t,a,n,i,r,o,s,l){if(v.default.handler.getAppPermissions("sendSignallingDataToParticipant")){var d=this;e?d.delMsg(t,a,n,i):(s||"VideoWhiteboard"===t||"ClassBegin"===t||"SharpsChange"===t||"WBPageCount"===t||"ShowPage"===t||"whiteboardMarkTool"===t||(s="ClassBegin"),d.pubMsg(t,a,n,i,r,o,s,l))}}}]),e}());t.default=S},Oyrx:function(e,t,a){var n=a("adiS"),i=a("vhYp");e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},PRvV:function(e,t){},PqAP:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=a("RFtt"),r=n(i),o=a("Q/yb"),s=n(o),l=a("Sa83"),d=n(l),u=a("rkp3"),c=n(u);d.default.handler.loadSystemRequiredInfo(),s.default.render(r.default.createElement(c.default,null),document.getElementById("tk_app"))},"Q+Ik":function(e,t,a){e.exports={default:a("m0xB"),__esModule:!0}},QqT5:function(e,t){},"RJ+u":function(e,t,a){var n=a("AKd3"),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},SMmX:function(e,t,a){"use strict";var n=a("FITv"),i=a("7p3N"),r=a("WwGG"),o=a("k/7E");e.exports=function(e){n(n.S,e,{from:function(e){var t,a,n,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(a=[],t?(n=0,s=r(l,arguments[2],2),o(e,!1,function(e){a.push(s(e,n++))})):o(e,!1,a.push,a),new this(a))}})}},Sa83:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("T+56"),r=n(i),o=a("GrKX"),s=n(o),l=a("VSuD"),d=n(l),u=a("HUPQ"),c=n(u),h=a("DrPG"),f=n(h),m=a("0jvK"),g=n(m),p=a("ZZXC"),v=n(p),b=a("yE5a"),S=n(b),y=TK.EventDispatcher({});r.default.CoreController=y,y.handler={},y.handler.loadSystemRequiredInfo=function(){if(TK.tkLogPrintConfig)if(d.default.DEV){var e={debug:!0},t={development:!0,logLevel:d.default.LOGLEVEL.DEBUG},a={webrtcLogDebug:!0};TK.tkLogPrintConfig(e,t,a)}else{var n={debug:!1},i={development:!1,logLevel:d.default.LOGLEVEL.INFO},r={webrtcLogDebug:!1};TK.tkLogPrintConfig(n,i,r)}v.default.getAppLanguageInfo(function(e){c.default.language=e}),S.default.setTkRoom(TK.MobileNativeRoom()),s.default.registerEventToRoom();var o=new window.TKWhiteBoardManager(void 0,void 0,!0);S.default.setTkWhiteBoardManager(o),S.default.getTkRoom().registerRoomWhiteBoardDelegate(o),"videoDrawWhiteboardComponent"!==c.default.clientComponentName&&"localFileVideoDrawWhiteboardComponent"!==c.default.clientComponentName||S.default.getTkRoom().changeExtendSendInterfaceName("_videoWhiteboardPage")},y.handler.checkRoom=function(e){var t={type:d.default.EVENTTYPE.RoomEvent.roomCheckroom,message:{checkMeetingAterCallback:e}};r.default.CoreController.dispatchEvent(t)},y.handler.setAppPermissions=function(e,t){g.default.setAppPermissions(e,t)},y.handler.getAppPermissions=function(e){return g.default.getAppPermissions(e)},y.handler.initAppPermissions=function(e){g.default.initAppPermissions(e)},y.handler.addEventListenerOnCoreController=function(){document.oncontextmenu=null,document.oncontextmenu=function(){return!1},window.onbeforeunload=null,window.onbeforeunload=function(){},$(document).off("selectstart"),$(document).bind("selectstart",function(){return!0}),$(window).off("resize"),$(window).resize(function(){document.getElementById("tk_app")?(c.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,c.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(c.default.windowInnerWidth=window.innerWidth,c.default.windowInnerHeight=window.innerHeight);var e=c.default.windowInnerWidth/d.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var a=f.default.isArray(t)?t[0]:t;a&&a.style&&(a.style.fontSize=e+"px")}r.default.Window.dispatchEvent({type:d.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}})}),$(window).resize();var e=function(e){r.default.Window.dispatchEvent({type:d.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};f.default.tool.removeEvent(window,"message",e),f.default.tool.addEvent(window,"message",e,!1)},y.handler.addEventListenerOnCoreController(),t.default=y},"T+56":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.Document=TK.EventDispatcher({}),n.Window=TK.EventDispatcher({}),n.Element=TK.EventDispatcher({}),n.Room=TK.EventDispatcher({}),n.Stream=TK.EventDispatcher({}),n.Role=TK.EventDispatcher({}),t.default=n},U8JZ:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("zsLt"),r=n(i),o=a("kfHR"),s=n(o),l=a("HzJ8"),d=n(l),u=a("Yarq"),c=n(u),h=a("AA3o"),f=n(h),m=a("xSur"),g=n(m),p=a("UzKs"),v=n(p),b=a("Y7Ml"),S=n(b),y=a("RFtt"),k=n(y),w=a("HUPQ"),T=n(w),C=a("VSuD"),D=n(C),A=a("T+56"),E=n(A),I=a("YRCL"),P=n(I),R=a("DrPG"),B=n(R),_=a("yE5a"),x=(n(_),a("Q/yb")),N=(n(x),function(e){function t(e){(0,f.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.state={initArr:[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],studentsChooseAnswer:[],resultsOptionsAD:[],resultsOptionsEG:[],rightAnswers:[],isHide:!1,afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],studentNumbers:[],allNumbers:0,idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[],trueLV:0,allStudentChooseAnswer:{},isRound:!1,publishAnswerText:"PublishTheAnswer",xiangQingText:!1,tableStyle:!1,columnar:!1,tableObject:{},isPublished:!1,publishedWarning:!1,publishedWarningColor:"#074496",mytime:"00:00:00",startTime:0,endTime:0,playBackServerTime:0},a.teacherBeginAnswerTime=0,a.answerTrueNumber=0,a.isXiangQing=!1,a.optionalAnswers=[],a.numz=0,a.beginAnswerServerTime=0,a.endAnswerServerTime=0,a.servicerTimes=0,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,S.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){var e=this;E.default.CoreController.addEventListener("receive-msglist-submitAnswers",e.handlerMsglistResultStudent.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(D.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(D.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(D.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(D.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,e.handlerRoomPlaybackPlaybackEnd.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(D.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,e.handlerRoomPlaybackPlaybackUpdatetime.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(D.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,e.handlerRoomPlaybackDuration.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;E.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){var a=(t.playBackServerTime/1e3).toFixed(0),n=(this.state.playBackServerTime/1e3).toFixed(0);if(t.playBackServerTime&&this.state.playBackServerTime&&Math.abs(n-a)>1){var i=this._timeDifferenceToFormat(this.state.startTime,this.state.playBackServerTime),r=this._timeDifferenceToFormat(this.state.startTime,this.beginAnswerServerTime),o=this._timeDifferenceToFormat(this.state.startTime,this.endAnswerServerTime);0===this.endAnswerServerTime?this.numz=i-r:this.endAnswerServerTime>0&&(this.numz=o-r,clearInterval(this.stop))}}},{key:"_timeDifferenceToFormat",value:function(e,t){if(0!==t){var a=B.default.getTimeDifferenceToFormat(e,t),n=void 0;if(a){var i=a.hh,r=a.mm,o=a.ss;n=Number(o)+60*r+360*i}return n}}},{key:"handlerRoomPlaybackClearAll",value:function(){this._clearTeacherShowData()}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){var e=this;clearInterval(e.stop)}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=this,a=e.message.current.toFixed(0);t.setState({playBackServerTime:a})}},{key:"handlerRoomPlaybackDuration",value:function(){}},{key:"handlerMsglistAnswerShow",value:function(e){var t=this,a=!0,n=!1,i=void 0;try{for(var r,o=(0,d.default)(e.message.answerShowArr);!(a=(r=o.next()).done);a=!0){var s=r.value;D.default.hasRole.roleStudent?t._studentRecevedServiceDataShow(s):t._teacherRecevedServiceDataShow(s)}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"handlerMsglistResultStudent",value:function(e){var t=this,a=e.message.submitAnswersArr;for(var n in a)t._updateStudentShow(a[n])}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"answer":D.default.hasRole.roleStudent?t._studentRecevedServiceDataShow(a):t._teacherRecevedServiceDataShow(a);break;case"submitAnswers":t._updateStudentShow(a);break;case"UpdateTime":this.servicerTimes=a.ts}}},{key:"_teacherRecevedServiceDataShow",value:function(e){var t=this;setTimeout(function(){t._createHistogramFun(e.data.optionalAnswers),e.data.isShow||(t.props.addClass(),e.data.isRound?(clearInterval(t.stop),t.endAnswerServerTime=e.ts,t.optionalAnswers=e.data.optionalAnswers,t.setState({publishAnswerText:"PublishTheAnswer",xiangQingText:!1,rightAnswers:e.data.rightAnswers,isHide:!0,mytime:e.data.quizTimes}),e.data.isPublished&&t.setState({publishAnswerText:"published",publishedWarning:!1}),t._createHistogramFun(t.optionalAnswers)):(this.teacherBeginAnswerTime=e.data.teacherBeginAnswerTime,clearInterval(t.stop),T.default.playback?(t.beginAnswerServerTime=e.ts,t.numz=0):t.numz=T.default.serviceTime/1e3-e.ts,t.time_fun(),t.optionalAnswers=e.data.optionalAnswers,t.setState({publishedWarningColor:"#074496",columnar:!0,tableStyle:!1,publishedWarning:!1,publishAnswerText:"PublishTheAnswer",xiangQingText:!1,allStudentChooseAnswer:{},isHide:!0,rightAnswers:e.data.rightAnswers,afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],trueLV:0,allNumbers:0,idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[]}),t._createHistogramFun(t.optionalAnswers)))},10)}},{key:"_resetArry",value:function(){this.setState({afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[]})}},{key:"_purpleColumnCommonDataFun",value:function(e,t,a){var n=this;a[e][t].map(function(e,a){if("A"===e){n.state.idA.push(t),n.state.afterArrayA=[];var i=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idA.length<13?n.state.idA.length/10+"rem":"1.2rem"}});n.state.afterArrayA.push(i),n.setState({afterArrayA:n.state.afterArrayA,idA:n.state.idA})}if("B"===e){n.state.idB.push(t),n.state.afterArrayB=[];var r=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idB.length<13?n.state.idB.length/10+"rem":"1.2rem"}});n.state.afterArrayB.push(r),n.setState({afterArrayB:n.state.afterArrayB,idB:n.state.idB})}if("C"===e){n.state.idC.push(t),n.state.afterArrayC=[];var o=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idC.length<13?n.state.idC.length/10+"rem":"1.2rem"}});n.state.afterArrayC.push(o),n.setState({afterArrayC:n.state.afterArrayC,idC:n.state.idC})}if("D"===e){n.state.idD.push(t),n.state.afterArrayD=[];var s=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idD.length<13?n.state.idD.length/10+"rem":"1.2rem"}});n.state.afterArrayD.push(s),n.setState({afterArrayD:n.state.afterArrayD,idD:n.state.idD})}if("E"===e){n.state.idE.push(t),n.state.afterArrayE=[];var l=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idE.length<13?n.state.idE.length/10+"rem":"1.2rem"}});n.state.afterArrayE.push(l),n.setState({afterArrayE:n.state.afterArrayE,idE:n.state.idE})}if("F"===e){n.state.idF.push(t),n.state.afterArrayF=[];var d=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idF.length<13?n.state.idF.length/10+"rem":"1.2rem"}});n.state.afterArrayF.push(d),n.setState({afterArrayF:n.state.afterArrayF,idF:n.state.idF})}if("G"===e){n.state.idG.push(t),n.state.afterArrayG=[];var u=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idG.length<13?n.state.idG.length/10+"rem":"1.2rem"}});n.state.afterArrayG.push(u),n.setState({afterArrayG:n.state.afterArrayG,idG:n.state.idG})}if("H"===e){n.state.idH.push(t),n.state.afterArrayH=[];var c=k.default.createElement("div",{className:"answer-stu-lis",key:a,style:{width:n.state.idH.length<13?n.state.idH.length/10+"rem":"1.2rem"}});n.state.afterArrayH.push(c),n.setState({afterArrayH:n.state.afterArrayH,idH:n.state.idH})}})}},{key:"_studentRecevedServiceDataShow",value:function(e){var t=this;if(!e.data.isShow)if(this.teacherBeginAnswerTime=e.data.teacherBeginAnswerTime,e.data.isRound){t.optionalAnswers=e.data.optionalAnswers,t.props.addClass(),t.setState({columnar:!0,trueLV:e.data.trueLV,allNumbers:e.data.allNumbers,isHide:!0,mytime:e.data.quizTimes,rightAnswers:e.data.rightAnswers,studentsChooseAnswer:e.data.studentSelect}),t._resetArry();for(var a in e.data.dataChoose)for(var n in e.data.dataChoose[a])t._purpleColumnCommonDataFun(a,n,e.data.dataChoose);t._createHistogramFun(e.data.optionalAnswers),t.setState({tableStyle:!1,tableObject:e.data.dataTable,xiangQingText:T.default.language.languageData.answers.details.text}),e.data.isPublished&&t.setState({trueResultDivStyle:"visible"})}else t.setState({isHide:!1}),t.props.callback("");E.default.CoreController.dispatchEvent({type:"resizeHandler"})}},{key:"_updateStudentShow",value:function(e){var t=this;t.state.studentNumbers.push(e.fromID);var a=e.fromID,n=e.data.mySelect,i=e.data.sendStudentName,o=a+"0",l=a+"1",d=a+"2";t.state.tableObject[a]={},t.state.tableObject[a][o]=e.data.sendStudentName,t.state.tableObject[a][l]=e.data.mySelect,t.state.tableObject[a][d]=e.ts-t.teacherBeginAnswerTime,t.state.allStudentChooseAnswer[a]={},t.state.allStudentChooseAnswer[a][i]=n,t.setState({studentNumbers:t.state.studentNumbers,allStudentChooseAnswer:t.state.allStudentChooseAnswer,tableObject:t.state.tableObject,studentsChooseAnswer:e.data.mySelect});for(var u=0;u<t.state.studentNumbers.length;u++)e.fromID===t.state.studentNumbers[u]&&(t.state.allStudentChooseAnswer[a][i]=n,t.state.tableObject[a][o]=e.data.sendStudentName,t.state.tableObject[a][l]=e.data.mySelect,t.state.tableObject[a][d]=e.ts-e.data.times,t.setState({allStudentChooseAnswer:t.state.allStudentChooseAnswer,tableObject:t.state.tableObject}));var c=(0,s.default)(new r.default(t.state.studentNumbers));t.state.allNumbers=c.length,t.answerTrueNumber=0,t.setState({afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[]});for(var h in t.state.allStudentChooseAnswer)for(var f in t.state.allStudentChooseAnswer[h]){t._purpleColumnCommonDataFun(h,f,t.state.allStudentChooseAnswer);var m=e.data.optionalAnswers;t._createHistogramFun(m);var g=(0,s.default)(new r.default(t.state.rightAnswers)).sort();if(t.state.allStudentChooseAnswer[h][f].sort().toString()===g.toString()){t.answerTrueNumber++;var p=(t.answerTrueNumber/t.state.allNumbers*100).toFixed(0);t.setState({trueLV:p})}else{var v=((0,s.default)(new r.default(t.state.studentNumbers)),(t.answerTrueNumber/t.state.allNumbers*100).toFixed(0));t.setState({trueLV:v})}}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"answer":t._clearTeacherShowData();break;case"ClassBegin":t._clearTeacherShowData()}}},{key:"_endHandel",value:function(){if(D.default.hasRole.roleChairman||D.default.hasRole.roleTeachingAssistant){clearInterval(this.stop),D.default.joinRoomInfo.isShowTheAnswer||this.setState({isPublished:!0}),this.setState({isRound:!0});var e=(0,s.default)(new r.default(this.state.rightAnswers)),t=e.sort(),a={optionalAnswers:this.optionalAnswers,quizTimes:this.state.mytime,rightAnswers:t,isRound:!0,studentSelect:this.state.studentsChooseAnswer,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,dataChoose:this.state.allStudentChooseAnswer,dataTable:this.state.tableObject,isPublished:this.state.isPublished,idAS:this.state.idA,idBS:this.state.idB,idCS:this.state.idC,idDS:this.state.idD,idES:this.state.idE,idFS:this.state.idF,idGS:this.state.idG,idHS:this.state.idH,isShow:!1,teacherBeginAnswerTime:this.teacherBeginAnswerTime};P.default.sendSignallingAnswerToStudent(a),this.state.isPublished=!0,this.setState({isPublished:this.state.isPublished})}}},{key:"_restartHandel",value:function(){var e={optionalAnswers:this.state.initArr,quizTimes:this.state.mytime,rightAnswers:[],isRound:this.state.isRound,studentSelect:this.state.studentsChooseAnswer,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,dataChoose:this.state.allStudentChooseAnswer,dataTable:this.state.tableObject,isPublished:!1,idAS:[],idBS:[],idCS:[],idDS:[],idES:[],idFS:[],idGS:[],idHS:[],isShow:!0,teacherBeginAnswerTime:this.teacherBeginAnswerTime},t=!0;P.default.sendSignallingAnswerToStudent(e,t),t=!1,P.default.sendSignallingAnswerToStudent(e,t),this.props.callback("")}},{key:"endOrRestartHandel",value:function(){(D.default.hasRole.roleChairman||D.default.hasRole.roleTeachingAssistant)&&(this.state.isRound?this._restartHandel():this._endHandel())}},{key:"publishAnswerHandel",value:function(){var e=this;if(!this.state.isPublished)return this.setState({publishedWarning:!0}),setTimeout(function(){e.setState({publishedWarning:!1})},3e3),!1;this.setState({publishAnswerText:"published",publishedWarning:!1});var t=(0,s.default)(new r.default(this.state.rightAnswers)),a=t.sort(),n={optionalAnswers:this.state.initArr,quizTimes:this.state.mytime,rightAnswers:a,isRound:this.state.isRound,studentSelect:this.state.studentsChooseAnswer,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,dataChoose:this.state.allStudentChooseAnswer,dataTable:this.state.tableObject,isPublished:this.state.isPublished,idAS:this.state.idA,idBS:this.state.idB,idCS:this.state.idC,idDS:this.state.idD,idES:this.state.idE,idFS:this.state.idF,idGS:this.state.idG,idHS:this.state.idH,isShow:!1,teacherBeginAnswerTime:this.teacherBeginAnswerTime};P.default.sendSignallingAnswerToStudent(n)}},{key:"two_char",value:function(e){return e>=10?e:"0"+e}},{key:"time_fun",value:function(){var e=this;e.stop=setInterval(function(){e.numz=e.numz+1;var t=new Date(0,0);t.setSeconds(e.numz);var a=t.getHours(),n=t.getMinutes(),i=t.getSeconds(),r=e.two_char(a)+":"+e.two_char(n)+":"+e.two_char(i);e.setState({mytime:r})},1e3)}},{key:"_createHistogramFun",value:function(e){var t=this,a=this,n=[],i=[],r=e.length;n=e.map(function(e,n){return"A"===e.name?k.default.createElement("li",{key:n,style:r>4?{}:void 0},k.default.createElement("div",{className:"clidren-class-result-A"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayA),k.default.createElement("p",null,a.state.idA.length,T.default.language.languageData.answers.people.text)):"B"===e.name?k.default.createElement("li",{key:n,style:{}},k.default.createElement("div",{className:"clidren-class-result-B"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayB),k.default.createElement("p",null,a.state.idB.length,T.default.language.languageData.answers.people.text)):"C"===e.name?k.default.createElement("li",{key:n,style:{}},k.default.createElement("div",{className:"clidren-class-result-C"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayC),k.default.createElement("p",null,a.state.idC.length,T.default.language.languageData.answers.people.text)):"D"===e.name?k.default.createElement("li",{key:n,style:{}},k.default.createElement("div",{className:"clidren-class-result-D"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayD),k.default.createElement("p",null,a.state.idD.length,T.default.language.languageData.answers.people.text)):"E"===e.name?k.default.createElement("li",{key:n,style:{}},k.default.createElement("div",{className:"clidren-class-result-E"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayE),k.default.createElement("p",null,a.state.idE.length,T.default.language.languageData.answers.people.text)):"F"===e.name?k.default.createElement("li",{key:n,style:{}},k.default.createElement("div",{className:"clidren-class-result-F"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayF),k.default.createElement("p",null,a.state.idF.length,T.default.language.languageData.answers.people.text)):"G"===e.name?k.default.createElement("li",{key:n,style:{}},k.default.createElement("div",{className:"clidren-class-result-G"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayG),k.default.createElement("p",null,a.state.idG.length,T.default.language.languageData.answers.people.text)):"H"===e.name?k.default.createElement("li",{key:n,style:{}},k.default.createElement("div",{className:"clidren-class-result-H"}),k.default.createElement("div",{className:"histogram-bg"},t.state.afterArrayH),k.default.createElement("p",null,a.state.idH.length,T.default.language.languageData.answers.people.text)):void 0}),n.length>4?(i=n.splice(0,4),this.setState({resultsOptionsAD:i,resultsOptionsEG:n})):this.setState({resultsOptionsAD:n,resultsOptionsEG:[]})}},{key:"_loadTableDescArray",value:function(e){var t=[],a=[],n=void 0,i=(0,s.default)(new r.default(this.state.rightAnswers)),o=0,l=1;i=i.sort();for(var d in e){var u=d+"0",c=d+"1",h=d+"2",f=e[d][c].toString()===i.toString();o++,l++,e[d][c].forEach(function(e,t){n="A"===e?k.default.createElement("div",{className:"table-true-img "},"A"):"B"===e?k.default.createElement("div",{className:"table-true-img "},"B"):"C"===e?k.default.createElement("div",{className:"table-true-img "},"C"):"D"===e?k.default.createElement("div",{className:"table-true-img "},"D"):"E"===e?k.default.createElement("div",{className:"table-true-img "},"E"):"F"===e?k.default.createElement("div",{className:"table-true-img "},"F"):"G"===e?k.default.createElement("div",{className:"table-true-img "},"G"):k.default.createElement("div",{className:"table-true-img "},"H"),a.push(n)});var m=parseInt(e[d][h]/60)<10?"0"+parseInt(e[d][h]/60):parseInt(e[d][h]/60),g=parseInt(e[d][h]%60)<10?"0"+parseInt(e[d][h]%60):parseInt(e[d][h]%60),p=k.default.createElement("tr",{key:o},k.default.createElement("td",null,e[d][u]),k.default.createElement("td",null,k.default.createElement("span",{style:{color:"#913706"}},T.default.language.languageData.answers.selectedAnswer.text,":"),f?a:e[d][c]),k.default.createElement("td",null,T.default.language.languageData.answers.AnswerTime.text,"：",m,":",g)),v=k.default.createElement("tr",{key:l,style:{height:"phone"===T.default.mobileDeviceType?"0.12rem":"0.2rem"}});t.push(p),t.push(v)}return{afterArry:t}}},{key:"_clearTeacherShowData",value:function(){clearInterval(this.stop),this.numz=0,this.answerTrueNumber=0,this.setState({isHide:!1,allStudentChooseAnswer:{},publishedWarning:!1,tableObject:{},studentNumbers:[],studentsChooseAnswer:[],rightAnswers:[],initArr:[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],trueLV:0,allNumbers:0,idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[],mytime:"00:00:00",isRound:!1,isPublished:!1})}},{key:"xiangQingHandel",value:function(){this.isXiangQing=!this.isXiangQing,this.setState({publishedWarning:!1}),this.isXiangQing?this.setState({columnar:!1,tableStyle:!0,xiangQingText:!0}):this.setState({columnar:!0,tableStyle:!1,xiangQingText:!1})}},{key:"render",value:function(){var e=this.state,t=e.isRound,a=e.tableObject,n=e.publishAnswerText,i=this._loadTableDescArray(a),r=i.afterArry;return k.default.createElement("div",{className:"result-teach-wrapDiv",style:{display:this.state.isHide?"block":"none"},ref:"resultRef"},k.default.createElement("div",{className:"result-teach-content"},k.default.createElement("div",{className:"result-teach-header-div"},k.default.createElement("div",{className:"answersPeople-time-trueLV-div"},k.default.createElement("p",{className:"answersPeople"},T.default.language.languageData.answers.numberOfAnswer.text,":",k.default.createElement("span",null,this.state.allNumbers)),k.default.createElement("p",{className:"answer-use-time"},T.default.language.languageData.answers.AnswerTime.text,k.default.createElement("span",{id:"result-teach-mytime"},":",this.state.mytime)),k.default.createElement("div",{className:"result-teach-accuracy-right"},k.default.createElement("span",{className:"result-teach-accuracy-right-text"},T.default.language.languageData.answers.tureAccuracy.text,"："),k.default.createElement("span",{className:"correctRate",style:{color:"red"}},this.state.trueLV,"%"))),k.default.createElement("div",{className:"xiang-qing-div",onClick:this.xiangQingHandel.bind(this)},k.default.createElement("span",null,this.state.xiangQingText?T.default.language.languageData.answers.statistics.text:T.default.language.languageData.answers.details.text),k.default.createElement("span",{className:"xiang-qing-triangle"}))),k.default.createElement("div",{className:"result-teach-coordinate-div",style:{display:this.state.columnar?"block":"none"}},k.default.createElement("div",{className:"result-teach-staff-div"},k.default.createElement("ul",{className:"result-a-d",style:{width:0===this.state.resultsOptionsEG.length?"100%":"45%"}},this.state.resultsOptionsAD),0===this.state.resultsOptionsEG.length?void 0:k.default.createElement("ul",{className:"result-e-h"},this.state.resultsOptionsEG))),k.default.createElement("div",{className:"answer-table-div",style:{display:this.state.tableStyle?"block":"none"}},k.default.createElement("table",{className:"answer-table"},k.default.createElement("tbody",null,r))),k.default.createElement("div",{className:"result-teach-true-result"},k.default.createElement("div",{className:"true-answer-div"}," ",k.default.createElement("span",{className:"rightAnswer",style:{color:"#913706"}},T.default.language.languageData.answers.trueAnswer.text,":"),k.default.createElement("span",{className:"result-teach-trueSelect"},this.state.rightAnswers)),D.default.hasRole.roleStudent?k.default.createElement("div",{className:"true-answer-div"},k.default.createElement("span",{className:"myAnswer",style:{color:"#913706"}},T.default.language.languageData.answers.myAnswer.text,":"),k.default.createElement("span",{className:"result-teach-trueSelect"},this.state.studentsChooseAnswer)):void 0,D.default.hasRole.roleStudent?void 0:k.default.createElement("p",{className:"result-teach-published-warning",style:{display:this.state.publishedWarning?"block":"none"}},T.default.language.languageData.answers.end.text),D.default.hasRole.roleStudent?void 0:k.default.createElement("span",{className:"publish-the-answer",onClick:this.publishAnswerHandel.bind(this),style:{display:D.default.joinRoomInfo&&D.default.joinRoomInfo.isShowTheAnswer?"block":"none"}},T.default.language.languageData.answers[n].text),D.default.hasRole.roleStudent?void 0:k.default.createElement("div",{className:"result-teach-end-restart",onClick:this.endOrRestartHandel.bind(this)},t?T.default.language.languageData.answers.restarting.text:T.default.language.languageData.answers.endAnswer.text))))}}]),t}(k.default.Component));t.default=N},V2W7:function(e,t,a){var n=a("ZVlJ"),i=a("biYF")("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||r[i]===e)}},V7Pz:function(e,t,a){var n=a("FITv");n(n.P+n.R,"Set",{toJSON:a("Oyrx")("Set")})},VSuD:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HzJ8"),r=n(i),o=a("8zml"),s=n(o),l=a("DrPG"),d=n(l),u=a("T+56"),c=n(u),h=a("HUPQ"),f=n(h),m=a("yE5a"),g=n(m),p={},v="v2.1.7",b="2018031000",S=!1;try{v="2.1.6",b=2018011516,S=!1}catch(a){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}p.VERSIONS=v,p.VERSIONSTIME=b,p.newpptVersions=2017091401,p.remoteNewpptUpdateTime=2018032113,p.debugFromAddress=!!d.default.getUrlParams("debug")&&""!=d.default.getUrlParams("debug"),p.DEV=S||p.debugFromAddress,p.role={},(0,s.default)(p.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},rolePlayback:{value:-1,writable:!1}});var y={};(0,s.default)(y,{roomConnected:{value:"room-connected",writable:!1,enumerable:!0},roomParticipantJoin:{value:"room-participant_join",writable:!1,enumerable:!0},roomParticipantLeave:{value:"room-participant_leave",writable:!1,enumerable:!0},roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomUserpropertyChanged:{value:"room-userproperty-changed",writable:!1,enumerable:!0},roomDisconnected:{value:"room-disconnected",writable:!1,enumerable:!0},roomPlaybackDuration:{value:"room-playback-duration",writable:!1,enumerable:!0},roomPlaybackPlaybackEnd:{value:"room-playback-playbackEnd",writable:!1,enumerable:!0},roomPlaybackPlaybackUpdatetime:{value:"room-playback-playback_updatetime",writable:!1,enumerable:!0},roomPlaybackClearAll:{value:"room-playback-clear_all",writable:!1,enumerable:!0},roomPlaybackClearAllFromPlaybackController:{value:"room-playback-clear_all-from-playback-controller",writable:!1,enumerable:!0},roomServeraddressUpdate:{value:"room-serveraddress-update",writable:!1,enumerable:!0},roomUpdateFakeJsSdkInitInfo:{value:"room-updateFakeJsSdkInitInfo",writable:!1,enumerable:!0},roomReceiveActionCommand:{value:"room-receiveActionCommand",writable:!1,enumerable:!0},roomCheckroom:{value:"room-checkroom",writable:!1,enumerable:!0},roomCheckroomPlayback:{value:"room-checkroom-playback",writable:!1,enumerable:!0},roomAudiovideostateSwitched:{value:"room-audiovideostate-switched",writable:!1,enumerable:!0},roomModeChanged:{value:"room-mode-changed",writable:!1,enumerable:!0}});var k={};(0,s.default)(k,{onResize:{value:"onResize",writable:!1}}),(0,s.default)(k,{onMessage:{value:"onMessage",writable:!1}});var w={};(0,s.default)(w,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}}),p.EVENTTYPE={},(0,s.default)(p.EVENTTYPE,{RoomEvent:{value:y,writable:!1},WindowEvent:{value:k,writable:!1},DocumentEvent:{value:w,writable:!1}}),p.ROOMTYPE={},(0,s.default)(p.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),p.PUBLISHSTATE={},(0,s.default)(p.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),p.STANDARDSIZE=15.8,p.companyidToCompanyName={10035:{value:"icoachu",writable:!1,enumerable:!0},10036:{value:"stupidBird",writable:!1,enumerable:!0},10059:{value:"17zuoye",writable:!1,enumerable:!0}},p.LOGLEVEL={},(0,s.default)(p.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),p.SERVICEINFO={},p.bindServiceinfoToTkConstant=function(e,t,a,n,i,r,o,s){var l={protocol:e,hostname:t,port:a,sdkPort:443,protocolAndHostname:e+"://"+t,address:e+"://"+t+":"+a,docHostname:n,docPort:i,docAddress:e+"://"+n+":"+i,httpDocAddress:"http://"+n+":80",backupDocHostname:r,backupDocPort:o,backupDocAddress:e+"://"+r+":"+o};if(s&&(l.joinUrl=d.default.encrypt(window.location.href)),Object.customAssign(p.SERVICEINFO,l),f.default.docAddressList[0]=p.SERVICEINFO.docAddress,f.default.docAddressList[1]=p.SERVICEINFO.backupDocAddress,!f.default.isGetDocAddressIndexByLocalStorageItem)if("mobile"===TK.SDKTYPE)try{g.default&&g.default.getTkRoom()&&"function"==typeof g.default.getTkRoom().getLocalStorageItem&&g.default.getTkRoom().getLocalStorageItem("tkDocAddressIndex",function(e){f.default.isGetDocAddressIndexByLocalStorageItem=!0,e&&"number"==typeof Number(e)&&Number(e)&&e!==f.default.docAddressIndex&&(f.default.docAddressIndex=Number(e)%f.default.docAddressList.length,f.default.nowUseDocAddress=f.default.docAddressList[f.default.docAddressIndex]||p.SERVICEINFO.docAddress)})}catch(e){L.Logger.error("getLocalStorageItem error:",e)}else{var u=L.Utils.localStorage.getItem("tkDocAddressIndex");u&&"number"==typeof Number(u)&&Number(u)&&u!==f.default.docAddressIndex&&(f.default.docAddressIndex=Number(u)%f.default.docAddressList.length,f.default.nowUseDocAddress=f.default.docAddressList[f.default.docAddressIndex]||p.SERVICEINFO.docAddress),f.default.isGetDocAddressIndexByLocalStorageItem=!0}f.default.docAddressIndex=f.default.docAddressIndex%f.default.docAddressList.length,f.default.nowUseDocAddress=f.default.docAddressList[f.default.docAddressIndex]||p.SERVICEINFO.docAddress,s&&console.info("encrypt_tk_info:\n",p.SERVICEINFO.joinUrl),c.default&&c.default.CoreController&&c.default.CoreController.dispatchEvent&&c.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:p.SERVICEINFO}}),f.default.handlerRoomServeraddressUpdateIsInit=!1},p.joinRoomInfo={},p.bindRoomInfoToTkConstant=function(e){if(!e)return void L.Logger.error("joinRoomInfo is not exist!");L.Logger.debug("joinRoomInfo:",e),p.joinRoomInfo=e,c.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:p.joinRoomInfo}})},p.hasRole={},p.bindParticipantHasRoleToTkConstant=function(){if(!p.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,s.default)(p.hasRole,{roleChairman:{value:p.joinRoomInfo&&p.joinRoomInfo.roomrole===p.role.roleChairman,writable:!1},roleTeachingAssistant:{value:p.joinRoomInfo&&p.joinRoomInfo.roomrole===p.role.roleTeachingAssistant,writable:!1},roleStudent:{value:p.joinRoomInfo&&p.joinRoomInfo.roomrole===p.role.roleStudent,writable:!1},roleAudit:{value:p.joinRoomInfo&&p.joinRoomInfo.roomrole===p.role.roleAudit,writable:!1},rolePatrol:{value:p.joinRoomInfo&&p.joinRoomInfo.roomrole===p.role.rolePatrol,writable:!1},rolePlayback:{value:p.joinRoomInfo&&p.joinRoomInfo.roomrole===p.role.rolePlayback,writable:!1}}),c.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:p.hasRole}})},p.hasRoomtype={},p.bindParticipantHasRoomtypeToTkConstant=function(){if(!p.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,s.default)(p.hasRoomtype,{oneToOne:{value:p.joinRoomInfo&&p.joinRoomInfo.roomtype===p.ROOMTYPE.oneToOne,writable:!1}}),c.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:p.hasRoomtype}})};var T=function(){switch(p.skin){case"skin_black":if(document.getElementById("skinContainer")&&!/blackSkin.css/.test(document.getElementById("skinContainer").href))try{document.head.removeChild(document.getElementById("skinContainer"))}catch(e){L.Logger.error(e)}else document.getElementById("skinContainer")||$(document.head).append('<link id="skinContainer" rel="stylesheet" href="./cssTemplate/blackSkin.css"/>');break;case"skin_origin":if(document.getElementById("skinContainer")&&!/originalBlackSkin.css/.test(document.getElementById("skinContainer").href))try{document.head.removeChild(document.getElementById("skinContainer"))}catch(e){L.Logger.error(e)}else document.getElementById("skinContainer")||$(document.head).append('<link id="skinContainer" rel="stylesheet" href="./cssTemplate/originalBlackSkin.css"/>')}},C=["template_default","template_classic"],D=d.default.getUrlParams("tplId");if(D){D="template_"+D;var A=!0,E=!1,I=void 0;try{for(var P,R=(0,r.default)(C);!(A=(P=R.next()).done);A=!0)D===P.value&&(p.template=D)}catch(a){E=!0,I=a}finally{try{!A&&R.return&&R.return()}finally{if(E)throw I}}}p.template=p.template||"template_default",p.updateTemplate=function(e){var t=p.template,a=!0,n=!1,i=void 0;try{for(var o,s=(0,r.default)(C);!(a=(o=s.next()).done);a=!0)e===o.value&&(p.template=e)}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}var l=!0,d=!1,u=void 0;try{for(var h,m=(0,r.default)(C);!(l=(h=m.next()).done);l=!0){var g=h.value;$(document.body).removeClass(g)}}catch(e){d=!0,u=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw u}}$(document.body).removeClass(t+" "+p.template+" "+(f.default.isClient?"clientApp":"webpageApp")).addClass(p.template+" "+(f.default.isClient?"clientApp":"webpageApp")).attr("tkcustomdatatemplate",p.template),c.default.CoreController.dispatchEvent({type:"updateTemplate",message:{template:p.template}})};var B=d.default.getUrlParams("skinId");B&&(p.skin="skin_"+B),p.skin=p.skin||"skin_default",p.updateSkin=function(e){var t=p.skin;p.skin=e,T(),$(document.body).removeClass(t+" "+p.skin+" ").addClass(p.skin+" ").attr("tkcustomdataskin",p.skin),c.default.CoreController.dispatchEvent({type:"updateSkin",message:{skin:p.skin}})},window.TkConstant=p,t.default=p},WQ47:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},WcKi:function(e,t){},Wi6Q:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("ZLEe"),r=n(i),o=a("HzJ8"),s=n(o),l=a("AA3o"),d=n(l),u=a("xSur"),c=n(u),h=a("VSuD"),f=n(h),m=a("yE5a"),g=(n(m),a("0jvK")),p=n(g),v=a("T+56"),b=(n(v),a("HUPQ")),S=n(b),y=a("Sa83"),k=(n(y),function(){function e(t){(0,d.default)(this,e),this.role=t}return(0,c.default)(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||p.default.productionDefaultAppAppPermissions();if(f.default.joinRoomInfo&&void 0!=f.default.joinRoomInfo.roomrole)switch(f.default.joinRoomInfo.roomrole){case f.default.role.roleChairman:if(S.default.classBegin){var a=!0,n=!1,i=void 0;try{for(var o,l=(0,s.default)((0,r.default)(t));!(a=(o=l.next()).done);a=!0)t[o.value]=!0}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}Object.customAssign(t,{raisehand:!1,dialCircleClick:!1,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks})}else Object.customAssign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0,endClassbeginRevertToStartupLayout:!0,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks,sendSignallingFromRemoteControl:!0});break;case f.default.role.roleTeachingAssistant:if(S.default.classBegin){var d=!0,u=!1,c=void 0;try{for(var h,m=(0,s.default)((0,r.default)(t));!(d=(h=m.next()).done);d=!0)t[h.value]=!0}catch(e){u=!0,c=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw c}}Object.customAssign(t,{laser:!1,endClassbeginRevertToStartupLayout:!1,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks})}else Object.customAssign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:f.default.joinRoomInfo.isClassOverNotLeave,h5DocumentActionClick:!0,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks,sendSignallingFromRemoteControl:!0});break;case f.default.role.rolePatrol:S.default.classBegin?Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,getQuestionCount:!0}):Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,endClassbeginRevertToStartupLayout:f.default.joinRoomInfo.isClassOverNotLeave});break;case f.default.role.roleStudent:S.default.classBegin?Object.customAssign(t,{whiteboardPagingPage:f.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:f.default.joinRoomInfo.isSupportPageTrun,jumpPage:f.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromSharpsChange:!0,sendSignallingFromRemoteControl:!0,answerCommit:!0}):Object.customAssign(t,{whiteboardPagingPage:f.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:f.default.joinRoomInfo.isSupportPageTrun,jumpPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentActionClick:f.default.joinRoomInfo.isSupportPageTrun,dynamicPptActionClick:f.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:f.default.joinRoomInfo.isClassOverNotLeave,sendSignallingFromRemoteControl:!0});break;case f.default.role.rolePlayback:S.default.classBegin,Object.customAssign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1,sendSignallingFromRemoteControl:!0});break;case f.default.role.roleAudit:var g=!0,v=!1,b=void 0;try{for(var y,k=(0,s.default)((0,r.default)(t));!(g=(y=k.next()).done);g=!0)t[y.value]=!1}catch(e){v=!0,b=e}finally{try{!g&&k.return&&k.return()}finally{if(v)throw b}}Object.customAssign(t,{pubMsg:!0,sendSignallingDataToParticipant:!0})}return t}},{key:"addEventListenerToRoomHandler",value:function(){}}]),e}()),w=new k;w.addEventListenerToRoomHandler(),t.default=w},X1IT:function(e,t,a){e.exports={default:a("BSn2"),__esModule:!0}},XEbU:function(e,t,a){a("NWpI"),e.exports=a("AKd3").Object.values},XkXc:function(e,t){},YRCL:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),r=n(i),o=a("hRKE"),s=n(o),l=a("Yarq"),d=n(l),u=a("AA3o"),c=n(u),h=a("xSur"),f=n(h),m=a("UzKs"),g=n(m),p=a("Y7Ml"),v=n(p),b=a("Ovlj"),S=n(b),y=a("yE5a"),k=n(y),w=a("DrPG"),T=(n(w),a("VSuD")),C=n(T),D=a("HUPQ"),A=n(D),E=a("Sa83"),I=n(E),P=function(e){function t(){return(0,c.default)(this,t),(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"sendSignallingFromUpdateTime",value:function(e){if(I.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=this,a=e||"__all",n={};t.sendSignallingDataToParticipant(!1,"UpdateTime","UpdateTime",a,n,!0)}}},{key:"sendSignallingFromSharpsChange",value:function(e,t,a,n,i,r,o,s,l){if(I.default.handler.getAppPermissions("sendSignallingFromSharpsChange")){var d=this;e&&(r=!0),d.sendSignallingDataToParticipant(e,t,a,n,i,r,o,s,l)}}},{key:"sendSignallingFromWBPageCount",value:function(e){I.default.handler.getAppPermissions("sendSignallingFromWBPageCount")&&this.sendSignallingDataToParticipant(!1,"WBPageCount","WBPageCount","__allExceptSender",e,void 0)}},{key:"sendSignallingFromShowPage",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"__all";if(I.default.handler.getAppPermissions("sendSignallingFromShowPage")){if(!a)return void L.Logger.error("sendSignallingFromShowPage data is not exist!");a&&"string"==typeof a&&(a=JSON.parse(a)),a.isDynamicPPT&&!I.default.handler.getAppPermissions("sendSignallingFromDynamicPptShowPage")||a.isH5Document&&!I.default.handler.getAppPermissions("sendSignallingFromH5ShowPage")||a.isGeneralFile&&!I.default.handler.getAppPermissions("sendSignallingFromGeneralShowPage")||this.sendSignallingDataToParticipant(e,"ShowPage",t,n,a)}}},{key:"sendSignallingFromDynamicPptTriggerActionClick",value:function(e){I.default.handler.getAppPermissions("sendSignallingFromDynamicPptTriggerActionClick")&&this.sendSignallingDataToParticipant(!1,"NewPptTriggerActionClick","NewPptTriggerActionClick","__allExceptSender",e,!1)}},{key:"sendSignallingFromPptVolumeControl",value:function(e){I.default.handler.getAppPermissions("sendSignallingFromPptVolumeControl")&&this.sendSignallingDataToParticipant(!1,"PptVolumeControl","PptVolumeControl","__allExceptSender",e,!1)}},{key:"sendSignallingFromH5DocumentAction",value:function(e){I.default.handler.getAppPermissions("sendSignallingFromH5DocumentAction")&&this.sendSignallingDataToParticipant(!1,"H5DocumentAction","H5DocumentAction","__allExceptSender",e,!1)}},{key:"sendSignallingFromVideoDraghandle",value:function(e,t){if(I.default.handler.getAppPermissions("sendSignallingFromVideoDraghandle")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"videoDraghandle","videoDraghandle",t,e,!1)}}},{key:"sendSignallingFromCaptureImg",value:function(e,t,a){if(I.default.handler.getAppPermissions("isSendSignallingFromCaptureImg")){var n=this;a=a||!1,n.sendSignallingDataToParticipant(a,"CaptureImg",e,"__all",t,!1)}}},{key:"sendSignallingFromCaptureImgDrag",value:function(e,t,a){I.default.handler.getAppPermissions("isSendSignallingFromCaptureImgDrag")&&this.sendSignallingDataToParticipant(!1,"CaptureImgDrag",t,"__allExceptSender",e,!1,void 0,a)}},{key:"sendSignallingFromCaptureImgResize",value:function(e,t,a){I.default.handler.getAppPermissions("isSendCaptureImgResize")&&this.sendSignallingDataToParticipant(!1,"CaptureImgResize",t,"__allExceptSender",e,!1,void 0,a)}},{key:"sendMarkToolMouseIsSelect",value:function(e,t,a){if(I.default.handler.getAppPermissions("sendWhiteboardMarkTool")){var n=this,i={selectMouse:e};t&&(i.selectElementLiId=t),a&&(i.selectElementId=a),n.sendSignallingDataToParticipant(!1,"whiteboardMarkTool","whiteboardMarkTool","__allExceptSender",i)}}},{key:"sendSignallingFromBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I.default.handler.getAppPermissions("sendSignallingFromBlackBoard")&&this.sendSignallingDataToParticipant(t,"BlackBoard","BlackBoard","__all",e)}},{key:"sendSignallingTimerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!I.default.handler.getAppPermissions("sendSignallingTimerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"timer","timerMesg","__all",e)}},{key:"sendSignallingFromBlackBoardDrag",value:function(e,t){if(I.default.handler.getAppPermissions("sendSignallingFromBlackBoardDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"BlackBoardDrag","BlackBoardDrag",t,e,!1,void 0,"BlackBoard_new")}}},{key:"sendSignallingDialToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I.default.handler.getAppPermissions("sendSignallingDialToStudent")&&this.sendSignallingDataToParticipant(t,"dial","dialMesg","__all",e)}},{key:"sendSignallingAnswerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!I.default.handler.getAppPermissions("sendSignallingAnswerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"answer","answerMesg","__all",e)}},{key:"sendSignallingDataStudentToTeacherAnswer",value:function(e,t){if(!I.default.handler.getAppPermissions("sendSignallingDataStudentToTeacherAnswer"))return!1;var a=this,n="submitAnswers_"+k.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"submitAnswers",n,"__all",t,void 0,void 0,"answerMesg")}},{key:"sendSignallingQiangDaQi",value:function(e,t){if(!I.default.handler.getAppPermissions("sendSignallingQiangDaQi"))return!1;this.sendSignallingDataToParticipant(e,"qiangDaQi","qiangDaQiMesg","__all",t)}},{key:"sendSignallingQiangDaZhe",value:function(e,t){if(!I.default.handler.getAppPermissions("sendSignallingQiangDaZhe"))return!1;var a=this,n="QiangDaZhe_"+k.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"QiangDaZhe",n,"__all",t,void 0,void 0,"qiangDaQiMesg")}},{key:"sendSignallingFromDialDrag",value:function(e,t){if(I.default.handler.getAppPermissions("sendSignallingFromDialDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"DialDrag","DialDrag",t,e,!1,void 0,"dialMesg")}}},{key:"sendSignallingFromResponderDrag",value:function(e,t){if(I.default.handler.getAppPermissions("isSendSignallingFromResponderDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"ResponderDrag","ResponderDrag",t,e,!1,void 0,"qiangDaQiMesg")}}},{key:"sendSignallingFromTimerDrag",value:function(e,t){if(I.default.handler.getAppPermissions("isSendSignallingFromTimerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"TimerDrag","TimerDrag",t,e,!1,void 0,"timerMesg")}}},{key:"sendSignallingFromAnswerDrag",value:function(e,t){if(I.default.handler.getAppPermissions("isSendSignallingFromAnswerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"AnswerDrag","AnswerDrag",t,e,!1,void 0,"answerMesg")}}},{key:"sendSignallingFromRemoteControl",value:function(e,t){if(I.default.handler.getAppPermissions("sendSignallingFromRemoteControl")){var a=e||"__all";this.sendSignallingDataToParticipant(!1,"RemoteControl","RemoteControl",a,t,!0)}}},{key:"sendSignallingFromMoreUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.sendSignallingDataToParticipant(t,"MoreUsers","MoreUsers","__all",e)}},{key:"sendSignallingFromNewBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I.default.handler.getAppPermissions("sendSignallingFromBlackBoard")&&this.sendSignallingDataToParticipant(t,"BlackBoard_new","BlackBoard_new","__all",e)}},{key:"sendSignallingFromUserHasNewBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,n="_"+e.id,i=e.id;a.sendSignallingDataToParticipant(t,"UserHasNewBlackBoard",n,"__all",e,!1,void 0,"BlackBoard_new",i)}},{key:"sendQuestion",value:function(e,t){if(I.default.handler.getAppPermissions("sendQuestion")){var a="Question_"+C.default.joinRoomInfo.serial;if("start"===t.action&&(t.quesID="ques_"+(new Date).getTime()),A.default.appConnected){t&&"object"===(void 0===t?"undefined":(0,s.default)(t))&&!Array.isArray(t)&&(t=(0,r.default)(t));var n={msgName:"Question",msgId:a,toID:"__all",data:t,save:!0,write2DB:!0};e?k.default.getTkRoom().delMsg({name:"Question",id:a,toID:"__all",data:t}):k.default.getTkRoom().pubMsg(n)}}}},{key:"publishResult",value:function(e,t){I.default.handler.getAppPermissions("publishResult")&&(t=t||!1,this.sendSignallingDataToParticipant(t,"PublishResult","PublishResult","__all",e))}},{key:"answerCommit",value:function(e){if(I.default.handler.getAppPermissions("answerCommit")){var t="Question_"+C.default.joinRoomInfo.serial,a=e,n=a.actions,i=a.modify;if(A.default.appConnected){e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&!Array.isArray(e)&&(e=(0,r.default)(e));var o={msgName:"AnswerCommit",msgId:t,toId:"__none",data:e,save:!1,associatedMsgID:"Question",type:"count",write2DB:!0,actions:n,modify:i};k.default.getTkRoom().pubMsg(o)}}}},{key:"getQuestionCount",value:function(e){if(I.default.handler.getAppPermissions("getQuestionCount")){var t="Question_"+C.default.joinRoomInfo.serial,a=k.default.getTkRoom().getMySelf().id;if(A.default.appConnected){e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&!Array.isArray(e)&&(e=(0,r.default)(e));var n={msgName:"GetQuestionCount",msgId:t,toId:a,data:e,save:!1,associatedMsgID:"Question",type:"getCount"};k.default.getTkRoom().pubMsg(n)}}}}]),t}(S.default),R=new P;t.default=R},YW8S:function(e,t,a){var n=a("adiS"),i=a("biYF")("iterator"),r=a("ZVlJ");e.exports=a("AKd3").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||r[n(e)]}},Yarq:function(e,t,a){e.exports={default:a("my5g"),__esModule:!0}},Z5jD:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("NUMX"),r=n(i),o=a("Yarq"),s=n(o),l=a("AA3o"),d=n(l),u=a("xSur"),c=n(u),h=a("UzKs"),f=n(h),m=a("Y7Ml"),g=n(m),p=a("RFtt"),v=n(p),b=a("Q/yb"),S=(n(b),a("HUPQ")),y=n(S),k=a("VSuD"),w=n(k),T=a("DrPG"),C=n(T),D=a("T+56"),A=n(D),E=a("Sa83"),I=(n(E),a("yE5a")),P=n(I),R=a("YRCL"),B=n(R),_=a("EXAz"),x=n(_),N=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.props.id,a.state={timeDescArray:[0,5,0,0],triangleStyle:"visible",againBtnStyle:!1,startBtnStyle:!0,numContentBorder:!1,timerIsShow:!1,restarting:!1,startAndStop:!1,startAndStopImg:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1,resizeInfo:{width:0,height:0},playBackServerTime:0},a.servicerTimes=0,a.isSetDefaultPosition=!1,a.stop=null,a.startTime=0,a.endTime=0,a.timerBeginTsValue=0,a.speedOrBack=!1,a.initTimerValue=[],a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener("receive-msglist-timer",e.handlerMsglistTimerShow.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,e.handlerRoomPlaybackPlaybackEnd.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,e.handlerRoomPlaybackPlaybackUpdatetime.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,e.handlerRoomPlaybackDuration.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;A.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){if(t.timerIsShow!==this.state.timerIsShow&&this.state.timerIsShow){var a=this.props.id,n=document.getElementById(a);if(n){var i=y.default.windowInnerWidth/w.default.STANDARDSIZE;this.state.resizeInfo.width=n.offsetWidth/i*1.5,this.state.resizeInfo.height=n.offsetHeight/i*1.5,this.setState({resizeInfo:this.state.resizeInfo})}this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition())}var o=(t.playBackServerTime/1e3).toFixed(0),s=(this.state.playBackServerTime/1e3).toFixed(0);if(t.playBackServerTime&&this.state.playBackServerTime&&Math.abs(s-o)>1&&this.timerBeginTsValue){var l=this._timeDifferenceToFormat(this.startTime,this.state.playBackServerTime),d=this._timeDifferenceToFormat(this.startTime,this.timerBeginTsValue),u=(0,r.default)(this.initTimerValue),c=u.slice(0);if(l<=d)clearInterval(this.stop),this.stop=setInterval(this.timeReduce.bind(this),1e3),this.state.timeDescArray=this.initTimerValue,this.setState({timeDescArray:this.state.timeDescArray});else{var h=600*c[0]+60*c[1]+10*c[2]+1*c[3],f=h-l+d;if(f<0)clearInterval(this.stop);else{clearInterval(this.stop),this.stop=setInterval(this.timeReduce.bind(this),1e3);var m=parseInt(f/60)<10?"0"+parseInt(f/60):parseInt(f/60),g=parseInt(f%60)<10?"0"+parseInt(f%60):parseInt(f%60),p=[parseInt(m/10),parseInt(m%10),parseInt(g/10),parseInt(g%10)];this.setState({timeDescArray:p})}}}}},{key:"handlerRoomDisconnected",value:function(){clearInterval(this.stop),this.setState({timerIsShow:!1,startAndStopImg:!1,timeDescArray:[0,5,0,0],stopUnClickableStyle:!1})}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);if(n&&i){var r=(i.offsetWidth-n.offsetWidth)/2;a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{left:r,top:0,percentLeft:.5,percentTop:0,isDrag:!1},!0)}}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){var e=this;clearInterval(e.stop)}},{key:"handlerRoomPlaybackDuration",value:function(e){var t=this,a=e.message,n=a.startTime,i=a.endTime;t.startTime=n,t.endTime=i}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=Number(e.message.current.toFixed(0));this.setState({playBackServerTime:t})}},{key:"_timeDifferenceToFormat",value:function(e,t){if(0!==t){var a=C.default.getTimeDifferenceToFormat(e,t),n=void 0;if(a){var i=a.hh,r=a.mm,o=a.ss;n=Number(o)+60*r+360*i}return n}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"timer":w.default.hasRole.roleStudent?t.handelTmerShowStudent(a):t.handleTimerShow(a);break;case"UpdateTime":this.servicerTimes=a.ts}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":t.setState({timerIsShow:!1});break;case"timer":clearInterval(t.stop),t.setState({timerIsShow:!1,startAndStopImg:!1,timeDescArray:[0,5,0,0],stopUnClickableStyle:!1})}}},{key:"handlerMsglistTimerShow",value:function(e){var t=this,a=e.message.timerShowArr[0];w.default.hasRole.roleStudent?t.handelTmerShowStudent(a):t.handleTimerShow(a)}},{key:"handelTmerShowStudent",value:function(e){if(e.data.isShow)return!1;var t=this;t.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,triangleStyle:"hidden"});var a=y.default.serviceTime/1e3-e.ts,n=600*t.state.timeDescArray[0]+60*t.state.timeDescArray[1]+10*t.state.timeDescArray[2]+1*t.state.timeDescArray[3],i=n-a-2;if(e.data.isStatus)if(clearInterval(t.stop),t.setState({startAndStopImg:!1,numContentBorder:!1}),t.stop=setInterval(t.timeReduce.bind(t),1e3),i>0){i>n&&(i=n);var r=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),o=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60),s=[parseInt(r/10),parseInt(r%10),parseInt(o/10),parseInt(o%10)];t.setState({timeDescArray:s})}else clearInterval(t.stop),t.setState({timeDescArray:[0,0,0,0],numContentBorder:!0,startAndStopImg:!0});else t.setState({timeDescArray:e.data.sutdentTimerArry,startAndStopImg:!0,numContentBorder:!1}),clearInterval(t.stop)}},{key:"handleTimerShow",value:function(e){var t=this,a=void 0,n=void 0;t.setState({timeDescArray:e.data.sutdentTimerArry}),this.isSetDefaultPosition=!0;var i=600*e.data.sutdentTimerArry[0]+60*e.data.sutdentTimerArry[1]+10*e.data.sutdentTimerArry[2]+1*e.data.sutdentTimerArry[3];y.default.playback?(clearInterval(t.stop),n=i):(a=y.default.serviceTime/1e3-e.ts,n=i-a),setTimeout(function(){if(e.data.isShow)t.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,againUnClickableStyle:!0,startBtnStyle:!0,startAndStopImg:!1,againBtnStyle:!1,numContentBorder:!1,triangleStyle:"visible"});else if(e.data.isStatus){var a=(0,r.default)(e.data.sutdentTimerArry),o=a.slice(0);if(t.initTimerValue=o,t.timerBeginTsValue=e.ts,clearInterval(t.stop),t.setState({startAndStopImg:!0,timerIsShow:!0,startBtnStyle:!1,numContentBorder:!1,againBtnStyle:!0,triangleStyle:"hidden",againUnClickableStyle:!1,playBackServerTime:!1}),t.stop=setInterval(t.timeReduce.bind(t),1e3),n>0){n>i&&(n=i);var s=parseInt(n/60)<10?"0"+parseInt(n/60):parseInt(n/60),l=parseInt(n%60)<10?"0"+parseInt(n%60):parseInt(n%60),d=[parseInt(s/10),parseInt(s%10),parseInt(l/10),parseInt(l%10)];t.setState({timeDescArray:d})}else clearInterval(t.stop),t.playAudioToAudiooutput("ring_audio",!1),t.setState({timeDescArray:[0,0,0,0],numContentBorder:!0,startAndStopImg:!0,stopUnClickableStyle:!0})}else e.data.isRestart?(clearInterval(t.stop),t.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,numContentBorder:!1,startAndStopImg:!1,startBtnStyle:!0,againBtnStyle:!1,triangleStyle:"visible",startAndStop:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1})):(t.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,numContentBorder:!1,startAndStopImg:!1,startBtnStyle:!0,againBtnStyle:!0,triangleStyle:"hidden",startAndStop:!1,againUnClickableStyle:!1}),clearInterval(t.stop))},10)}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!y.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this.setState({timeDescArray:[0,5,0,0],triangleStyle:"visible",againBtnStyle:!1,startBtnStyle:!0,numContentBorder:!1,timerIsShow:!1,restarting:!1,startAndStop:!1,startAndStopImg:!1,isShow:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1}),this.stop=null}},{key:"_loadTimeDescArray",value:function(e){var t=this,a=[],n=[];return e.forEach(function(e,i){var r=v.default.createElement("div",{className:"timer-teachTool-num-div",key:i},v.default.createElement("div",{className:"timer-teachTool-triangle-top",style:{visibility:t.state.triangleStyle},onClick:t.AddHandel.bind(t,i)}),v.default.createElement("div",{className:"timer-teacher-num-content"+(t.state.numContentBorder?" timer-font-style-red":" timer-font-style-default")},e),v.default.createElement("div",{className:"timer-teachTool-triangle-down",style:{visibility:t.state.triangleStyle},onClick:t.ReduceHandel.bind(t,i)}));i>1?n.push(r):a.push(r)}),{afterArray:n,beforeArray:a}}},{key:"AddHandel",value:function(e,t){(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant)&&(0===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[0]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[0]=t.target.nextSibling.textContent)),1===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[1]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[1]=t.target.nextSibling.textContent)),2===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[2]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>5&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[2]=t.target.nextSibling.textContent)),3===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[3]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[3]=t.target.nextSibling.textContent=0)),this.setState({timeDescArray:this.state.timeDescArray}))}},{key:"ReduceHandel",value:function(e,t){(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant)&&(0===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[0]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[0]=t.target.previousSibling.textContent)),1===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[1]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[1]=t.target.previousSibling.textContent)),2===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[2]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=5,this.state.timeDescArray[2]=t.target.previousSibling.textContent)),3===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[3]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[3]=t.target.previousSibling.textContent)),this.setState({timeDescArray:this.state.timeDescArray}))}},{key:"timeReduce",value:function(){var e=this;e.state.timeDescArray[3]--,e.state.timeDescArray[3]<0&&(e.state.timeDescArray[3]=9,e.state.timeDescArray[2]--),e.state.timeDescArray[2]<0&&(e.state.timeDescArray[2]=5,e.state.timeDescArray[1]--),e.state.timeDescArray[1]<0&&(e.state.timeDescArray[1]=9,e.state.timeDescArray[0]--),e.state.timeDescArray[0]<0&&(e.state.timeDescArray=[0,0,0,0],e.state.numContentBorder=!0,clearInterval(e.stop),e.playAudioToAudiooutput("ring_audio",!0)),0===e.state.timeDescArray[0]&&0===e.state.timeDescArray[1]&&0===e.state.timeDescArray[2]&&0===e.state.timeDescArray[3]&&(e.state.timeDescArray=[0,0,0,0],e.playAudioToAudiooutput("ring_audio",!0),e.state.numContentBorder=!0,clearInterval(e.stop)),e.setState({timeDescArray:e.state.timeDescArray,numContentBorder:e.state.numContentBorder})}},{key:"startBtnHandel",value:function(e){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){if(this.state.stopUnClickableStyle)return;clearInterval(this.stop);var t={isStatus:!0,sutdentTimerArry:this.state.timeDescArray,isShow:!1,isRestart:!1};B.default.sendSignallingTimerToStudent(t)}}},{key:"stopBtnHandel",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){if(this.state.stopUnClickableStyle)return;clearInterval(this.stop);var e={isStatus:!1,sutdentTimerArry:this.state.timeDescArray,isShow:!1,isRestart:!1};B.default.sendSignallingTimerToStudent(e)}}},{key:"againBtnHandel",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){clearInterval(this.stop);var e={isStatus:!1,sutdentTimerArry:[0,5,0,0],isShow:!1,isRestart:!0};B.default.sendSignallingTimerToStudent(e)}}},{key:"timerCloseHandel",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){clearInterval(this.stop);var e={};B.default.sendSignallingTimerToStudent(e,!0)}}},{key:"playAudioToAudiooutput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ring_audio",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("mobile"===TK.SDKTYPE){var a=document.getElementById("ring_audio");L.Utils.mediaPlay(a)}else if(TK.isTkNative&&TK.subscribe_from_native){var n=y.default.projectPublishDirAddress+"music/timer_default.wav",i=t?"play":"destroy",r={localMediaFile:"timer_default.wav"};P.default.getTkRoom().clientAudioMediaPlayer(n,i,r)}else{var o=$("#"+e);o&&o.length>0&&(t?L.Utils.mediaPlay(o[0]):L.Utils.mediaPause(o[0]))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.timeDescArray,n=t.resizeInfo,i=this._loadTimeDescArray(a),r=i.afterArray,o=i.beforeArray,s=e.props,l=s.id,d=s.draggableData,u=s.timerDrag,c=Object.customAssign({id:l,size:n,percentPosition:{percentLeft:u.percentLeft,percentTop:u.percentTop}},d);return v.default.createElement(x.default,c,v.default.createElement("div",{id:l,className:(w.default.hasRole.roleStudent?"timer-sutdentTool-wraps":"timer-teachTool-wrap")+" touch-select-select",style:{display:this.state.timerIsShow?"block":"none"},ref:"timerTeachToolWrap"},v.default.createElement("div",{className:"timer-teachTool-header"+(w.default.hasRole.roleStudent?" timer-studentTool-header":"")},v.default.createElement("span",null),v.default.createElement("span",null,y.default.language.languageData.timers.timerSetInterval.text),w.default.hasRole.roleStudent?v.default.createElement("div",null):v.default.createElement("div",{className:"timer-teacher-close-btn",onClick:this.timerCloseHandel.bind(this)})),v.default.createElement("div",{className:w.default.hasRole.roleStudent?"timer-student-content":"timer-teacher-content"},o,v.default.createElement("div",{className:"timer-teachTool-colon"}),r),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"timer-teachTool-startBtn",ref:"timerStartBtn",style:{display:this.state.startBtnStyle?"block":"none"},onClick:this.startBtnHandel.bind(this),title:y.default.language.languageData.timers.timerBegin.text}),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:this.state.stopUnClickableStyle?"unclick-stopBtn":"timer-teachTool-stopBtn",style:{display:this.state.startAndStopImg?"block":"none"},onClick:this.stopBtnHandel.bind(this),title:y.default.language.languageData.timers.timerStop.text}),w.default.hasRole.roleStudent?v.default.createElement("div",{className:"student-teachTool-stopBtn",style:{display:this.state.startAndStopImg?"block":"none"},title:y.default.language.languageData.timers.timerStop.text}):void 0,w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"timer-teachTool-againBtn",style:{display:this.state.againBtnStyle?"block":"none"},onClick:this.againBtnHandel.bind(this),title:y.default.language.languageData.timers.again.text}),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"timer-teachTool-againBtn-unclickable",style:{display:this.state.againUnClickableStyle?"block":"none"},title:y.default.language.languageData.timers.again.text}),"mobile"===TK.SDKTYPE?v.default.createElement("audio",{id:"ring_audio",src:"./music/ring.mp3?ts="+this.listernerBackupid,className:"audio-play"}):TK.isTkNative&&TK.subscribe_from_native?void 0:v.default.createElement("audio",{id:"ring_audio",src:"./music/timer_default.wav",className:"audio-play"})))}}]),t}(v.default.Component);t.default=N},ZLEe:function(e,t,a){e.exports={default:a("72x0"),__esModule:!0}},ZZXC:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("DrPG"),r=n(i),o=a("HUPQ"),s=n(o),l=a("VSuD"),d=(n(l),a("yE5a")),u=(n(d),a("T+56")),c=(n(u),a("YRCL")),h=(n(c),{getAppLanguageInfo:function(e,t){var n=t||s.default.languageName,i={};s.default.language=s.default.language||{},i.name=n,i.languageData=a("KyAL")("./i18_"+n+".js").default,e&&"function"==typeof e&&e(i),document.body.className=document.body.className.replace(/(chinese|english|complex)/g,"")+" "+i.name,document.body.setAttribute("data-language",i.name)},TkUtils:r.default});t.default=h},adC7:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HUPQ"),r=n(i),o=a("T+56"),s=n(o),l={showAlert:function(e,t){s.default.CoreController.dispatchEvent({type:"showAlert",message:{data:{title:e.title,message:e.message,ok:e.ok,callback:function(e){t&&"function"==typeof t&&t(e)}}}})},showConfirm:function(e,t){s.default.CoreController.dispatchEvent({type:"showConfirm",message:{data:{title:e.title,message:e.message,isOk:{cancel:e.button.cancel,ok:e.button.ok},callback:function(e){t&&"function"==typeof t&&t(e)}}}})}},d={showError:function(e,t,a,n){var i={message:e,title:a||r.default.language.languageData.alertWin.title.showError.text,ok:n||r.default.language.languageData.alertWin.ok.showError.text};l.showAlert(i,t)},showPrompt:function(e,t,a,n){var i={message:e,title:a||r.default.language.languageData.alertWin.title.showPrompt.text,ok:n||r.default.language.languageData.alertWin.ok.showPrompt.text};l.showAlert(i,t)},showConfirm:function(e,t,a,n,i){var o={title:a||r.default.language.languageData.alertWin.title.showConfirm.text,button:{cancel:i||r.default.language.languageData.alertWin.ok.showConfirm.cancel,ok:n||r.default.language.languageData.alertWin.ok.showConfirm.ok},message:e};l.showConfirm(o,t)}};t.default=d},adiS:function(e,t,a){var n=a("T9r1"),i=a("biYF")("toStringTag"),r="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,a,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=o(t=Object(e),i))?a:r?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},b4tm:function(e,t,a){var n=a("8Nvm"),i=a("JBI7"),r=a("biYF")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},bJpG:function(e,t,a){a("vyS5")("Map")},bMTV:function(e,t){},bodH:function(e,t,a){var n=a("bHZz");e.exports=function(e,t,a){for(var i in t)a&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},buLY:function(e,t,a){"use strict";var n={error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)}};window.Log=n},cSSE:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Q+Ik"),r=n(i),o=a("HzJ8"),s=n(o),l=a("KH7x"),d=n(l),u=a("Yarq"),c=n(u),h=a("AA3o"),f=n(h),m=a("xSur"),g=n(m),p=a("UzKs"),v=n(p),b=a("Y7Ml"),S=n(b),y=a("RFtt"),k=n(y),w=a("Sa83"),T=n(w),C=a("T+56"),D=n(C),A=a("yE5a"),E=n(A),I=a("HUPQ"),P=n(I),R=a("VSuD"),B=n(R),_=a("Ovlj"),x=(n(_),function(e){function t(e){(0,f.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.state={fileTypeMark:"general",literallyWrapClass:"",literallyWrapStyle:{},isFillUp:!1,isShowDocumentTool:!1,documentType:void 0},a.fatherContainerId="white_board_outer_layout",a.whiteboardContainerId="big_literally_wrap",a.sendMobileData={page:{},zoom:{},remarkText:!1,chooseType:"tool_mouse"},a}return(0,S.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){var e=this;D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomReceiveActionCommand,e.receiveActionCommand.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),D.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),e._initWhiteboardDefault()}},{key:"componentWillUnmount",value:function(){E.default.getTkWhiteBoardManager().destroyMainWhiteboard()}},{key:"handlerRoomPubmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":t._changeStateIsShowDocumentTool()}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":t.setState({isShowDocumentTool:!1})}}},{key:"handlerRoomUserpropertyChanged",value:function(e){e.message,this._changeStateIsShowDocumentTool()}},{key:"_changeStateIsShowDocumentTool",value:function(){P.default.classBegin&&((B.default.hasRole.roleChairman||B.default.hasRole.roleTeachingAssistant)&&"template_classic"===B.default.template?this.setState({isShowDocumentTool:!0}):B.default.hasRole.roleStudent&&E.default.getTkRoom().getMySelf().candraw&&"template_classic"===B.default.template?this.setState({isShowDocumentTool:!0}):this.setState({isShowDocumentTool:!1}))}},{key:"_receiveActionCommand",value:function(e,t){if(L.Logger.info("receive whiteboard sdk action command（action,cmd）:",e,t),D.default.CoreController.dispatchEvent({type:"receiveWhiteboardSDKAction",message:{action:e,cmd:t}}),"viewStateUpdate"===e&&t.updateViewState.tool){var a=t.updateViewState.tool,n=!0,i=!1,o=void 0;try{for(var l,u=(0,s.default)((0,r.default)(a));!(n=(l=u.next()).done);n=!0){var c=l.value,h=(0,d.default)(c,2),f=h[0];h[1].isUse&&(this.sendMobileData.chooseType=f)}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}}if("viewStateUpdate"===e)for(var m in t.viewState){switch(m){case"page":for(var g in t.viewState[m])this.sendMobileData.page[g]="currentPage"===g||"totalPage"===g?t.viewState[m][g]:!t.viewState[m][g].disabled;break;case"zoom":this.sendMobileData.zoom.zoom_big=!t.viewState[m].zoom_big.disabled,this.sendMobileData.zoom.zoom_small=!t.viewState[m].zoom_small.disabled;break;case"remarkText":this.sendMobileData.remarkText=""!==t.viewState[m];break;case"remark":if(!t.viewState[m]){var p={remark:!1};E.default.getTkRoom().sendActionCommand("viewStateUpdate",p)}break;case"other":if(E.default.getTkRoom().getMySelf().id&&E.default.getTkRoom().getMySelf().primaryColor!==t.viewState[m].primaryColor){var v=E.default.getTkRoom().getMySelf().id,b={primaryColor:t.viewState[m].primaryColor};E.default.getTkRoom().changeUserProperty(v,"__all",b)}break;case"documentType":this.setState({documentType:t.viewState[m]})}E.default.getTkRoom().sendActionCommand("viewStateUpdate",this.sendMobileData)}}},{key:"receiveActionCommand",value:function(e){var t=e.message,a=t.action,n=t.cmd;if(document.getElementById("tk_app")&&document.getElementsByClassName("all-container")[0]&&(document.getElementById("tk_app").getElementsByClassName("all-container")[0].style.background="#161616"),"mobile"===TK.SDKTYPE)if("chooseShow"===a)this.setState({isShowDocumentTool:n.isShow});else if("whiteboardSDK_addPage"===a)E.default.getTkWhiteBoardManager().addPage();else if("whiteboardSDK_nextPage"===a)E.default.getTkWhiteBoardManager().nextPage();else if("whiteboardSDK_prevPage"===a)E.default.getTkWhiteBoardManager().prevPage();else if("whiteboardSDK_skipPage"===a){var i=n.number;E.default.getTkWhiteBoardManager().skipPage(i)}else"whiteboardSDK_nextStep"===a?E.default.getTkWhiteBoardManager().nextStep():"whiteboardSDK_prevStep"===a?E.default.getTkWhiteBoardManager().prevStep():"whiteboardSDK_enlargeWhiteboard"===a?E.default.getTkWhiteBoardManager().enlargeWhiteboard():"whiteboardSDK_narrowWhiteboard"===a?E.default.getTkWhiteBoardManager().narrowWhiteboard():"whiteboardSDK_openDocumentRemark"===a?E.default.getTkWhiteBoardManager().openDocumentRemark():"whiteboardSDK_closeDocumentRemark"===a&&E.default.getTkWhiteBoardManager().closeDocumentRemark()}},{key:"_initWhiteboardDefault",value:function(){var e=document.getElementById(this.whiteboardContainerId),t={isMobile:!0,canDraw:T.default.handler.getAppPermissions("canDraw"),isLoadDocumentToolBar:!1,documentRemarkConfig:{parentNode:void 0,isDrag:!0,initDragPosition:{left:50,top:50}},whiteboardToolBarConfig:{isDrag:!1,loadWhiteboardTools:{mouse:!0,laser:!1,pen:!0,text:!0,shape:!0,eraser:!0,clear:!1,undo:!1,redo:!1,setting:!0}},documentToolBarConfig:{isLoadRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")},fontSize:35,primaryColor:B.default.hasRole.roleStudent?"#000000":"#ED3E3A",canRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks"),isLoadDocumentRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")};E.default.getTkWhiteBoardManager().createMainWhiteboard(e,t,this._receiveActionCommand.bind(this)),this.setState({isShowDocumentTool:!1})}},{key:"handlerRoomConnected",value:function(){this._changeWhiteboardConfig(),this._changeStateIsShowDocumentTool();var e=document.getElementById("big_literally_wrap");"template_default"===B.default.template?e.clientHeight>889?this.setState({isFillUp:!1}):this.setState({isFillUp:!0}):"template_classic"===B.default.template&&(e.clientHeight>664?this.setState({isFillUp:!1}):this.setState({isFillUp:!0}))}},{key:"handlerInitAppPermissions",value:function(){var e={canDraw:T.default.handler.getAppPermissions("canDraw"),documentToolBarConfig:{isLoadRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")},canRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks"),isLoadDocumentRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")};E.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(e,"default")}},{key:"_changeWhiteboardConfig",value:function(){if(B.default.joinRoomInfo.customWhiteboardBackground){var e=B.default.joinRoomInfo.whiteboardcolor,t="#"+P.default.customWhiteboardColorArry[e],a="",n=void 0;if(B.default.hasRole.roleChairman||B.default.hasRole.roleTeachingAssistant)a="ffffff"===P.default.customWhiteboardColorArry[e]?"ED3E3A":"EDEDED",n="#"+a;else{var i=void 0;i="000000"===P.default.customWhiteboardColorArry[e]?"FFCC00":"000000",n="#"+i}var r={primaryColor:n,backgroundColor:t,secondaryColor:t};E.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(r,"default")}else{var o={primaryColor:B.default.hasRole.roleStudent?"#000000":"#ED3E3A"};E.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(o,"default")}if("template_classic"===B.default.template){var s={isMobile:!0,canDraw:!0,isLoadDocumentToolBar:!0,documentToolBarConfig:{isDrag:!0,isLoadFullScreen:!0,initDragPosition:{left:45,top:92}},whiteboardToolBarConfig:{isDrag:!0,initDragPosition:{left:88,top:30},loadWhiteboardTools:{mouse:!0,laser:!1,pen:!0,text:!0,shape:!0,eraser:!0,clear:!1,undo:!1,redo:!1,setting:!0}},fontSize:35};E.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(s);var l=document.getElementById("defaultDocumentToolViewRoot");if(l){var d=document.getElementById("defaultTalkcloudFullScreen"),u=document.getElementById("defaultTalkcloudVolume"),c=l.querySelector("#defaultTalkcloudRemark");l.appendChild(d),l.appendChild(u),l.appendChild(c)}}}},{key:"render",value:function(){var e=this;return k.default.createElement("div",{id:e.fatherContainerId,className:"white-board-outer-layout"},"  ",k.default.createElement("div",{id:e.whiteboardContainerId,className:"big-literally-wrap "+e.state.literallyWrapClass+(e.state.isFillUp?" fill-up":" no-fill-up")+(e.state.isShowDocumentTool?" ShowDocumentTool":" noShowDocumentTool")+("dynamicPPT"===e.state.documentType||"h5Document"===e.state.documentType?" hide-document":"")}," "))}}]),t}(k.default.Component));t.default=x},cUn4:function(e,t,a){e.exports={default:a("G/71"),__esModule:!0}},cX6w:function(e,t,a){var n=a("FITv"),i=a("Cl/E")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},dC2g:function(e,t,a){var n=a("b4tm");e.exports=function(e,t){return new(n(e))(t)}},din6:function(e,t,a){e.exports={default:a("ix7A"),__esModule:!0}},dtxI:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Yarq"),r=n(i),o=a("AA3o"),s=n(o),l=a("xSur"),d=n(l),u=a("UzKs"),c=n(u),h=a("Y7Ml"),f=n(h),m=a("aA9S"),g=n(m),p=a("cUn4"),v=n(p),b=a("RFtt"),S=n(b),y=a("EXAz"),k=n(y),w=a("yE5a"),T=n(w),C=a("T+56"),D=n(C),A=a("YRCL"),E=n(A),I=a("m/zC"),P=n(I),R=a("VSuD"),B=n(R),_=a("HUPQ"),x=n(_);a("QqT5"),a("IW/2");var N=a("s3NG"),M=n(N),W=a("fC09"),H=n(W),O=a("hxXK"),z=n(O),F=a("Ha7l"),U=n(F),j=a("e+zB"),V=n(j),K={on:D.default.CoreController.addEventListener,off:D.default.CoreController.removeBackupListerner,emit:D.default.CoreController.dispatchEvent},Y={detail:"DETAIL",option:"OPTION",statistics:"STATISTICS",current:"CURRENT"},q=[B.default.EVENTTYPE.RoomEvent.roomPubmsg,B.default.EVENTTYPE.RoomEvent.roomDelmsg,"receive-msglist-question"],Q=["UNSTART","RUNNING","FINISHED"],G=new v.default([[Q[0],Y.option],[Q[1],Y.statistics],[Q[2],Y.current]]),Z=["NORMAL","MINIMIZED"],J={hasChose:!1},X=new Array(4).fill(void 0).map(function(e){return(0,g.default)({},J)}),$=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return e.owner=T.default.getTkRoom().getMySelf(),e.role=e.owner.role,e.pollTimerID=void 0,e.ansTimerID=void 0,e.statisticsTimerID=void 0,e.quesID=void 0,e.pollInterval=3e3,e.markID=(new Date).getTime()+"_"+Math.random(),e.state={show:!1,questionState:Q[0],sizeState:Z[0],page:{index:Y.option,data:null},options:X,result:new Array(X.length).fill(0),hasPub:!1,ansTime:0,resultNum:0,rightOptions:[],detailData:[],resizeInfo:{width:0,height:0},detailPageInfo:{current:1,total:1},hintShow:!1},e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;q.forEach(function(t,a){return K.on(t,e.handleEvent.bind(e),e.markID)})}},{key:"componentWillUnmount",value:function(){K.off(this.markID)}},{key:"componentDidUpdate",value:function(e,t){t.show!==this.state.show&&this.state.show&&this.setDefaultPosition(),this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=x.default.windowInnerWidth/B.default.STANDARDSIZE,n=t.offsetWidth/a,i=t.offsetHeight/a;this.state.resizeInfo&&(Math.abs(this.state.resizeInfo.width-n)>.04||Math.abs(this.state.resizeInfo.height-i)>.04)&&(this.state.resizeInfo={width:n,height:i},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:.5,percentTop:0,isDrag:!1},!0)}},{key:"dispose",value:function(e){var t=e.action,a=e.data,n=e.extra;if(null===t||null===a)return L.Logger.error("Incomplete parameter");this[t]&&"function"==typeof this[t]&&this[t]({action:t,data:a,extra:n})}},{key:"turn",value:function(e){var t=e.data,a=e.extra,n=e.extra.page;if(null===t||null===a||void 0===n)return L.Logger.error("Error parameter");n.index!==Y.current&&this.setState({page:n})}},{key:"handleEvent",value:function(e){var t=this,a=e.type,n=e.message;a=/-/.test(a)&&a.replace(/\-/g,"")||a,this.setState({event:{type:a,message:n}},function(){return t.dispose({action:a,data:n})})}},{key:"changeQuestionState",value:function(e){var t=this,a=e.data,n=this.state,i=n.questionState,r=n.options,o=Q.indexOf(i),s=G.get(Q.length-1===o?Q[0]:Q[o+1]),l=s===Y.current?this.state.page:{index:s,data:a};if("UNSTART"===i&&!r.some(function(e){return!0===e.hasChose}))return void this.setState({hintShow:!0});var d="UNSTART"===i?"Start":"RUNNING"===i?"End":"Reset",u=r.map(function(e,t){if(!0===e.hasChose)return t}).filter(function(e){return void 0!==e});this.setState({questionState:Q[Q.length-1===o?0:o+1],page:l,rightOptions:u},function(){t["questionWill"+d]()})}},{key:"changeSizeState",value:function(e){var t=(e.data,this.state.sizeState),a=Z.indexOf(t);this.setState({sizeState:Z[Z.length-1===a?0:a+1]})}},{key:"questionWillStart",value:function(){var e=this.state,t=e.options,a=e.rightOptions;E.default.sendQuestion(!1,{options:t,action:"start",rightOptions:a,state:this.state}),this.startAnsTimer(),this.startGetAnswerData()}},{key:"questionWillEnd",value:function(){this.stopGetAnswerData(),this.stopAnsTimer(),E.default.sendQuestion(!1,{action:"end",state:this.state});var e=this.state,t=e.result,a=e.resultNum,n=e.ansTime,i=e.rightOptions;E.default.publishResult({result:t,resultNum:a,ansTime:n,rightOptions:i})}},{key:"questionWillReset",value:function(){E.default.sendQuestion(!0,{}),E.default.publishResult({},!0),E.default.sendQuestion(!1,{action:"open"}),this.statisticsTimerID&&clearInterval(this.statisticsTimerID);var e=this.state,t=e.result,a=e.resultNum,n=e.ansTime,i=e.rightOptions;E.default.publishResult({result:t,resultNum:a,ansTime:n,rightOptions:i}),this.setState({resultNum:0,ansTime:0,hasPub:!1,options:new Array(4).fill(void 0).map(function(e){return(0,g.default)({},J)}),detailData:[],detailPageInfo:{current:1,total:1},hintShow:!1})}},{key:"roompubmsg",value:function(e){var t=this,a=e.data;if(a.data){var n=a.name,i=a.values,r=a.answerCount,o=a.data,s=(o.options,o.action),l=(o.rightOptions,o.state);switch(n){case"Question":if(!B.default.hasRole.roleStudent)switch(s){case"open":this.setState({show:!0,questionState:Q[0],page:{index:Y.option},options:new Array(4).fill(void 0).map(function(e){return(0,g.default)({},J)})});break;case"start":this.quesID=a.data.quesID,this.setState(l,function(){t.startAnsTimer(),t.startGetAnswerData()});break;case"end":this.stopAnsTimer(),this.stopGetAnswerData(),this.setState({questionState:Q[2]})}break;case"GetQuestionCount":var d=null!==i&&void 0!==i?new Array(this.state.options.length).fill(0).map(function(e,t){return Number(i[""+t])||0}):new Array(this.state.options.length).fill(0),u=r;this.setState({result:d,resultNum:u});break;case"PublishResult":var c=a.data.hasPub;c&&this.setState({hasPub:c})}}}},{key:"roomdelmsg",value:function(e){switch(e.data.name){case"Question":case"ClassBegin":this.setState({show:!1,questionState:Q[0],options:new Array(4).fill(void 0).map(function(e){return(0,g.default)({},J)}),resultNum:0,ansTime:0,hasPub:!1},function(){K.emit({type:"colse_holdAll_item",message:{type:"answer"}})})}}},{key:"receivemsglistquestion",value:function(e){var t=this;if(e.data.data.data){var a=(this.state.questionState,x.default.serviceTime/1e3-e.data.data.ts),n=e.data.data.data,i=n.action,r=n.options,o=n.rightOptions,s=n.quesID,l=n.state;"open"!==i||B.default.hasRole.roleStudent||this.setState({show:!0,options:new Array(4).fill(void 0).map(function(e){return(0,g.default)({},J)})}),"start"!==i||B.default.hasRole.roleStudent||(this.quesID=s,E.default.getQuestionCount({}),this.setState({show:!0,questionState:"RUNNING",page:{index:Y.statistics},ansTime:a,rightOptions:o,options:r},function(){t.startAnsTimer(),t.startGetAnswerData()})),"end"!==i||B.default.hasRole.roleStudent||(this.stopAnsTimer(),this.stopGetAnswerData(),this.setState(l))}}},{key:"startGetAnswerData",value:function(){this.pollTimerID&&clearInterval(this.pollTimerID),this.pollTimerID=setInterval(function(){E.default.getQuestionCount({})},this.pollInterval),this.setState({result:new Array(this.state.options.length).fill(0)})}},{key:"startAnsTimer",value:function(){var e=this;this.ansTimerID&&clearInterval(this.ansTimerID),this.ansTimerID=setInterval(function(){var t=e.state.ansTime+1;e.setState({ansTime:t})},1e3)}},{key:"stopGetAnswerData",value:function(){this.pollTimerID&&clearInterval(this.pollTimerID),this.pollTimerID=void 0,E.default.getQuestionCount({})}},{key:"stopAnsTimer",value:function(){this.ansTimerID&&clearInterval(this.ansTimerID)}},{key:"publishResult",value:function(){var e=this.state,t=e.result,a=e.resultNum,n=e.ansTime,i=e.rightOptions;E.default.publishResult({result:t,resultNum:a,ansTime:n,rightOptions:i,hasPub:!0}),this.setState({hasPub:!0})}},{key:"changeOptionLength",value:function(e){var t=e.data.num,a=this.state.options;a.length>=8&&t>0||a.length<=2&&t<0||(t>0&&a.push((0,g.default)({},J))||a.pop(),this.setState({options:a}))}},{key:"optionClick",value:function(e){var t=e.data.index,a=this.state.options;a[t].hasChose=!a[t].hasChose,this.setState({options:a})}},{key:"changeDetail",value:function(e){var t=this,a=(e.action,e.data);if(!(1===this.state.detailPageInfo.current&&-1===a.action||this.state.detailPageInfo.current===this.state.detailPageInfo.total&&1===a.action))if(-1===a.action){var n=this.state.detailPageInfo.current-1;this.getDetailData(n),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.statisticsTimerID=setInterval(function(){t.getDetailData(n)},2e3))}else if(1===a.action){var i=this.state.detailPageInfo.current+1;this.getDetailData(i),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.statisticsTimerID=setInterval(function(){t.getDetailData(i)},2e3))}}},{key:"changeDetailOrStatistics",value:function(){var e=this,t=this.state.page;this.state.page.index===Y.statistics?this.statisticsTimerID=setInterval(function(){e.getDetailData(1)},2e3):this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.statisticsTimerID=void 0),this.setState({page:{index:t.index===Y.statistics?Y.detail:Y.statistics}})}},{key:"getDetailData",value:function(e){var t=this;P.default.getSimplifyAnswer({id:this.quesID,page:e},{doneCallback:function(a){0===a.result&&t.setState({detailData:a.data,detailPageInfo:{total:a.pageinfo&&Math.ceil(a.pageinfo.count/20)||1,current:e}})}})}},{key:"close",value:function(){this.statisticsTimerID&&clearInterval(this.statisticsTimerID),this.setState({show:!1,questionState:Q[0],options:new Array(4).fill(void 0).map(function(e){return(0,g.default)({},J)}),resultNum:0,ansTime:0,hasPub:!1,hintShow:!1,detailData:[],detailPageInfo:{current:1,total:1}},function(){E.default.sendQuestion(!0,{}),E.default.publishResult({},!0),K.emit({type:"colse_holdAll_item",message:{type:"answer"}})})}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.questionState,n=e.sizeState,i=e.resizeInfo,r=(0,g.default)(this.state,{role:this.role,owner:this.owner}),o=this.props,s=o.id,l=o.answerDrag,d=o.draggableData,u={position:"absolute",zIndex:130,display:t?"":"none",left:0},c=Object.customAssign({id:s,size:i,percentPosition:{percentLeft:l.percentLeft,percentTop:l.percentTop}},d);return S.default.createElement(k.default,c,S.default.createElement("div",{id:s,className:"question-panel teacher "+a.toLowerCase()+" "+n.toLowerCase(),style:u},S.default.createElement(U.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:Y}),S.default.createElement("div",{className:"body"},this.state.page.index===Y.option?S.default.createElement(M.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:Y}):void 0,this.state.page.index===Y.detail||this.state.page.index===Y.statistics?S.default.createElement(H.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:Y}):void 0,this.state.page.index===Y.detail||this.state.page.index===Y.statistics?S.default.createElement(V.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:Y}):void 0),S.default.createElement(z.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:Y})))}}]),t}(S.default.Component);t.default=$},"e+zB":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("RFtt"),r=n(i),o=a("HUPQ"),s=n(o),l=function(e){var t=e.parentState,a=e.dispose,n=e.pageDict,i=(t.studentNum,t.result),o=t.ansTime,l=t.resultNum;return r.default.createElement("div",{className:"statistics",style:{display:t.page.index===n.statistics?"":"none"}},r.default.createElement("div",{className:"statistics-header"},r.default.createElement("span",{className:"num item"},s.default.language.languageData.qPanel.answerNum,":",l,s.default.language.languageData.qPanel.people),r.default.createElement("span",{className:"time item"},s.default.language.languageData.qPanel.useTime,":",function(e){var t=Number(e%60),a=Math.floor(e/60),n=Math.floor(e/3600);return(n>9&&n||"0"+n)+":"+(a>9&&a||"0"+a)+":"+(t>9&&t||"0"+t)}(o)),r.default.createElement("span",{className:"cut item",onClick:function(){a({action:"changeDetailOrStatistics",data:{}})}},s.default.language.languageData.qPanel.detail," >")),r.default.createElement("div",{className:(i.length>4?"double ":"")+"statistics-wrap"},function(){return i.map(function(e,t){return r.default.createElement("div",{className:"statistics-item",key:t},r.default.createElement("span",{className:"op op-"+t},String.fromCharCode("A".charCodeAt()+t)),r.default.createElement("span",{className:"total"},r.default.createElement("span",{className:"process",style:{width:Number(e)/Number(l)*100+"%"}})),r.default.createElement("span",{className:"num"},e,s.default.language.languageData.qPanel.people))})}()))};t.default=l},fC09:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("RFtt"),r=n(i),o=a("HUPQ"),s=n(o),l=function(e){var t=e.parentState,a=e.dispose,n=e.pageDict,i=(t.studentNum,t.result,t.ansTime),o=t.resultNum,l=t.detailData;return r.default.createElement("div",{className:"statistics",style:{display:t.page.index===n.detail?"":"none"}},r.default.createElement("div",{className:"statistics-header"},r.default.createElement("span",{className:"num item"},s.default.language.languageData.qPanel.answerNum,":",o,s.default.language.languageData.qPanel.people),r.default.createElement("span",{className:"time item"},s.default.language.languageData.qPanel.useTime,":",function(e){var t=Number(e%60),a=Math.floor(e/60);return(a>9&&a||"0"+a)+":"+(t>9&&t||"0"+t)}(i)),r.default.createElement("span",{className:"cut item",onClick:function(){a({action:"changeDetailOrStatistics",data:{}})}},s.default.language.languageData.qPanel.statistics," >")),r.default.createElement("div",{className:"detail"},function(){return l&&l.length&&l.length>0?l.map(function(e,t){return r.default.createElement("div",{className:"detail-item",key:t},r.default.createElement("span",null,e.studentname),r.default.createElement("span",{className:"selectedAnswers"},s.default.language.languageData.qPanel.choseAnswer,":",e.options.map(function(e){return String.fromCharCode("A".charCodeAt()+e)})+""),r.default.createElement("span",{className:"useTime"},s.default.language.languageData.qPanel.useTime,":",e.timestr))}):r.default.createElement("div",{className:"detail-item"},r.default.createElement("span",null,s.default.language.languageData.qPanel.loading))}()),function(){return r.default.createElement("div",{className:"detail-page"},r.default.createElement("span",{onClick:function(){a({action:"changeDetail",data:{action:-1}})}},"<"),r.default.createElement("span",null,t.detailPageInfo.current+"/"+t.detailPageInfo.total),r.default.createElement("span",{onClick:function(){a({action:"changeDetail",data:{action:1}})}},">"))}())};t.default=l},"fZJ/":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("4YfN"),r=n(i),o=a("A9zj"),s=n(o),l=a("Yarq"),d=n(l),u=a("AA3o"),c=n(u),h=a("xSur"),f=n(h),m=a("UzKs"),g=n(m),p=a("Y7Ml"),v=n(p),b=a("RFtt"),S=n(b),y=a("/mFE"),k=n(y),w=a("T+56"),T=n(w),C=a("DrPG"),D=n(C),A=a("HUPQ"),E=n(A),I=a("yE5a"),P=n(I),R=a("VSuD"),B=(n(R),function(e){function t(e){(0,c.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.containerWidthAndHeight=Object.customAssign({},a.props.containerWidthAndHeight),a.instanceId=void 0!==a.props.instanceId?a.props.instanceId:"whiteboard_default",a.whiteboardElementId="whiteboard_container_"+a.instanceId,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.showShapeAuthor=void 0!==a.props.showShapeAuthor?a.props.showShapeAuthor:E.default.showShapeAuthor,a.HandlerWhiteboardAndCoreInstance=P.default.getTkWhiteBoardManager().getWhiteboardIntermediateLayerInstance(),a.HandlerTkWhiteBoardManager=P.default.getTkWhiteBoardManager(),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;T.default.CoreController.addEventListener("changeWebPageWindowSize",e.handlerChangeWebPageWindowSize.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),e._lcInit()}},{key:"componentWillUnmount",value:function(){var e=this;e.props.saveImage&&this.HandlerWhiteboardAndCoreInstance.downCanvasImageToLocalFile(e.instanceId),T.default.Window.removeBackupListerner(e.listernerBackupid),T.default.CoreController.removeBackupListerner(e.listernerBackupid),this.HandlerTkWhiteBoardManager.destroyExtendWhiteboard(e.instanceId)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this;if(e.show!==this.props.show&&this.props.show&&this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId),!n.props.containerWidthAndHeight||n.props.containerWidthAndHeight.width===n.containerWidthAndHeight.width&&n.props.containerWidthAndHeight.height===n.containerWidthAndHeight.height||(Object.customAssign(n.containerWidthAndHeight,n.props.containerWidthAndHeight),setTimeout(function(){a.HandlerTkWhiteBoardManager.updateWhiteboardSize(a.instanceId)},100)),n.props.deawPermission!==e.deawPermission){var i={canDraw:n.props.deawPermission};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(i,n.instanceId)}if(n.props.useToolKey!==e.useToolKey&&"tool_color"!==n.props.useToolKey&&this.HandlerTkWhiteBoardManager.useWhiteboardTool(n.props.useToolKey,n.instanceId),n.props.useToolColor!==e.useToolColor){var r={primaryColor:n.props.useToolColor};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(r,n.instanceId)}if(n.props.pencilWidth!==e.pencilWidth){var o={pencilWidth:n.props.pencilWidth,eraserWidth:n.props.pencilWidth};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(o,n.instanceId)}if(n.props.fontSize!==e.fontSize){var s={fontSize:n.props.fontSize};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(s,n.instanceId)}this.props.watermarkImageUrl!==e.watermarkImageUrl&&this.HandlerWhiteboardAndCoreInstance.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl),n.props.watermarkImageScalc!==e.watermarkImageScalc&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardWatermarkImageScale(n.instanceId,n.props.watermarkImageScalc),n.props.isBaseboard!==e.isBaseboard&&this.HandlerWhiteboardAndCoreInstance.updateIsBaseboard(n.instanceId,n.props.isBaseboard),n.props.dependenceBaseboardWhiteboardID!==e.dependenceBaseboardWhiteboardID&&this.HandlerWhiteboardAndCoreInstance.updateDependenceBaseboardWhiteboardID(n.instanceId,n.props.dependenceBaseboardWhiteboardID),n.props.saveRedoStack!==e.saveRedoStack&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardSaveRedoStackAndSaveUndoStack(n.instanceId,{saveRedoStack:n.props.saveRedoStack})}},{key:"_receiveActionCommand",value:function(e,t){if(this.props.receiveVideoWhiteboardSDKAction){var a={action:e,cmd:t};this.props.receiveVideoWhiteboardSDKAction(a)}}},{key:"handlerResizeHandler",value:function(){this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId)}},{key:"handlerChangeWebPageWindowSize",value:function(){var e=this;setTimeout(function(){e.HandlerTkWhiteBoardManager.updateWhiteboardSize(e.instanceId)},100)}},{key:"_lcInit",value:function(){if(document.getElementById(this.whiteboardElementId)){var e=document.getElementById(this.whiteboardElementId),t={};t="mobile"===TK.SDKTYPE?"videoDrawWhiteboardComponent"===E.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===E.default.clientComponentName?{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},isConnectedRoom:!0,canDraw:this.props.deawPermission,synchronization:!0,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor}:{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},canDraw:this.props.deawPermission,synchronization:!0,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor,pencilWidth:10,shapeWidth:25,eraserWidth:10,fontSize:36}:{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},canDraw:this.props.deawPermission,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor,fontSize:36},this.HandlerTkWhiteBoardManager.createExtendWhiteboard(e,this.instanceId,t,this._receiveActionCommand.bind(this)),this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId),this.props.watermarkImageScalc&&void 0!==this.props.watermarkImageScalc&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardWatermarkImageScale(this.instanceId,this.props.watermarkImageScalc),this.props.watermarkImageUrl&&void 0!==this.props.watermarkImageUrl&&this.HandlerWhiteboardAndCoreInstance.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl)}}},{key:"render",value:function(){var e=this,t=e.props,a=t.show,n=(0,s.default)(t,["show"]);return S.default.createElement("div",(0,r.default)({id:e.whiteboardElementId,style:{display:a?"block":"none",width:this.containerWidthAndHeight.width?this.containerWidthAndHeight.width:"100%",height:this.containerWidthAndHeight.height?this.containerWidthAndHeight.height:"100%"},className:"overflow-hidden  scroll-literally-container "},D.default.filterContainDataAttribute(n)))}}]),t}(S.default.Component));B.propTypes={instanceId:k.default.string.isRequired},t.default=B},fh91:function(e,t,a){var n=a("OXaN"),i=a("/gXo");a("t+Om")("getPrototypeOf",function(){return function(e){return i(n(e))}})},gDty:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=a("hRKE"),r=n(i),o=a("aA9S"),s=n(o);Object.customAssign=function(e){try{return s.default.apply(s.default,arguments)}catch(o){for(var t=L.Utils.toJsonParse(L.Utils.toJsonStringify(e)),a=1;a<arguments.length;a++){var n=arguments[a];if(n&&"object"===(void 0===n?"undefined":(0,r.default)(n)))for(var i in n)t[i]=n[i]}return e=t||{}}}},gG5W:function(e,t,a){var n=a("FITv");n(n.S+n.F*!a("sjnA"),"Object",{defineProperties:a("f4eo")})},hHPy:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HzJ8"),r=n(i),o=a("Yarq"),s=n(o),l=a("AA3o"),d=n(l),u=a("xSur"),c=n(u),h=a("UzKs"),f=n(h),m=a("Y7Ml"),g=n(m),p=a("RFtt"),v=n(p),b=a("Q/yb"),S=(n(b),a("HUPQ")),y=n(S),k=a("VSuD"),w=n(k),T=a("DrPG"),C=n(T),D=a("T+56"),A=n(D),E=a("Sa83"),I=(n(E),a("yE5a")),P=n(I),R=a("YRCL"),B=n(R),_=a("EXAz"),x=n(_),N=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.props.id,a.state={responderIsShow:!1,answerText:"begin",beginIsStatus:!1,firstUser:!1,responderMsgTitle:"clickTitle",translateMove:null,isHasTransition:!1,resizeInfo:{width:0,height:0},studentIsGifImg:!1,startTime:0,endTime:0,playBackServerTime:0,getUserPublishState:null},a.userSort={},a.userArry=[],a.isClick=!1,a.timesRun=3,a.isSetDefaultPosition=!1,a.teacherTimeOut=null,a.isHasTransition=!1,a.intervals=void 0,a.timeOutIntervals=void 0,a.temporaryStyle={percentLeft:null,percentTop:null},a.isRestart=!1,a.responderBeginTsValue=0,a.fastBackWard=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener("receive-msglist-ResponderDrag",e.handlerMsglistResponderDrag.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener("receive-msglist-qiangDaQi",e.handlerMsglistQiangDaQi.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener("receive-msglist-QiangDaZhe",e.handlerMsglistQiangDaZhe.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,e.handlerRoomUserpropertyChanged.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomConnected,e.handlerRoomConnected.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,e.handlerRoomPlaybackPlaybackEnd.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,e.handlerRoomPlaybackPlaybackUpdatetime.bind(e),e.listernerBackupid),A.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,e.handlerRoomPlaybackDuration.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;A.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.isHasTransition!==this.state.isHasTransition&&this.state.isHasTransition&&(this.isHasTransition=!1,this.setState({isHasTransition:!1})),t.responderIsShow!==this.state.responderIsShow&&this.state.responderIsShow&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition());var a=(t.playBackServerTime/1e3).toFixed(0),n=(this.state.playBackServerTime/1e3).toFixed(0);t.playBackServerTime!==this.state.playBackServerTime&&Math.abs(n-a)>1&&this.responderBeginTsValue&&this.state.playBackServerTime&&(this.fastBackWard=!0,this.playBackResponderHandle())}},{key:"handlerRoomDisconnected",value:function(){this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"playBackResponderHandle",value:function(){var e=this;if(e.state.playBackServerTime&&e.responderBeginTsValue){var t=e._timeDifferenceToFormat(e.state.startTime,e.state.playBackServerTime),a=e._timeDifferenceToFormat(e.state.startTime,e.responderBeginTsValue);if(t<=a&&(clearTimeout(this.state.teacherTimeOut),e._clearDataHandle()),t-a>=8&&(clearTimeout(e.state.teacherTimeOut),e.state.firstUser?e.setState({answerText:e.state.answerText,responderMsgTitle:e.state.responderMsgTitle}):e.setState({answerText:"restart",responderMsgTitle:"noContest"})),t-a>0&&t-a<8){var n=t-a,i=1e3*(8-n);e.setState({responderMsgTitle:"inAnswerTitle",answerText:"inAnswerBtn"}),e.state.teacherTimeOut=setTimeout(function(){e.state.firstUser?e.setState({answerText:e.state.answerText,responderMsgTitle:e.state.responderMsgTitle,beginIsStatus:!1}):e.setState({answerText:"restart",responderMsgTitle:"noContest",beginIsStatus:!1})},i)}}}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!y.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=e.message.current;this.setState({playBackServerTime:t})}},{key:"handlerRoomPlaybackDuration",value:function(e){var t=this,a=e.message,n=a.startTime,i=a.endTime;t.setState({startTime:n,endTime:i})}},{key:"_timeDifferenceToFormat",value:function(e,t){var a=C.default.getTimeDifferenceToFormat(e,t),n=void 0;if(a){var i=a.hh,r=a.mm,o=a.ss;n=Number(o)+60*r+360*i}return n}},{key:"handlerMsglistResponderDrag",value:function(e){var t=this;e.message.ResponderDragArray.map(function(e,a){t.temporaryStyle.percentLeft=e.data.percentLeft,t.temporaryStyle.percentTop=e.data.percentTop})}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:.5,percentTop:0,isDrag:!1},!0)}},{key:"handlerRoomConnected",value:function(){var e=new Image;e.src=a("htrx"),e.onload}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"qiangDaQi":w.default.hasRole.roleStudent?(this.state.getUserPublishState>0||P.default.getTkRoom().getMySelf().publishstate>0)&&t._studentRecevedServiceQiangDaQiData(a):t._teacherRecevedServiceQiangDaQiData(a);break;case"QiangDaZhe":w.default.hasRole.roleStudent?t._studentRecevedServiceQiangDaZheData(a):t._teacherRecevedServiceQiangDaZheData(a);break;case"ResponderDrag":t.temporaryStyle.percentLeft=a.data.percentLeft,t.temporaryStyle.percentTop=a.data.percentTop}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":t._clearDataHandle(),t.setState({responderIsShow:!1});break;case"qiangDaQi":w.default.hasRole.roleStudent?(t._clearDataHandle(),t.setState({responderIsShow:!1})):a.data.isShow?(t._clearDataHandle(),t.setState({responderIsShow:!0})):(t._clearDataHandle(),t.setState({responderIsShow:!1}))}}},{key:"_clearDataHandle",value:function(){clearTimeout(this.teacherTimeOut),this.setState({answerText:"begin",beginIsStatus:!1,firstUser:!1,responderMsgTitle:"clickTitle",translateMove:null,isHasTransition:!1,resizeInfo:{width:0,height:0},getUserPublishState:null}),this.isClick=!1,this.userSort={},this.userArry=[],this.isRestart=!1,this.timesRun=3,this.isSetDefaultPosition=!1,this.teacherTimeOut=null,this.isHasTransition=!1,this.intervals=void 0,this.timeOutIntervals=void 0,this.temporaryStyle={percentLeft:null,percentTop:null}}},{key:"handlerRoomUserpropertyChanged",value:function(e){P.default.getTkRoom().getMySelf().id===e.user.id&&void 0!==e.message.publishstate&&this.setState({getUserPublishState:e.message.publishstate})}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=this,a=!0,n=!1,i=void 0;try{for(var o,s=(0,r.default)(e.message.qiangDaQiArr);!(a=(o=s.next()).done);a=!0){var l=o.value;w.default.hasRole.roleStudent?(this.state.getUserPublishState>0||P.default.getTkRoom().getMySelf().publishstate>0)&&t._studentRecevedServiceQiangDaQiData(l):t._teacherRecevedServiceQiangDaQiData(l)}}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"handlerMsglistQiangDaZhe",value:function(e){var t=this,a=!0,n=!1,i=void 0;try{for(var o,s=(0,r.default)(e.message.QiangDaZheArr);!(a=(o=s.next()).done);a=!0){var l=o.value;w.default.hasRole.roleStudent?t._studentRecevedServiceQiangDaZheData(l):t._teacherRecevedServiceQiangDaZheData(l)}}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"_teacherRecevedServiceQiangDaQiData",value:function(e){var t=this;this.isSetDefaultPosition=!0;var a=y.default.serviceTime/1e3-e.ts;e.data.isShow&&(clearTimeout(t.teacherTimeOut),t.setState({responderIsShow:!0,answerText:"begin"}),e.data.begin&&(this.setState({beginIsStatus:e.data.begin}),this.isRestart=!0,this.responderBeginTsValue=e.ts,a>=8?(clearTimeout(t.teacherTimeOut),t.state.firstUser?t.setState({answerText:t.state.answerText,responderMsgTitle:t.state.responderMsgTitle,beginIsStatus:!1}):t.setState({answerText:"restart",responderMsgTitle:"noContest",beginIsStatus:!1})):(t.setState({beginIsStatus:e.data.begin,responderMsgTitle:"inAnswerTitle",answerText:"inAnswerBtn"}),t.teacherTimeOut=setTimeout(function(){t.state.firstUser?t.setState({answerText:t.state.answerText,responderMsgTitle:t.state.responderMsgTitle,beginIsStatus:!1}):t.setState({answerText:"restart",responderMsgTitle:"noContest",beginIsStatus:!1})},8e3))))}},{key:"_teacherRecevedServiceQiangDaZheData",value:function(e){var t=this;if(e.data.isClick){clearTimeout(t.teacherTimeOut),t.userSort[e.fromID]={},t.userSort[e.fromID][e.seq]=e.data.userAdmin,t.userArry=[];for(var a in t.userSort)for(var n in t.userSort[a])t.userArry.push(n),t.userArry=t.userArry.sort(),void 0!==t.userSort[a][t.userArry[0]]&&t.setState({answerText:"somebodyTeacher",responderMsgTitle:t.userSort[a][t.userArry[0]]});this.isRestart=!0,t.setState({firstUser:!0,beginIsStatus:!1})}}},{key:"_studentRecevedServiceQiangDaQiData",value:function(e){var t=this,a=t.props,n=a.id,i=a.draggableData,r=y.default.serviceTime/1e3-e.ts;if(t.setState({responderMsgTitle:"inAnswerStudent",answerText:"inAnswerStudent",beginIsStatus:e.data.begin}),e.data.begin){if(r>=8){var o=void 0,s=void 0;null===t.temporaryStyle.percentLeft?(o=.5,s=0):(o=t.temporaryStyle.percentLeft,s=t.temporaryStyle.percentTop),i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:o,percentTop:s,isDrag:!0},!1),t.setState({beginIsStatus:!1,responderMsgTitle:"noContest",answerText:"noContest",studentIsGifImg:!1})}else t.intervals=setInterval(function(){t.timesRun-=1,0===t.timesRun&&i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:.2,percentTop:.2,isDrag:!0},!1),1===t.timesRun&&i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:.4,percentTop:.6,isDrag:!0},!1),2===t.timesRun&&i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:.7,percentTop:.2,isDrag:!0},!1),t.timesRun<=0&&(clearInterval(t.intervals),t.setState({beginIsStatus:!1,studentIsGifImg:!0,responderMsgTitle:"clickTitle",answerText:"begin"}),!1===t.isClick&&(t.timeOutIntervals=setTimeout(function(){var e=void 0,a=void 0;null===t.temporaryStyle.percentLeft?(e=.5,a=0):(e=t.temporaryStyle.percentLeft,a=t.temporaryStyle.percentTop),t.isHasTransition=!0,i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:e,percentTop:a,isDrag:!0},!1),t.setState({isHasTransition:t.isHasTransition,responderMsgTitle:"noContest",beginIsStatus:!1,studentIsGifImg:!1,answerText:"noContest"})},4500)))},1e3);t.setState({responderIsShow:!0})}}},{key:"_studentRecevedServiceQiangDaZheData",value:function(e){var t=this,a=t.props,n=a.id,i=a.draggableData,r=[];if(e.data.isClick){t.userSort[e.fromID]={},t.userSort[e.fromID][e.seq]=e.data.userAdmin;for(var o in t.userSort)for(var s in t.userSort[o])r.push(s),t.userArry=r.sort(),void 0!==t.userSort[o][t.userArry[0]]&&(o===P.default.getTkRoom().getMySelf().id?t.setState({responderMsgTitle:"my",answerText:"other"}):t.setState({responderMsgTitle:t.userSort[o][t.userArry[0]],answerText:"other"}));clearInterval(t.intervals),clearTimeout(t.timeOutIntervals);var l=void 0,d=void 0;null===t.temporaryStyle.percentLeft?(l=.5,d=0):(l=t.temporaryStyle.percentLeft,d=t.temporaryStyle.percentTop),i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:l,percentTop:d,isDrag:!0},!1),t.setState({responderMsgTitle:t.state.responderMsgTitle}),this.isClick=e.data.isClick}}},{key:"beginOrRestartResponder",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant)if(this.state.beginIsStatus||this.isRestart)!this.state.beginIsStatus&&this.isRestart&&this.restartResponder();else{var e={isShow:this.state.responderIsShow,begin:!0,userAdmin:""};B.default.sendSignallingQiangDaQi(!1,e)}else w.default.hasRole.roleStudent&&this.studentResponder()}},{key:"studentResponder",value:function(){var e=P.default.getTkRoom().getMySelf();if((this.state.getUserPublishState>0||e.publishstate>0)&&w.default.hasRole.roleStudent&&"begin"===this.state.answerText&&!this.isClick){this.isClick=!0;var t={userAdmin:e.nickname,isClick:!0};B.default.sendSignallingQiangDaZhe(!1,t)}}},{key:"closeResponder",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){var e={};B.default.sendSignallingQiangDaQi(!0,e),A.default.CoreController.dispatchEvent({type:"colse_holdAll_item",message:{type:"responder"}})}}},{key:"restartResponder",value:function(){var e={isShow:!0,begin:!1,userAdmin:""},t=!0;B.default.sendSignallingQiangDaQi(t,e),t=!1,B.default.sendSignallingQiangDaQi(t,e);var a=this.props,n=a.id,i=a.responderDrag,r=a.draggableData;r.changePosition&&"function"==typeof r.changePosition&&r.changePosition(n,i,!0)}},{key:"render",value:function(){var e=this,t=e.props,a=t.id,n=t.responderDrag,i=t.draggableData,r=e.state,o=r.answerText,s=r.responderMsgTitle,l=r.firstUser,d=r.beginIsStatus,u=r.studentIsGifImg,c={display:this.state.responderIsShow?"block":"none"},h=Object.customAssign({id:a,percentPosition:{percentLeft:n.percentLeft,percentTop:n.percentTop}},i);return v.default.createElement(x.default,h,v.default.createElement("div",{id:a,className:"responder-circle touch-select-select defalut-bg"+(d||w.default.hasRole.roleStudent&&u?" gif-img":"")+(l?" somebody-click":" nobody-click"),style:c},v.default.createElement("div",{className:"responder-begin-circle"+(d?" disabled":""),onClick:this.beginOrRestartResponder.bind(this)},y.default.language.languageData.responder[o].text),v.default.createElement("div",{className:"responder-msg-title"}," ",y.default.language.languageData.responder[s]&&void 0!==y.default.language.languageData.responder[s].text?y.default.language.languageData.responder[s].text:s),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"responder-close-img",onClick:this.closeResponder.bind(this)})))}}]),t}(v.default.Component);t.default=N},hWTF:function(e,t,a){a("A1pn"),a("IsPG"),e.exports=a("1Aa/")},htrx:function(e,t,a){e.exports=a.p+"img/responder_bg-e6acefb1.gif"},hxXK:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("RFtt"),r=n(i),o=a("VSuD"),s=n(o),l=a("HUPQ"),d=n(l),u=function(e){var t=e.dispose,a=e.parentState,n=a.questionState,i=(a.role,a.hasPub),o=a.options,l=a.pubRight;return r.default.createElement("div",{className:"footer"},r.default.createElement("span",{className:"hint item",style:{display:s.default.hasRole.roleStudent&&a.rightOptions.length<=0?"none":""}},s.default.hasRole.roleStudent?l&&a.rightOptions.length>0?d.default.language.languageData.qPanel.rightOptionIs+":"+(a.rightOptions&&a.rightOptions.map(function(e){return String.fromCharCode("A".charCodeAt()+e)})):"":"RUNNING"===a.questionState||"FINISHED"===a.questionState?d.default.language.languageData.qPanel.rightOptionIs+":"+(a.rightOptions&&a.rightOptions.map(function(e){return String.fromCharCode("A".charCodeAt()+e)}))+(!0===a.hasPub?"("+d.default.language.languageData.qPanel.hasPub+")":""):d.default.language.languageData.qPanel.tips[0]),r.default.createElement("span",{className:"hint item empty",style:{display:!s.default.hasRole.roleStudent&&"UNSTART"===a.questionState&&a.hintShow?"":"none"}},d.default.language.languageData.qPanel.tips[1]),r.default.createElement("span",{className:" option item",style:{display:s.default.hasRole.roleStudent&&"FINISHED"===a.questionState?"":"none"}},d.default.language.languageData.qPanel.myAnswer,":",o.map(function(e,t){return!0===e.hasChose&&String.fromCharCode("A".charCodeAt()+t)||void 0}).filter(function(e){return void 0!==e}).toString()),r.default.createElement("button",{onClick:function(){t({action:"publishResult",data:{}})},disabled:i&&!0,style:{display:"FINISHED"===n&&(s.default.hasRole.roleChairman||s.default.hasRole.roleTeachingAssistant)&&s.default.joinRoomInfo&&s.default.joinRoomInfo.isShowTheAnswer?"":"none"},className:"item pub-btn"},i?d.default.language.languageData.qPanel.hasPub:d.default.language.languageData.qPanel.pubResult),r.default.createElement("button",{className:"ques-state-btn item",onClick:function(){t({action:s.default.hasRole.roleStudent?"changeCommitState":"changeQuestionState",data:{}})},style:{display:"FINISHED"!==n||s.default.hasRole.roleChairman||s.default.hasRole.roleTeachingAssistant?"":"none"},disabled:!(s.default.hasRole.roleChairman||s.default.hasRole.roleStudent||s.default.hasRole.roleTeachingAssistant)},s.default.hasRole.roleStudent?"UNCOMMIT"===a.commitState?d.default.language.languageData.qPanel.commitAnswer:d.default.language.languageData.qPanel.modifyAnswer:"UNSTART"===a.questionState?d.default.language.languageData.qPanel.start:"RUNNING"===a.questionState?d.default.language.languageData.qPanel.end:d.default.language.languageData.qPanel.restart))};t.default=u},iCxh:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HzJ8"),r=n(i),o=a("Yarq"),s=n(o),l=a("AA3o"),d=n(l),u=a("xSur"),c=n(u),h=a("UzKs"),f=n(h),m=a("Y7Ml"),g=n(m),p=a("RFtt"),v=n(p),b=a("HUPQ"),S=n(b),y=a("VSuD"),k=n(y),w=a("T+56"),T=n(w),C=a("YRCL"),D=n(C),A=a("DrPG"),E=(n(A),a("EXAz")),I=n(E),P=a("yE5a"),R=(n(P),function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={dialIsShow:!1,dialIconClose:!1,turnTableDeg:"rotate(0)"},a.deg=50,a.num=0,a.numdeg=0,a.isClick=!1,a.msgDeg=!1,a.isSetDefaultPosition=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;T.default.CoreController.addEventListener("receive-msglist-dial",e.handlerMsglistDialShow.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(k.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(k.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(k.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(k.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;T.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.dialIsShow!==this.state.dialIsShow&&this.state.dialIsShow&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition())}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);if(n&&i){var r=(i.offsetWidth-n.offsetWidth)/2;a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{left:r,top:0,percentLeft:.5,percentTop:0,isDrag:!1},!0)}}},{key:"handlerMsglistDialShow",value:function(e){var t=this;this.msgDeg=!0;var a=!0,n=!1,i=void 0;try{for(var o,s=(0,r.default)(e.message.dialShowArr);!(a=(o=s.next()).done);a=!0){var l=o.value;t.handlerDisplayTeachTool(l)}}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"dial":t.handlerDisplayTeachTool(a)}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"dial":case"ClassBegin":t._clearDataHanler()}}},{key:"handlerRoomDisconnected",value:function(){this._clearDataHanler()}},{key:"_clearDataHanler",value:function(){this.deg=50,this.num=0,this.numdeg=0,this.isClick=!1,this.msgDeg=!1,this.isSetDefaultPosition=!1,this.setState({dialIsShow:!1,dialIconClose:!1,turnTableDeg:"rotate(0)"})}},{key:"handlerDisplayTeachTool",value:function(e){var t=this;this.isSetDefaultPosition=!0,k.default.hasRole.roleStudent?e.data.isShow?t.setState({dialIsShow:!0,turnTableDeg:"rotate(0)",dialIconClose:!1}):t.setState({turnTableDeg:e.data.rotationAngle,dialIconClose:!1,dialIsShow:!0}):e.data.isShow?t.setState({dialIsShow:!0,turnTableDeg:t.state.turnTableDeg,dialIconClose:!0}):(this.msgDeg=!1,t.setState({turnTableDeg:e.data.rotationAngle,dialIconClose:!1}),setTimeout(function(){t.setState({dialIconClose:!0}),t.isClick=!1},4e3))}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!S.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this._clearDataHanler()}},{key:"clickBeginHandle",value:function(){if(k.default.hasRole.roleStudent||!0===this.isClick||k.default.hasRole.rolePatrol)return!1;this.msgDeg&&this.setState({turnTableDeg:"rotate(0)"});var e=Math.floor(5*Math.random()+1);this.num=e+this.num,this.numdeg+=e*this.deg+360*Math.floor(2*Math.random()+3),90!==this.numdeg.toString().substr(-2)&&30!==this.numdeg.toString().substr(-2)&&10!==this.numdeg.toString().substr(-2)&&50!==this.numdeg.toString().substr(-2)&&70!==this.numdeg.toString().substr(-2)||(this.numdeg=this.numdeg+30),this.isClick=!0,this.msgDeg=!1;var t={rotationAngle:"rotate("+this.numdeg+"deg)",isShow:!1};D.default.sendSignallingDialToStudent(t)}},{key:"dialCloseHandle",value:function(){if(k.default.hasRole.roleChairman||k.default.hasRole.roleTeachingAssistant){var e={};D.default.sendSignallingDialToStudent(e,!0)}}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.dialDrag,n=e.draggableData,i={width:S.default.mobileDeviceType&&"phone"===S.default.mobileDeviceType?"3.89rem":"7.82rem",height:S.default.mobileDeviceType&&k.default.hasRole.roleStudent?"3.89rem":"7.82rem",position:"absolute",zIndex:130,display:this.state.dialIsShow?"block":"none",left:0,top:0},r=Object.customAssign({id:t,percentPosition:{percentLeft:a.percentLeft,percentTop:a.percentTop}},n);return v.default.createElement(I.default,r,v.default.createElement("div",{id:"dialDrag",style:i},v.default.createElement("div",{className:"dial-teachComponent-bg touch-select-select ",ref:"dialTeachComponentBg",style:{display:this.state.dialIsShow}},v.default.createElement("button",{alt:"pointer",style:{backgroundColor:this.state.a},className:"dial-teachComponent-pointer-button",onClick:this.clickBeginHandle.bind(this)}),v.default.createElement("div",{className:"dial-teachComponent-turntable",ref:"turnTable",style:{transition:"transform 4s ease",transform:this.state.turnTableDeg}}),k.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"dialCloseP",onClick:this.dialCloseHandle.bind(this),style:{display:this.state.dialIconClose?"block":"none"}}))))}}]),t}(v.default.Component));t.default=R},iHfv:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("hRKE"),r=n(i),o=a("4YfN"),s=n(o),l=a("Yarq"),d=n(l),u=a("AA3o"),c=n(u),h=a("xSur"),f=n(h),m=a("UzKs"),g=n(m),p=a("Y7Ml"),v=n(p),b=a("RFtt"),S=n(b),y=a("HUPQ"),k=n(y),w=a("VSuD"),T=n(w),C=a("fZJ/"),D=n(C),A=a("T+56"),E=n(A),I=a("Sa83"),P=n(I),R=a("DrPG"),B=(n(R),a("yE5a")),_=n(B),x=a("YRCL"),N=(n(x),a("F5u0")),M=n(N),L=function(e){function t(e,a){(0,c.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e,a));return n.state={videoDrawBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageScalc:16/9,isShow:!1,backgroundColor:"transparent",instanceId:n.props.videoDrawingBoardInstanceId||"videoDrawBoard",saveImage:!1,nickname:n.props.videoDrawingBoardInstanceId||"videoDrawBoard",deawPermission:!1,associatedMsgID:"VideoWhiteboard",role:void 0},useToolInfo:{useToolKey:"tool_pencil",useToolColor:n._changeWhiteboardConfig(),blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small"},useColorsTool:!1,BlackboardSmartIsShow:!1,stream:void 0,eraserIsDisabled:!0},n.streamType=void 0,n.userid=void 0,n.watermarkImageScalc=void 0,n.listernerBackupid=(new Date).getTime()+"_"+Math.random(),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;E.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),E.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener("receive-msglist-VideoWhiteboard",e.receiveMsglistVideoWhiteboard.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomUpdateFakeJsSdkInitInfo,e.roomUpdateFakeJsSdkInitInfo.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this,t=(0,s.default)({},this.state.videoDrawBoardInfo);E.default.CoreController.removeBackupListerner(e.listernerBackupid),_.default.getTkWhiteBoardManager().destroyExtendWhiteboard(t.instanceId),_.default.getTkWhiteBoardManager().resetWhiteboardData(t.instanceId)}},{key:"componentDidUpdate",value:function(e,t){t.videoDrawBoardInfo.isShow!==this.state.videoDrawBoardInfo.isShow&&this.setState({BlackboardSmartIsShow:this.state.videoDrawBoardInfo.isShow})}},{key:"handlerRoomConnected",value:function(){}},{key:"handlerRoomPlaybackClearAll",value:function(){var e=(0,s.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e})}},{key:"handlerRoomDisconnected",value:function(){var e=(0,s.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e}),_.default.getTkWhiteBoardManager().destroyExtendWhiteboard(e.instanceId),_.default.getTkWhiteBoardManager().resetWhiteboardData(e.instanceId)}},{key:"roomUpdateFakeJsSdkInitInfo",value:function(e){var t=e.message,a=t._skinId,n=t._tpId,i=t.deviceType,r=t.myself,o=T.default.testTemplate?T.default.testTemplate:n&&!/^\d*$/g.test(n)?"template_"+n:T.default.template,s=T.default.testSkin?T.default.testSkin:a&&!/^\d*$/g.test(a)?"skin_"+a:T.default.skin;T.default.updateTemplate(o),T.default.updateSkin(s),k.default.mobileDeviceType=i,this.setState({role:r.role})}},{key:"receiveVideoWhiteboardSDKAction",value:function(e){var t=e.action,a=e.cmd;if("viewStateUpdate"===t){var n=a.viewState.tool.tool_eraser.disabled;this.setState({eraserIsDisabled:n})}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"VideoWhiteboard":var a=(0,s.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,0!==this.state.role&&1!==this.state.role?a.deawPermission=!1:a.deawPermission=!0,t.data&&"object"===(0,r.default)(t.data)&&t.data.videoRatio&&(a.watermarkImageScalc=t.data.videoRatio),this.setState({videoDrawBoardInfo:a})}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"VideoWhiteboard":case"ClassBegin":var t=(0,s.default)({},this.state.videoDrawBoardInfo),a=(0,s.default)({},this.state.useToolInfo);t.isShow=!1,t.deawPermission=!1,a.useToolKey="tool_pencil",a.useToolColor=this._changeWhiteboardConfig(),a.blackboardToolsInfo="mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},a.selectBlackboardToolSizeId="blackboard_size_small",this.setState({eraserIsDisabled:!0,videoDrawBoardInfo:t,useToolInfo:a}),_.default.getTkWhiteBoardManager().destroyExtendWhiteboard(t.instanceId)}}},{key:"receiveMsglistVideoWhiteboard",value:function(e){var t=e.message.VideoWhiteboardArray[0].data,a=(0,s.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=P.default.handler.getAppPermissions("isShowVideoDrawTool"),t&&"object"===(void 0===t?"undefined":(0,r.default)(t))&&t.videoRatio&&(a.watermarkImageScalc=t.videoRatio),this.setState({videoDrawBoardInfo:a})}},{key:"_changeWhiteboardConfig",value:function(){if(T.default.joinRoomInfo.customWhiteboardBackground){var e=T.default.joinRoomInfo.whiteboardcolor,t="",a=void 0;return(T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant)&&(t="ffffff"===k.default.customWhiteboardColorArry[e]?"ED3E3A":"EDEDED",a="#"+t),a}return"#ED3E3A"}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=[];return a=["#5AC9FA","#FFCC00","#ED3E3A","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"],a.forEach(function(a,n){var i=S.default.createElement("li",{className:"color-option color_"+e._colorFilter(a)+" "+(e.state.useToolInfo.useToolColor===a?" active":""),key:n,onClick:e.changeStrokeColorClick.bind(e,a),id:"video_drawBoard_color_"+e._colorFilter(a)});t.push(i)}),{toolColorsArray:t}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"changeStrokeColorClick",value:function(e){var t=(0,s.default)({},this.state.useToolInfo);t.useToolColor=e,this.setState({useToolInfo:t,useColorsTool:!1})}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||(this.state.useToolInfo.useToolKey=e,this.setState({useToolInfo:this.state.useToolInfo,useColorsTool:!1}))}},{key:"_changeStrokeSizeClick",value:function(e,t){this.state.useToolInfo.selectBlackboardToolSizeId=e,this.state.useToolInfo.blackboardToolsInfo=t,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"playMediaHandle",value:function(){"videoDrawWhiteboardComponent"===k.default.clientComponentName?_.default.getTkRoom().exitAnnotation("media"):"localFileVideoDrawWhiteboardComponent"===k.default.clientComponentName&&_.default.getTkRoom().exitAnnotation("file")}},{key:"handleToolColorsClick",value:function(){this.setState({useColorsTool:!this.state.useColorsTool})}},{key:"onAfterChangeEraserWidth",value:function(e){var t=(0,s.default)({},this.state.useToolInfo);t.blackboardToolsInfo.eraser=e,this.setState({useToolInfo:t})}},{key:"onAfterChangePencilWidth",value:function(e){var t=(0,s.default)({},this.state.useToolInfo);t.blackboardToolsInfo.pencil=e,this.setState({useToolInfo:t})}},{key:"render",value:function(){var e=this,t=e.state,a=t.videoDrawBoardInfo,n=t.useToolInfo,i=t.useColorsTool,r=t.role,o=t.eraserIsDisabled,s=n.useToolKey,l=e._loadToolColorsElementArray(),d=l.toolColorsArray,u="tool_eraser"===s?n.blackboardToolsInfo.eraser:n.blackboardToolsInfo.pencil;return S.default.createElement("div",{className:"video-drawing-board-box",style:{display:a.isShow?"block":"none"}},S.default.createElement("div",{className:"video-drawing-board"},this.state.BlackboardSmartIsShow?S.default.createElement(D.default,{isBaseboard:!1,containerWidthAndHeight:a.containerWidthAndHeight,instanceId:a.instanceId,nickname:a.nickname,show:this.state.BlackboardSmartIsShow,backgroundColor:a.backgroundColor,useToolKey:s,fontSize:n.blackboardToolsInfo.text,useToolColor:n.useToolColor,pencilWidth:u,showShapeAuthor:!1,deawPermission:a.deawPermission,watermarkImageScalc:a.watermarkImageScalc,associatedMsgID:a.associatedMsgID,receiveVideoWhiteboardSDKAction:this.receiveVideoWhiteboardSDKAction.bind(this)}):void 0),0!==r&&1!==r&&-1!==r?void 0:S.default.createElement("ul",{id:"video-drawing-tool",className:"blackboard-tool clear-float"},S.default.createElement("li",{className:"blackboard-tool-option"+("tool_pencil"===s?" active":"")},S.default.createElement("button",{id:"video_blackboard_tool_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===s?" active":""),title:k.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:e.handleToolClick.bind(e,"tool_pencil")})),S.default.createElement("li",{className:"blackboard-tool-option"+("tool_text"===s?" active":""),style:{display:"none"}}," ",S.default.createElement("button",{id:"video_blackboard_tool_text",className:"tool-btn text-icon"+("tool_text"===s?" active":""),title:k.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:e.handleToolClick.bind(e,"tool_text")})),S.default.createElement("li",{className:"blackboard-tool-option"+("tool_eraser"===s?" active":"")},S.default.createElement("button",{id:"video_blackboard_tool_eraser",className:"tool-btn eraser-icon"+("tool_eraser"===s?" active":"")+(o?" disable":""),disabled:o,title:k.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:e.handleToolClick.bind(e,"tool_eraser")})),S.default.createElement("li",{className:"blackboard-tool-option colors  add-position-relative"},S.default.createElement("button",{id:"video_blackboard_tool_color",className:"tool-btn colors-icon "+(i?" active":""),onClick:e.handleToolColorsClick.bind(e),title:k.default.language.languageData.header.tool.blackBoard.boardTool.color}),S.default.createElement("div",{className:"blackboard-color-size-box pinkBg"+("phone"===k.default.mobileDeviceType?" phone":" pad"),style:{display:i?" block":"none"}},"phone"===k.default.mobileDeviceType?S.default.createElement("ul",{className:"tool-size-container",id:"blackboard_tool_size"},S.default.createElement("li",{id:"blackboard_size_small",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_small",{pencil:5,text:30,eraser:30}),className:"size-small "+("blackboard_size_small"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},S.default.createElement("span",null)),S.default.createElement("li",{id:"blackboard_size_middle",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_middle",{pencil:15,text:36,eraser:90}),className:"size-middle "+("blackboard_size_middle"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},S.default.createElement("span",null)),S.default.createElement("li",{id:"blackboard_size_big",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_big",{pencil:30,text:72,eraser:150}),className:"size-big "+("blackboard_size_big"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},S.default.createElement("span",null))):void 0,S.default.createElement("ol",{className:"colors-container"},d),"phone"===k.default.mobileDeviceType?void 0:S.default.createElement("div",{className:"tkSliderDumb-container-wrap"},S.default.createElement("p",{className:"line-width-p"},k.default.language.languageData.whiteboardSetSize.lineWidth),S.default.createElement("div",{className:"tkSliderDumb-container"},S.default.createElement(M.default,{onAfterChange:this.onAfterChangePencilWidth.bind(this),value:n.blackboardToolsInfo.pencil}))),"phone"===k.default.mobileDeviceType?void 0:S.default.createElement("div",{className:"tkSliderDumb-container-wrap"},S.default.createElement("p",{className:"line-width-p"},k.default.language.languageData.whiteboardSetSize.eraserWidth),S.default.createElement("div",{className:"tkSliderDumb-container"},S.default.createElement(M.default,{onAfterChange:this.onAfterChangeEraserWidth.bind(this),value:n.blackboardToolsInfo.eraser}))))),S.default.createElement("li",{className:"blackboard-tool-option"},S.default.createElement("button",{id:"video_blackboard_tool_exit",className:"tool-btn exit-icon",title:k.default.language.languageData.videLabel.exit,onClick:e.playMediaHandle.bind(e)}))))}}]),t}(S.default.Component);t.default=L},ix7A:function(e,t,a){a("4fCT"),e.exports=a("AKd3").Math.hypot},"k/7E":function(e,t,a){var n=a("WwGG"),i=a("kDTw"),r=a("V2W7"),o=a("93K8"),s=a("CFGK"),l=a("YW8S"),d={},u={},t=e.exports=function(e,t,a,c,h){var f,m,g,p,v=h?function(){return e}:l(e),b=n(a,c,t?2:1),S=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(r(v)){for(f=s(e.length);f>S;S++)if((p=t?b(o(m=e[S])[0],m[1]):b(e[S]))===d||p===u)return p}else for(g=v.call(e);!(m=g.next()).done;)if((p=i(g,b,m.value,t))===d||p===u)return p};t.BREAK=d,t.RETURN=u},kDTw:function(e,t,a){var n=a("93K8");e.exports=function(e,t,a,i){try{return i?t(n(a)[0],a[1]):t(a)}catch(t){var r=e.return;throw void 0!==r&&n(r.call(e)),t}}},kSVM:function(e,t,a){a("gG5W");var n=a("AKd3").Object;e.exports=function(e,t){return n.defineProperties(e,t)}},kfHR:function(e,t,a){e.exports={default:a("qQfv"),__esModule:!0}},kksE:function(e,t,a){"use strict";var n=a("lIiZ"),i=a("go9Q");e.exports=function(e,t,a){t in e?n.f(e,t,i(0,a)):e[t]=a}},lnhd:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("MgeX"),r=n(i),o=a("hRKE"),s=n(o),l=a("4YfN"),d=n(l),u=a("ZLEe"),c=n(u),h=a("Q+Ik"),f=n(h),m=a("KH7x"),g=n(m),p=a("HzJ8"),v=n(p),b=a("Yarq"),S=n(b),y=a("AA3o"),k=n(y),w=a("xSur"),T=n(w),C=a("UzKs"),D=n(C),A=a("Y7Ml"),E=n(A),I=a("RFtt"),P=n(I),R=a("T+56"),B=n(R),_=a("VSuD"),x=n(_),N=a("HUPQ"),M=n(N),W=a("DrPG"),H=(n(W),a("Sa83")),O=(n(H),a("YRCL")),z=n(O),F=a("yE5a"),U=n(F),j=a("fZJ/"),V=n(j),K=a("EXAz"),Y=n(K),q=a("sI7p"),Q=n(q),G=a("F5u0"),Z=n(G),J=function(e){function t(e){(0,k.default)(this,t);var a=(0,D.default)(this,(t.__proto__||(0,S.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.state=Object.customAssign({},a._getDefaultState(),{show:!1,moreBlackboardDrag:{pagingToolLeft:"",pagingToolTop:""},isMinimize:!1,useToolColor:void 0,isClickSetButton:!1,containerWidthAndHeight:{width:0,height:0},whiteboardWidthAndHeight:{width:0,height:0}}),a.containerWidthAndHeight={},a.isSetDefaultPosition=!1,a.isMsglist=!1,a.countNotice=0,a.msglist_BlackBoard_recvEventData={},a.blackboardCanvasBackgroundColor=a.props.blackboardCanvasBackgroundColor||"#ffffff",a.blackboardThumbnailImageId=a.props.blackboardThumbnailImageId||"blackboardThumbnailImageId",a.associatedMsgID="BlackBoard_new",a.currentTapKey=void 0,a.whiteboardMagnification=16/9,a.maxBlackboardNumber=8,a.studentBlackboardList={},a.hasNewBlackBoard=!1,a.hasUserNewBlackBoard=!1,a.titleContainerHeight=void 0,a.blackboardToolContainerHeight=void 0,a.descArray=void 0,a}return(0,E.default)(t,e),(0,T.default)(t,[{key:"componentDidMount",value:function(){var e=this;B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),B.default.Window.addEventListener(x.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomParticipantJoin,e.handlerRoomParticipantJoin.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomParticipantLeave,e.handlerRoomParticipantLeave.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-NewBlackBoard",e.handlerReceive_msglist_NewBlackBoard.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("isSendSignallingFromBlackBoardDrag",e.handlerBlackBoardDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("changeWebPageWindowSize",e.handlerChangeWebPageWindowSize.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-MoreUsers",e.handlerReceive_msglist_MoreUsers.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-UserHasNewBlackBoard",e.handlerReceive_msglist_UserHasNewBlackBoard.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),this._init()}},{key:"componentWillUnmount",value:function(){var e=this;clearTimeout(this.disabledBlackboardToolBtnTimer),B.default.Window.removeBackupListerner(e.listernerBackupid),B.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.show!==this.state.show&&this.state.show&&(this._updateContainerWidthAndHeight(),this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition())),t.blackBoardState!==this.state.blackBoardState&&(this._updateBlackBoardDescListByBlackBoardState(),this._updateContainerWidthAndHeight())}},{key:"handlerRoomConnected",value:function(e){this.maxBlackboardNumber="phone"===M.default.mobileDeviceType?3:8}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user;if(t.publishstate&&this.hasNewBlackBoard&&0!==t.publishstate&&2===a.role&&a.id===U.default.getTkRoom().getMySelf().id&&!M.default.playback&&!this.hasUserNewBlackBoard&&x.default.hasRole.roleStudent&&(!M.default.isMoreUsers&&!M.default.HeightConcurrence||0!==t.publishstate&&(M.default.isMoreUsers||M.default.HeightConcurrence))){var n={id:U.default.getTkRoom().getMySelf().id,nickname:U.default.getTkRoom().getMySelf().nickname,role:U.default.getTkRoom().getMySelf().role};z.default.sendSignallingFromUserHasNewBlackBoard(n)}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);if(n&&i){var r=(i.offsetWidth-n.offsetWidth)/2;a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{left:r,top:0,percentLeft:.5,percentTop:0,isDrag:!1},!1)}}},{key:"handlerChangeWebPageWindowSize",value:function(e){var t=e.message,a=(t.data,t.action);this._updateContainerWidthAndHeight(),"restoreWebPageWindwo"===a&&this.setState({isMinimize:!1})}},{key:"handlerRoomPlaybackClearAll",value:function(){M.default.isMoreUsers=!1,this._recoverDedaultState()}},{key:"handlerRoomDisconnected",value:function(){this._recoverDedaultState()}},{key:"handlerRoomParticipantJoin",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerRoomParticipantLeave",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerOnResize",value:function(){this._updateContainerWidthAndHeight()}},{key:"handlerResizeHandler",value:function(e){this._updateContainerWidthAndHeight()}},{key:"handlerReceive_msglist_NewBlackBoard",value:function(e){this.isMsglist=!0,this.handlerRoomPubmsg(e)}},{key:"handlerReceive_msglist_MoreUsers",value:function(e){this.handlerRoomPubmsg(e)}},{key:"handlerReceive_msglist_UserHasNewBlackBoard",value:function(e){var t=e.message,a=!0,n=!1,i=void 0;try{for(var r,o=(0,v.default)(t);!(a=(r=o.next()).done);a=!0){var s=r.value,l={};l.message=s,this.handlerRoomPubmsg(l)}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"handleCloseWhiteBoardNotice",value:function(){this.setState({show:!1})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"UserHasNewBlackBoard":t.data.id===U.default.getTkRoom().getMySelf().id&&(this.hasUserNewBlackBoard=!0),this._getstudentBlackboardList(t.data,"add"),this._updateBlackBoardDescListByBlackBoardState();break;case"MoreUsers":t.data.hasMoreUser?M.default.isMoreUsers=!0:M.default.playback&&(M.default.isMoreUsers=!1),this._updateBlackBoardDescListByBlackBoardState();break;case"BlackBoard_new":if(this.hasNewBlackBoard=!0,this.hasUserNewBlackBoard||!x.default.hasRole.roleStudent||0!==U.default.getTkRoom().getMySelf().publishstate||!M.default.isMoreUsers&&!M.default.HeightConcurrence||"_dispenseed"!==t.data.blackBoardState&&"_againDispenseed"!==t.data.blackBoardState){if((x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)&&void 0===this.state.useToolColor?this.setState({useToolColor:"#ED3E3A"}):x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||void 0!==this.state.useToolColor||this.setState({useToolColor:"#000000"}),(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol||x.default.hasRole.rolePlayback)&&"_none"!==t.data.blackBoardState||"_dispenseed"===t.data.blackBoardState||"_recycle"===t.data.blackBoardState||"_againDispenseed"===t.data.blackBoardState){if(!1===this.isMsglist&&(this.isSetDefaultPosition=!0),!M.default.playback&&x.default.hasRole.roleStudent&&!this.hasUserNewBlackBoard&&(!M.default.isMoreUsers&&!M.default.HeightConcurrence||0!==U.default.getTkRoom().getMySelf().publishstate&&(M.default.isMoreUsers||M.default.HeightConcurrence))){var a={id:U.default.getTkRoom().getMySelf().id,nickname:U.default.getTkRoom().getMySelf().nickname,role:U.default.getTkRoom().getMySelf().role};z.default.sendSignallingFromUserHasNewBlackBoard(a)}this.setState({show:!0})}var n=this.currentTapKey,i=this.state.blackBoardState;if(void 0!==t.data.currentTapKey&&(this.currentTapKey=t.data.currentTapKey),"phone"===M.default.mobileDeviceType){var r=this.descArray,o=!0,s=!1,l=void 0;try{for(var d,u=(0,v.default)((0,f.default)(r));!(o=(d=u.next()).done);o=!0){var c=d.value,h=(0,g.default)(c,2),m=h[0],p=h[1];t.data.currentTapKey===p.instanceId&&this.setState({currentTapPage:(1*m+1)/2})}}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}else void 0!==t.data.currentTapPage&&this.state.currentTapPage!==t.data.currentTapPage&&(this.state.currentTapPage=t.data.currentTapPage);this.setState({blackBoardState:t.data.blackBoardState,updateState:!this.state.updateState,currentTapPage:this.state.currentTapPage}),i===t.data.blackBoardState&&n!==t.data.currentTapKey&&(!x.default.hasRole.roleStudent||"_dispenseed"!==t.data.blackBoardState&&"_againDispenseed"!==t.data.blackBoardState)&&this._updateBlackBoardDescListByBlackBoardState()}else this.handleCloseWhiteBoardNotice()}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"BlackBoard_new":case"ClassBegin":this._recoverDedaultState();break;case"UserHasNewBlackBoard":this._getstudentBlackboardList(t.data,"delete"),this._updateBlackBoardDescListByBlackBoardState()}}},{key:"handlerBlackBoardDrag",value:function(e){var t=e.message.data;"_recycle"===this.state.blackBoardState&&z.default.sendSignallingFromBlackBoardDrag(t)}},{key:"handlerCloseClick",value:function(){var e={};z.default.sendSignallingFromNewBlackBoard(e,!0),B.default.CoreController.dispatchEvent({type:"colse_holdAll_item",message:{type:"blackboard"}})}},{key:"handlerBlackBoardDispatchClick",value:function(){var e=this,t=void 0,a=this.props,n=(a.id,a.moreBlackboardDrag),i={percentLeft:n.percentLeft,percentTop:n.percentTop,isDrag:!0};if("_prepareing"===this.state.blackBoardState)z.default.sendSignallingFromBlackBoardDrag(i),t="_dispenseed";else if("_dispenseed"===this.state.blackBoardState)z.default.sendSignallingFromBlackBoardDrag(i),t="_recycle";else if("_recycle"===this.state.blackBoardState)t="_againDispenseed";else if("_againDispenseed"===this.state.blackBoardState)z.default.sendSignallingFromBlackBoardDrag(i),t="_recycle";else if("_none"===this.state.blackBoardState)return void L.Logger.error("current blackBoardState is _none , can't execute blackBoardDispatchClick!");if(t){var r={blackBoardState:t,currentTapKey:this.currentTapKey,currentTapPage:this.state.currentTapPage};z.default.sendSignallingFromNewBlackBoard(r,!1)}this.setState({disabledBlackboardToolBtn:!0}),clearTimeout(this.disabledBlackboardToolBtnTimer),this.disabledBlackboardToolBtnTimer=setTimeout(function(){e.setState({disabledBlackboardToolBtn:!1})},300)}},{key:"handlerTabClick",value:function(e){if(void 0!==e){var t=this.descArray,a=!0,n=!1,i=void 0;try{for(var r,o=(0,v.default)((0,f.default)(t));!(a=(r=o.next()).done);a=!0){var s=r.value,l=(0,g.default)(s,2),d=l[0];if(e===l[1].instanceId)if("phone"===M.default.mobileDeviceType){var u=Math.floor((1*d+1)/2);this.setState({currentTapPage:u})}else{var c=Math.floor((1*d+1)/7);this.setState({currentTapPage:c})}}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}var h={blackBoardState:this.state.blackBoardState,currentTapKey:e,currentTapPage:this.state.currentTapPage};z.default.sendSignallingFromNewBlackBoard(h,!1)}}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||this.setState({useToolKey:e,isClickSetButton:!1})}},{key:"changeStrokeColorClick",value:function(e){this.setState({useToolColor:e,isClickSetButton:!1})}},{key:"onTapPrevOrNextClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,c.default)(this.state.blackBoardDescList).length,n=Math.ceil(a/(this.maxBlackboardNumber-1));switch(e){case"prev":this.state.currentTapPage--;break;case"next":this.state.currentTapPage++}this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>n&&(this.state.currentTapPage=n),t&&(this.state.blackBoardState,this.currentTapKey,this.state.currentTapPage),this.setState({currentTapPage:this.state.currentTapPage})}},{key:"blackboardThumbnailImageClick",value:function(){var e=document.getElementsByClassName("title-container")[0],t=document.getElementById("blackboard-tool-container");this.titleContainerHeight=e.clientHeight,this.blackboardToolContainerHeight=t.clientHeight,this.setState({isMinimize:!0})}},{key:"_init",value:function(){this._updateContainerWidthAndHeight()}},{key:"_updateContainerWidthAndHeight",value:function(){var e=document.getElementById("big_literally_wrap"),t=document.getElementById("top-header"),a=document.getElementById("blackboard-tool-container"),n=(0,d.default)({},this.state.containerWidthAndHeight),i=0===t.clientHeight?this.titleContainerHeight:t.clientHeight,r=0===a.clientHeight?this.blackboardToolContainerHeight:a.clientHeight;if("mobile"===TK.SDKTYPE){var o=void 0;if(e)if("pad"===M.default.mobileDeviceType){o=Math.floor(.9*e.clientHeight);var s=Math.floor(16*(o-i-r)/9+40);s<e.clientWidth&&o<e.clientHeight?(n.height=o,n.width=s,this.containerWidthAndHeight.height=Math.floor(o-i-r),this.containerWidthAndHeight.width=Math.floor(16*(o-i-r)/9),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight})):s>e.clientWidth&&o<e.clientHeight&&(n.height=o,n.width=e.clientWidth,this.containerWidthAndHeight.height=Math.floor(o-i-r),this.containerWidthAndHeight.width=Math.floor(e.clientWidth-40),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight}))}else{o=Math.floor(e.clientHeight);var l=Math.floor(16*(o-i-r)/9+20);l<e.clientWidth?(n.height=o,n.width=l,this.containerWidthAndHeight.height=Math.floor(e.clientHeight-i-r),this.containerWidthAndHeight.width=Math.floor(16*(o-i-r)/9),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight})):l>e.clientWidth&&(n.height=o,n.width=e.clientWidth,this.containerWidthAndHeight.height=Math.floor(e.clientHeight-i-r),this.containerWidthAndHeight.width=Math.floor(e.clientWidth-20),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight}))}}else if("pc"===TK.SDKTYPE&&e){var u=Math.floor(.9*e.clientHeight),c=Math.floor(16*(u-i-a.clientHeight)/9+40);c<e.clientWidth&&u<e.clientHeight?(n.height=u,n.width=c,this.setState({containerWidthAndHeight:n}),this.containerWidthAndHeight.height=Math.floor(.9*e.clientHeight-i-r),this.containerWidthAndHeight.width=Math.floor(16*this.containerWidthAndHeight.height/9)):c>e.clientWidth&&u<e.clientHeight&&(this.containerWidthAndHeight.height=Math.floor(9*(e.clientWidth-40)/16),this.containerWidthAndHeight.width=Math.floor(e.clientWidth-40),n.width=Math.floor(e.clientWidth),n.height=Math.floor(9*(e.clientWidth-40)/16+i+r),this.setState({containerWidthAndHeight:n}))}}},{key:"_getUser",value:function(e){var t=!1,a=!0,n=!1,i=void 0;try{for(var r,o=(0,v.default)((0,f.default)(this.studentBlackboardList));!(a=(r=o.next()).done);a=!0){var s=r.value,l=(0,g.default)(s,2),d=l[0],u=l[1];if(d===e){t={},t=u;break}}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"_updateBlackBoardDescListByBlackBoardState",value:function(){if(U.default.getTkRoom()){var e=this.state.blackBoardDescList;"blackBoardCommon"===this.currentTapKey||this._getUser(this.currentTapKey)||(this.currentTapKey="blackBoardCommon"),"_prepareing"===this.state.blackBoardState?((x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol||x.default.hasRole.rolePlayback)&&(this.currentTapKey="blackBoardCommon"),e=Object.customAssign({},this._getBlackBoardCommon())):"_dispenseed"===this.state.blackBoardState||"_againDispenseed"===this.state.blackBoardState?(x.default.hasRole.roleStudent&&(this.currentTapKey=U.default.getTkRoom().getMySelf().id),e=Object.customAssign({},this._getBlackBoardCommon(),this._getStudentBlackboard())):"_recycle"===this.state.blackBoardState?e=Object.customAssign({},this._getBlackBoardCommon(),this._getStudentBlackboard()):"_none"===this.state.blackBoardState&&(e={});var t=(0,c.default)(e).length,a=Math.ceil(t/(this.maxBlackboardNumber-1));this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>a&&(this.state.currentTapPage=a),this.setState({blackBoardDescList:e,currentTapPage:this.state.currentTapPage})}}},{key:"_getstudentBlackboardList",value:function(e,t){"add"===t?2===e.role&&(this.studentBlackboardList[e.id]=e):delete this.studentBlackboardList[e.id]}},{key:"_getStudentBlackboard",value:function(){var e={},t=!0,a=!1,n=void 0;try{for(var i,r=(0,v.default)((0,f.default)(this.studentBlackboardList));!(t=(i=r.next()).done);t=!0){var o=i.value,s=(0,g.default)(o,2),l=s[0],d=s[1];e[l]={instanceId:l,show:this.currentTapKey===l,isBaseboard:!1,deawPermission:!1,dependenceBaseboardWhiteboardID:"blackBoardCommon",needLooadBaseboard:!0,saveImage:!1,nickname:d.nickname},!x.default.role.roleStudent||"_dispenseed"!==this.state.blackBoardState&&"_againDispenseed"!==this.state.blackBoardState||U.default.getTkRoom().getMySelf().id!==l||(e[l].deawPermission=!0),"_recycle"===this.state.blackBoardState&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)&&(e[l].deawPermission=!0)}}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}return e}},{key:"_getBlackBoardCommon",value:function(e){var t={blackBoardCommon:{instanceId:"blackBoardCommon",show:"blackBoardCommon"===this.currentTapKey,isBaseboard:"_prepareing"===this.state.blackBoardState,deawPermission:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant,dependenceBaseboardWhiteboardID:void 0,needLooadBaseboard:!1,saveImage:!1,nickname:"blackBoardCommon"}};return e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&Object.customAssign(t.blackBoardCommon,e),t}},{key:"_getDefaultState",value:function(){return{blackBoardState:"_none",disabledBlackboardToolBtn:!1,blackBoardDescList:{},useToolKey:"tool_pencil",useToolColor:void 0===x.default.hasRole.roleChairman?void 0:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"#FF0000":"#000000",containerWidthAndHeight:{width:0,height:0},updateState:!1,currentTapPage:1,blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small",selectBlackboardFontSizeId:"font-36",blackboardThumbnailImage:void 0}}},{key:"_loadBlackBoardElementArray",value:function(e){var t=this,a=[],n=[],i="tool_eraser"===this.state.useToolKey?this.state.blackboardToolsInfo.eraser:this.state.blackboardToolsInfo.pencil,o=this.state.blackboardToolsInfo.text,s=[],l=void 0,d=!0,u=!1,h=void 0;try{for(var f,m=(0,v.default)((0,r.default)(e));!(d=(f=m.next()).done);d=!0){var g=f.value;"blackBoardCommon"!==g.instanceId?s.push(g):l=g}}catch(e){u=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw h}}s.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("instanceId")&&void 0!==t&&t.hasOwnProperty("instanceId")?e.instanceId<t.instanceId?-1:e.instanceId>t.instanceId?1:0:0}),l&&s.unshift(l),this.descArray=s;var p=(0,c.default)(e).length,b=void 0,S=void 0,y=Math.ceil(p/(this.maxBlackboardNumber-1));if(y>1)if(b=100/(this.maxBlackboardNumber-1),1===y||this.state.currentTapPage<y)S=(this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)*b;else{var k=y*(this.maxBlackboardNumber-1)-p;S=((this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)-k)*b}return s.forEach(function(e,r){("blackBoardCommon"===e.instanceId||"blackBoardCommon"!==e.instanceId&&U.default.getTkRoom()&&t._getUser(e.instanceId))&&(a.push(P.default.createElement("li",{className:"tab-content-option ",key:e.instanceId,style:{display:e.show?"block":"none"}},P.default.createElement(V.default,{containerWidthAndHeight:t.containerWidthAndHeight,instanceId:e.instanceId,show:e.show,isBaseboard:e.isBaseboard,deawPermission:e.deawPermission,dependenceBaseboardWhiteboardID:e.dependenceBaseboardWhiteboardID,associatedMsgID:t.associatedMsgID,associatedUserID:void 0,needLooadBaseboard:e.needLooadBaseboard,saveImage:e.saveImage,nickname:e.nickname,useToolKey:t.state.useToolKey,fontSize:o,useToolColor:t.state.useToolColor,pencilWidth:i,saveRedoStack:x.default.hasRole.roleChairman||x.default.joinRoomInfo.shapeUndoRedoClear,undoRedoClearToMySelf:x.default.hasRole.roleStudent&&x.default.joinRoomInfo.shapeUndoRedoClear,imageThumbnailId:e.show?t.state.blackboardThumbnailImage:void 0,backgroundColor:t.blackboardCanvasBackgroundColor,imageThumbnailTipContent:M.default.language.languageData.header.tool.blackBoard.content.blackboardHeadTitle,showShapeAuthor:!1}))),n.push(P.default.createElement("li",{style:{marginLeft:0===r&&void 0!==S?-S+"%":void 0,width:void 0!==b?b+"%":void 0,maxWidth:void 0!==b?b+"%":void 0,minWidth:void 0!==b?b+"%":void 0},className:"tap-option add-nowrap "+(e.show?"active":"")+(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?" ":" disabled"),key:e.instanceId,onClick:"mobile"!==TK.SDKTYPE&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)?t.handlerTabClick.bind(t,e.instanceId):void 0,onTouchStart:"mobile"===TK.SDKTYPE&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)?t.handlerTabClick.bind(t,e.instanceId):void 0},P.default.createElement("span",{className:"text add-nowrap"},"blackBoardCommon"===e.instanceId?M.default.language.languageData.header.tool.blackBoard.toolBtn.commonTeacher:t._getUser(e.instanceId).nickname))))}),{tabContentBlackBoardElementArray:a,tabBlackBoardElementArray:n}}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[];return["#5AC9FA","#FFCC00","#ED3E3A","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"].forEach(function(a,n){var i="mobile"!==TK.SDKTYPE?P.default.createElement("li",{className:"color-option color_"+e._colorFilter(a)+" "+(e.state.useToolColor===a?" active":""),key:n,onClick:e.changeStrokeColorClick.bind(e,a),id:"blackboard_color_"+e._colorFilter(a)}):P.default.createElement("li",{key:n,className:"blackboard-tool-option-mobile"},P.default.createElement("button",{id:"blackboard_color_"+e._colorFilter(a),className:"color-option color_"+e._colorFilter(a)+" "+(e.state.useToolColor===a?" active":""),onTouchStart:e.changeStrokeColorClick.bind(e,a)}));t.push(i)}),{toolColorsArray:t}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"_recoverDedaultState",value:function(){this.studentBlackboardList={},this.hasNewBlackBoard=!1,this.hasUserNewBlackBoard=!1,this.descArray=void 0,clearTimeout(this.disabledBlackboardToolBtnTimer);var e=this._getDefaultState();this.currentTapKey=void 0,this.setState(Object.customAssign({},e,{show:!1})),U.default.getTkWhiteBoardManager().destroyExtendWhiteboard("blackBoardCommon")}},{key:"handleToolClickSet",value:function(){var e=this.state.isClickSetButton;e=!e,this.setState({isClickSetButton:e})}},{key:"_changeStrokeSizeClick",value:function(e,t){this.setState({selectBlackboardToolSizeId:e,blackboardToolsInfo:Object.customAssign(this.state.blackboardToolsInfo,t)})}},{key:"_changeFontSizeClick",value:function(e,t){this.setState({selectBlackboardFontSizeId:e,blackboardToolsInfo:Object.customAssign(this.state.blackboardToolsInfo,t)})}},{key:"onAfterChangeEraserWidth",value:function(e){var t=(0,d.default)({},this.state.blackboardToolsInfo);t.eraser=e,this.setState({blackboardToolsInfo:t})}},{key:"onAfterChangePencilWidth",value:function(e){var t=(0,d.default)({},this.state.blackboardToolsInfo);t.pencil=e,this.setState({blackboardToolsInfo:t})}},{key:"render",value:function(){var e=this,t=e.state,a=t.blackBoardState,n=t.show,i=t.blackBoardDescList,r=t.containerWidthAndHeight,o=t.useToolKey,s=t.blackboardThumbnailImage,l=t.isMinimize,d=t.isClickSetButton,u=t.whiteboardWidthAndHeight,h=t.selectBlackboardFontSizeId,f=this.props,m=f.id,g=f.draggableData,p=f.moreBlackboardDrag,v=Object.customAssign({id:m,handle:".title-container",disabled:!(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||(x.default.hasRole.roleStudent||x.default.hasRole.rolePatrol)&&"_recycle"!==a),position:{x:p.left,y:p.top},percentPosition:{percentLeft:p.percentLeft,percentTop:p.percentTop}},g),b="_none"!==a?"_prepareing"===a?M.default.language.languageData.header.tool.blackBoard.toolBtn.dispenseed:"_dispenseed"===a?M.default.language.languageData.header.tool.blackBoard.toolBtn.recycle:"_recycle"===a?M.default.language.languageData.header.tool.blackBoard.toolBtn.againDispenseed:"_againDispenseed"===a?M.default.language.languageData.header.tool.blackBoard.toolBtn.recycle:"":"",S=e._loadBlackBoardElementArray(i),y=S.tabContentBlackBoardElementArray,k=S.tabBlackBoardElementArray,w=e._loadToolColorsElementArray(),T=w.toolColorsArray,C=(0,c.default)(i).length,D=Math.ceil(C/(e.maxBlackboardNumber-1)),A=!("_recycle"===a||("_dispenseed"===a||"_againDispenseed"===a)&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol||x.default.hasRole.rolePlayback)),E="mobile"===TK.SDKTYPE&&"phone"===M.default.mobileDeviceType?!(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol)&&(x.default.hasRole.rolePlayback||x.default.hasRole.rolePatrol||x.default.hasRole.roleStudent&&!("_dispenseed"===a||"_againDispenseed"===a)):x.default.hasRole.rolePlayback||x.default.hasRole.rolePatrol||x.default.hasRole.roleStudent&&!("_dispenseed"===a||"_againDispenseed"===a),I="mobile"===TK.SDKTYPE&&"phone"===M.default.mobileDeviceType;if("mobile"===TK.SDKTYPE){var R=0;"pad"===M.default.mobileDeviceType?(I||(R+=.8),A||(R+=.8),E||(R+=1.15)):"phone"===M.default.mobileDeviceType&&(A||(R+=.8))}document.getElementById("moreBlackboardDrag")&&(document.getElementById("moreBlackboardDrag").style.width=r.width+"px",document.getElementById("moreBlackboardDrag").style.height=r.height+"px");var B={display:l?"none":"block",opacity:void 0===s?void 0:0,zIndex:void 0===s?void 0:-999,width:!l&&r.width?r.width:"2.06rem",height:!l&&r.height?r.height:"1.67rem"},_={width:r.width?u.width:"1.55rem",height:u.height?u.height:0,marginLeft:r.width&&u.width?(r.width-u.width)/2:0};return P.default.createElement(Y.default,v,P.default.createElement("div",{id:m,style:{display:n?"block":"none",position:"absolute",left:0,top:0,width:!l&&r.width?r.width:"1.55rem",height:l?"1.27rem":this.state.containerWidthAndHeight.height,zIndex:112}},P.default.createElement("section",{id:m,className:"black-board-container "+(E?" hideBottom":" ")+(A?" hideTap":" ")+(I?" hideTitle":" "),style:B},P.default.createElement("article",{className:"title-container",id:"top-header",style:{cursor:(x.default.hasRole.roleStudent||x.default.hasRole.rolePatrol)&&"_recycle"===a?"default":"move",width:r.width?r.width:"1.55rem",marginLeft:r.width&&u.width?(r.width-u.width)/2:0}},P.default.createElement("article",{className:"tap-container clear-float",style:{display:A?"none":""}},P.default.createElement("ul",{className:"tap add-fl clear-float"},k),P.default.createElement("button",{className:"prev add-fl "+(e.state.currentTapPage<=1?"disabled":""),disabled:e.state.currentTapPage<=1,style:{display:C<e.maxBlackboardNumber?"none":""},title:M.default.language.languageData.header.tool.blackBoard.title.prev,onClick:e.state.currentTapPage<=1?void 0:e.onTapPrevOrNextClick.bind(e,"prev",!0)}),P.default.createElement("button",{className:"next add-fr "+(e.state.currentTapPage>=D?"disabled":""),disabled:e.state.currentTapPage>=D,style:{display:C<e.maxBlackboardNumber?"none":""},title:M.default.language.languageData.header.tool.blackBoard.title.next,onClick:e.state.currentTapPage>=D?void 0:e.onTapPrevOrNextClick.bind(e,"next",!0)})),P.default.createElement("div",{className:"minimize-and-close-wrap-div"},P.default.createElement("button",{className:"blackboard-thumbnail-image "+(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"":" right"),onClick:e.blackboardThumbnailImageClick.bind(e,{action:"shrink"}),title:M.default.language.languageData.header.tool.blackBoard.title.shrink}),P.default.createElement("button",{style:{display:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"":"none"},className:"blackboard-close-image",disabled:this.state.disabledBlackboardToolBtn,onClick:e.handlerCloseClick.bind(e),title:M.default.language.languageData.header.tool.blackBoard.title.close}))),P.default.createElement("article",{className:"tab-content-container",id:"blackboardContentBox",style:_},P.default.createElement("ul",{className:"tab-content clear-float overflow-hidden",style:{width:"100%",height:"100%"}},y)),P.default.createElement("article",{id:"blackboard-tool-container",className:"blackboard-tool-container clear-float",style:{width:"100%"}},P.default.createElement("ul",{className:"blackboard-tool clear-float",style:{display:x.default.hasRole.rolePlayback||x.default.hasRole.rolePatrol||x.default.hasRole.roleStudent&&"_dispenseed"!==a&&"_againDispenseed"!==a?"none":"",marginLeft:r.width&&u.width?(r.width-u.width)/2:0}},P.default.createElement("li",{className:"blackboard-tool-option"},P.default.createElement("button",{id:"blackboard_tool_vessel_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===o?" active":""),title:M.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:e.handleToolClick.bind(e,"tool_pencil")})),P.default.createElement("li",{className:"blackboard-tool-option",style:{display:"ios"===M.default.clientType?"none":""}},P.default.createElement("button",{id:"blackboard_tool_vessel_text",className:"tool-btn text-icon"+("tool_text"===o?" active":""),title:M.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:e.handleToolClick.bind(e,"tool_text")})),P.default.createElement("li",{className:"blackboard-tool-option"},P.default.createElement("button",{id:"blackboard_tool_vessel_eraser",className:"tool-btn eraser-icon"+("tool_eraser"===o?" active":""),title:M.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:e.handleToolClick.bind(e,"tool_eraser")})),P.default.createElement("li",{className:"blackboard-tool-option colors  add-position-relative"},P.default.createElement("button",{id:"blackboard_tool_vessel_color",className:"tool-btn colors-icon"+(d?" active":""),title:M.default.language.languageData.header.tool.blackBoard.boardTool.color,onClick:e.handleToolClickSet.bind(e,"tool_color")},P.default.createElement("span",{className:"current-color"})),P.default.createElement("div",{className:"blackboard-color-size-box",style:{display:d?"block":"none"}},"phone"===M.default.mobileDeviceType?P.default.createElement("ul",{className:"tool-size-container",id:"blackboard_tool_size"},P.default.createElement("li",{id:"blackboard_size_small",onTouchStart:e._changeStrokeSizeClick.bind(e,"blackboard_size_small",{pencil:5,text:30,eraser:30}),className:"size-small "+("blackboard_size_small"===this.state.selectBlackboardToolSizeId?"active":"")},P.default.createElement("span",null)),P.default.createElement("li",{id:"blackboard_size_middle",onTouchStart:e._changeStrokeSizeClick.bind(e,"blackboard_size_middle",{pencil:15,text:36,eraser:90}),className:"size-middle "+("blackboard_size_middle"===this.state.selectBlackboardToolSizeId?"active":"")},P.default.createElement("span",null)),P.default.createElement("li",{id:"blackboard_size_big",onTouchStart:e._changeStrokeSizeClick.bind(e,"blackboard_size_big",{pencil:30,text:72,eraser:150}),className:"size-big "+("blackboard_size_big"===this.state.selectBlackboardToolSizeId?"active":"")},P.default.createElement("span",null))):void 0,P.default.createElement("ol",{className:"colors-container"},T),"phone"===M.default.mobileDeviceType?void 0:P.default.createElement("div",{className:"font-container"},P.default.createElement("div",{className:"font-size-container"},P.default.createElement("span",{className:"font-size-list"},P.default.createElement("button",{className:"font-size-option font-size-36"+("font-36"===h?" active":""),"data-font-size":"36",onTouchStart:e._changeFontSizeClick.bind(e,"font-36",{pencil:this.state.blackboardToolsInfo.pencil,text:36,eraser:this.state.blackboardToolsInfo.eraser})},"36",M.default.language.languageData.fontSize.number)),P.default.createElement("span",{className:"font-size-list"},P.default.createElement("button",{className:"font-size-option font-size-48"+("font-48"===h?" active":""),"data-font-size":"48",onTouchStart:e._changeFontSizeClick.bind(e,"font-48",{pencil:this.state.blackboardToolsInfo.pencil,text:48,eraser:this.state.blackboardToolsInfo.eraser})},"48",M.default.language.languageData.fontSize.number)),P.default.createElement("span",{className:"font-size-list"},P.default.createElement("button",{className:"font-size-option font-size-72"+("font-72"===h?" active":""),"data-font-size":"72",onTouchStart:e._changeFontSizeClick.bind(e,"font-72",{pencil:this.state.blackboardToolsInfo.pencil,text:72,eraser:this.state.blackboardToolsInfo.eraser})},"72",M.default.language.languageData.fontSize.number)))),"phone"===M.default.mobileDeviceType?void 0:P.default.createElement("div",{className:"tkSliderDumb-container-wrap"},P.default.createElement("p",{className:"line-width-p"},M.default.language.languageData.whiteboardSetSize.lineWidth),P.default.createElement("div",{className:"tkSliderDumb-container"},P.default.createElement(Z.default,{onAfterChange:this.onAfterChangePencilWidth.bind(this)}))),"phone"===M.default.mobileDeviceType?void 0:P.default.createElement("div",{className:"tkSliderDumb-container-wrap"},P.default.createElement("p",{className:"line-width-p"},M.default.language.languageData.whiteboardSetSize.eraserWidth),P.default.createElement("div",{className:"tkSliderDumb-container"},P.default.createElement(Z.default,{onAfterChange:this.onAfterChangeEraserWidth.bind(this)})))))),P.default.createElement("span",{className:"blackboard-function-btn-container"},P.default.createElement("button",{style:{display:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"":"none"},className:"blackboard-send-btn "+(this.state.disabledBlackboardToolBtn?"disabled":""),disabled:this.state.disabledBlackboardToolBtn,onClick:e.handlerBlackBoardDispatchClick.bind(e)},b)))),P.default.createElement(Q.default,{isMinimize:l,action:"blackboardThumbnailImageId",msgTitle:M.default.language.languageData.header.tool.blackBoard.content.blackboardHeadTitle})))}}]),t}(P.default.Component);t.default=J},"m/zC":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.webRequestFail=t.webRequestSuccess=void 0;var i=a("3cXf"),r=n(i),o=a("AA3o"),s=n(o),l=a("xSur"),d=n(l),u=a("VSuD"),c=n(u),h=a("HUPQ"),f=(n(h),a("T+56")),m=n(f),g=t.webRequestSuccess=1,p=t.webRequestFail=0,v=function(){function e(){(0,s.default)(this,e)}return(0,d.default)(e,[{key:"baseAjax",value:function(e,t){t=t||{},t.ajaxHandlerCallback=function(t,a){if(e.handlerEventKey){var n={type:c.default.EVENTTYPE.WebDaoEvent[e.handlerEventKey]};if(t&&!a)n.message={error:t,requestResult:p};else if(a&&(n.message={response:a,requestResult:g},e.excessResponseResultJson))for(var i in e.excessResponseResultJson)n.message[i]=e.excessResponseResultJson[i];m.default.HandlerWebDaoInterface.dispatchEvent(n)}else L.Logger.error("requestJson not handlerEventKey!",(0,r.default)(e))},$.ajax({type:e.type||"post",url:e.url,dataType:e.dataType||"json",async:e.async||!1,data:e.data}).done(function(a){L.Logger.debug((e.remark?"["+e.remark+"]":"")+"success:ajax request  response:",a),t&&t.doneCallback&&"function"==typeof t.doneCallback?t.doneCallback(a):t.ajaxHandlerCallback(void 0,a)}).fail(function(a){L.Logger.error((e.remark?"["+e.remark+"]":"")+"fail:ajax request  error:",a),t&&t.failCallback&&"function"==typeof t.failCallback?t.failCallback(a):t.ajaxHandlerCallback(a,void 0)})}},{key:"getFileRemark",value:function(e,t){var a=this,n={fileid:e},i={type:"post",url:c.default.SERVICEINFO.address+"/ClientAPI/getfileremark?ts="+(new Date).getTime(),data:n,async:!0,handlerEventKey:"getfileremark",remark:"获取课件备注"};a.baseAjax(i,t)}},{key:"getSimplifyAnswer",value:function(e,t){var a=e.id,n=e.page,i=this,r={serial:c.default.joinRoomInfo.serial,id:a,page:n},o={type:"post",url:c.default.SERVICEINFO.address+"/ClientAPI/simplifyAnswer?ts="+(new Date).getTime(),data:r,async:!0,handlerEventKey:"getSimplifyAnswer",remark:"获取答题详情"};i.baseAjax(o,t)}}]),e}(),b=new v;t.default=b},m0xB:function(e,t,a){a("cX6w"),e.exports=a("AKd3").Object.entries},my5g:function(e,t,a){a("fh91"),e.exports=a("AKd3").Object.getPrototypeOf},oKdf:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HzJ8"),r=n(i),o=a("X1IT"),s=n(o),l=a("Yarq"),d=n(l),u=a("AA3o"),c=n(u),h=a("xSur"),f=n(h),m=a("UzKs"),g=n(m),p=a("Y7Ml"),v=n(p),b=a("RFtt"),S=n(b),y=a("HUPQ"),k=n(y),w=a("VSuD"),T=n(w),C=a("T+56"),D=n(C),A=a("YRCL"),E=n(A),I=a("EXAz"),P=n(I),R=a("MNBs"),B=n(R),_=a("U8JZ"),x=n(_),N=function(e){function t(e){(0,c.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state={answerTeachWrapDiv:!1,resizeInfo:{width:0,height:0},isaMinimize:!1,addClass:""},a.isSetDefaultPosition=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;D.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;D.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.answerTeachWrapDiv!==this.state.answerTeachWrapDiv&&this.state.answerTeachWrapDiv&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition()),this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=k.default.windowInnerWidth/T.default.STANDARDSIZE,n=t.offsetWidth/a,i=t.offsetHeight/a;!this.state.resizeInfo||(0,s.default)(this.state.resizeInfo.width,n)&&(0,s.default)(this.state.resizeInfo.height,i)||(this.state.resizeInfo={width:n,height:i},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);if(n&&i){var r=(i.offsetWidth-n.offsetWidth)/2;a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{left:r,top:0,percentLeft:.5,percentTop:0,isDrag:!1},!0)}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"answer":T.default.hasRole.roleStudent?t._studentRecevedServiceDataShow(a):t._teacherRecevedServiceDataShow(a)}}},{key:"handlerMsglistAnswerShow",value:function(e){var t=this,a=!0,n=!1,i=void 0;try{for(var o,s=(0,r.default)(e.message.answerShowArr);!(a=(o=s.next()).done);a=!0){var l=o.value;T.default.hasRole.roleStudent?t._studentRecevedServiceDataShow(l):t._teacherRecevedServiceDataShow(l)}}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"_teacherRecevedServiceDataShow",value:function(e){var t=this;this.isSetDefaultPosition=!0,t.setState({answerTeachWrapDiv:!0})}},{key:"_studentRecevedServiceDataShow",value:function(e){e.data.isShow?this.setState({answerTeachWrapDiv:!1}):this.setState({answerTeachWrapDiv:!0})}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"answer":t.setState({isaMinimize:!1,answerTeachWrapDiv:!1});break;case"ClassBegin":t.setState({isaMinimize:!1,answerTeachWrapDiv:!1})}}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!k.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this.clearTeacherShowData()}},{key:"clearTeacherShowData",value:function(){clearInterval(this.stop),document.getElementById("result-teach-mytime").textContent="00:00:00",this.setState({allStudentChosseAnswer:{},allStudentName:[],numz:0,publishedWarning:"none",tableObject:{},tableArry:[],endQuestion:"block",studentNumbers:[],restartQuestion:"none",answerTeachWrapDiv:!1,resultTeachDisplay:"none",beginStyle:"#aa91e5",brr:[],crr:[],initArr:[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],afterArray:[],afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],trueLV:0,allNumbers:0,idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[],trueNum:0,plusStyle:"#913706",reduceStyle:"#913706"})}},{key:"answerTeachCloseHandel",value:function(){if(T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant){var e={};E.default.sendSignallingAnswerToStudent(e,!0),D.default.CoreController.dispatchEvent({type:"colse_holdAll_item",message:{type:"answer"}})}this.setState({addClass:""})}},{key:"answerTeachMinimizeHandel",value:function(){var e=!this.state.isaMinimize;this.setState({isaMinimize:e,answerTeachWrapDiv:!e})}},{key:"addClass",value:function(){this.setState({addClass:"answering"})}},{key:"removeClass",value:function(){this.setState({addClass:""})}},{key:"render",value:function(){var e=this.state.resizeInfo,t=this.props,a=t.id,n=t.answerDrag,i=t.draggableData,r={position:"absolute",zIndex:130,display:"inline-block",left:0,top:0},o=Object.customAssign({id:a,size:e,percentPosition:{percentLeft:n.percentLeft,percentTop:n.percentTop}},i);return S.default.createElement(P.default,o,S.default.createElement("div",{id:"answerDrag",className:"answer-box",style:r},S.default.createElement("div",{className:"answer-component-div "+this.state.addClass+(T.default.hasRole.roleStudent?" studentAnswer":""),style:{display:this.state.answerTeachWrapDiv?"block":"none"}},S.default.createElement("div",{className:"answer-teach-header"}," ",S.default.createElement("div",null),S.default.createElement("div",{className:"answer-teach-header-title"+(T.default.hasRole.roleStudent?" answer-student-header-title":"")},k.default.language.languageData.answers.headerTopLeft.text),T.default.hasRole.roleStudent||T.default.hasRole.rolePatrol?S.default.createElement("div",{className:"answer-teach-header-minimize answer-student-teach-header-minimize",onClick:this.answerTeachMinimizeHandel.bind(this)}):S.default.createElement("div",{className:"answer-teach-header-right"},S.default.createElement("span",{className:"answer-teach-header-minimize",onClick:this.answerTeachMinimizeHandel.bind(this)}),S.default.createElement("span",{className:"answer-teach-header-close",onClick:this.answerTeachCloseHandel.bind(this)}))),S.default.createElement(B.default,{callback:this.removeClass.bind(this),addClass:this.addClass.bind(this)}),S.default.createElement(x.default,{callback:this.removeClass.bind(this),addClass:this.addClass.bind(this)})),S.default.createElement("div",{className:"minimize-div",style:{display:this.state.isaMinimize?"":"none"}},S.default.createElement("p",null,k.default.language.languageData.answers.headerTopLeft.text),S.default.createElement("button",{onClick:this.answerTeachMinimizeHandel.bind(this)}))))}}]),t}(S.default.Component);t.default=N},oMO2:function(e,t,a){a("A1pn"),a("IsPG"),e.exports=a("tcIe")},ocoG:function(e,t){},oltR:function(e,t,a){"use strict";var n=a("MxwP"),i=a("27tL");e.exports=a("4HpA")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},ppOE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={header:{tool:{blackBoard:{title:{open:"小白板",close:"关闭",prev:"上一位",next:"下一位",shrink:"缩小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分发",recycle:"回收",againDispenseed:"再次分发",commonTeacher:"老师"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"笔",text:"文字",eraser:"橡皮",color:"颜色及粗细"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠标"},pencil:{title:"笔",pen:{text:"铅笔工具"},Highlighter:{text:"荧光笔工具"},linellae:{text:"线条工具"},arrow:{text:"箭头工具"},laser:{title:"激光笔",text:"激光笔工具"}},text:{title:"文字",Msyh:{text:"微软雅黑"},Ming:{text:"宋体"},Arial:{text:"Arial"}},shape:{title:"形状",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心椭圆"},filledCircle:{text:"椭圆"}},eraser:{title:"橡皮擦"},undo:{title:"撤销"},redo:{title:"恢复"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"缩小"},tool_rotate_left:{title:"逆时针旋转"},tool_rotate_right:{title:"顺时针旋转"},colorAndMeasure:{title:"颜色及粗细",selectColorText:"选择颜色",selectMeasure:"选择粗细"},colors:{title:"颜色"},measure:{title:"粗细"}},page:{prev:{text:"上一页"},next:{text:"下一页"},add:{text:"加页"},lcFullBtn:{title:"绘制区域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5课件全屏"},skipPage:{text_one:"至第",text_two:"页"},ok:{text:"确定"},coursewareRemarks:{title:"课件备注"}},volume:{title:"音量"}},alertWin:{ok:{showError:{text:"确定"},showPrompt:{text:"确定"},showConfirm:{cancel:"取消",ok:"确定"}},title:{showError:{text:"错误信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"确认消息"}},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"计时器"},timerBegin:{text:"开始"},timerStop:{text:"暂停"},again:{text:"重新开始"}},dial:{turntable:{text:"转盘"}},answers:{headerTopLeft:{text:"答题器"},headerMiddel:{text:"点击字母预设正确答案"},beginAnswer:{text:"开始答题"},tureAccuracy:{text:"正确率"},add:{text:"添加答案"},reduce:{text:"删除答案"},people:{text:"人"},trueAnswer:{text:"正确答案"},endAnswer:{text:"结束答题"},restarting:{text:"重新开始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"请至少选择一个答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答题人数"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"详情"},statistics:{text:"统计"},student:{text:"学生"},TheSelectedTheAnswer:{text:"所选答案"},AnswerTime:{text:"用时"},end:{text:"请先结束答题"},selectedAnswer:{text:"所选答案"}},responder:{responder:{text:"抢答器"},begin:{text:"开始抢答"},restart:{text:"重新开始"},clickTitle:{text:"点击按钮开始抢答"},somebodyTeacher:{text:"有人抢中"},my:{text:"恭喜您已抢中"},other:{text:"已抢中"},inAnswerTitle:{text:"抢答中..."},inAnswerBtn:{text:"抢答中"},inAnswerStudent:{text:"准备抢答"},noContest:{text:"无人抢答"}},videLabel:{exit:"退出"},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}},coursewareRemarks:{remarks:"备注",close:"关闭"},moreUser:{text:"当前场景下，上台学生才可使用小白板！"},qPanel:{answerPanel:"答题器",tips:["点击字母预设正确答案","请选择答案"],addOption:"添加答案",delOption:"删除答案",start:"开始答题",end:"结束答题",restart:"重新开始",rightOptionIs:"正确答案是",hasPub:"已公布",answerNum:"答题人数",people:"人",commitAnswer:"提交答案",modifyAnswer:"修改答案",detail:"详情",statistics:"统计",useTime:"用时",choseAnswer:"所选答案",myAnswer:"我的答案",pubResult:"公布结果",loading:"暂无数据"},whiteboardSetSize:{lineWidth:"线条宽度",eraserWidth:"橡皮擦大小"},fontSize:{number:"号"}};t.default=n},qQfv:function(e,t,a){a("IsPG"),a("yrDz"),e.exports=a("AKd3").Array.from},qVFD:function(e,t){},rPQW:function(e,t){},rkp3:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("X1IT"),r=n(i),o=a("Q+Ik"),s=n(o),l=a("HzJ8"),d=n(l),u=a("KH7x"),c=n(u),h=a("4YfN"),f=n(h),m=a("a3Yh"),g=n(m),p=a("Yarq"),v=n(p),b=a("AA3o"),S=n(b),y=a("xSur"),k=n(y),w=a("UzKs"),T=n(w),C=a("Y7Ml"),D=n(C),A=a("RFtt"),E=n(A),I=a("yE5a"),P=n(I),R=a("T+56"),B=n(R),_=a("HUPQ"),x=n(_),N=a("Sa83"),M=(n(N),a("YRCL")),L=n(M),W=a("DrPG"),H=(n(W),a("cSSE")),O=n(H),z=a("lnhd"),F=n(z),U=a("sI7p"),j=n(U),V=a("Z5jD"),K=n(V),Y=a("iCxh"),q=n(Y),Q=a("oKdf"),G=(n(Q),a("hHPy")),Z=n(G),J=a("dtxI"),X=n(J),$=a("JfkP"),ee=n($),te=a("/Ml/"),ae=n(te),ne=a("yms7"),ie=n(ne),re=a("NZEr"),oe=n(re),se=a("iHfv"),le=n(se),de=a("VSuD"),ue=n(de),ce=function(e){function t(e){(0,S.default)(this,t);var a=(0,T.default)(this,(t.__proto__||(0,v.default)(t)).call(this,e));return a.state={updateState:!1,mainContentLayerIsShow:!1,captureImgInfos:{},selectMouse:!0,dragPosition:{},eleResizeInfos:{},useToolInfo:{useToolKey:"tool_pencil",useToolColor:"#FF0000",blackboardToolsInfo:{pencil:5,text:18,eraser:30,shape:5}},mobileDeviceType:null},a.listCaptureImgResizeArray=null,a.eleInitResizeInfos={},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,D.default)(t,e),(0,k.default)(t,[{key:"componentWillMount",value:function(){this.initDragData()}},{key:"componentDidMount",value:function(){var e=this;B.default.CoreController.addEventListener(ue.default.EVENTTYPE.RoomEvent.roomUpdateFakeJsSdkInitInfo,e.roomUpdateFakeJsSdkInitInfo.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(ue.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(ue.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-DialDrag",e.handlerMsglistDialDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-TimerDrag",e.handlerMsglistTimerDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-AnswerDrag",e.handlerMsglistAnswerDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-ResponderDrag",e.handlerMsglistResponderDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-CaptureImg",e.handlerMsglistCaptureImg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-CaptureImgDrag",e.handlerMsglistCaptureImgDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-CaptureImgResize",e.handlerMsglistCaptureImgResize.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receiveWhiteboardSDKAction",e.receiveWhiteboardSDKAction.bind(e),e.listernerBackupid),P.default.getTkRoom()&&P.default.getTkRoom().onPageFinished&&P.default.getTkRoom().onPageFinished()}},{key:"componentWillUnmount",value:function(){B.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"roomUpdateFakeJsSdkInitInfo",value:function(e){var t=e.message.deviceType;this.setState({mobileDeviceType:t})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"DialDrag":Object.customAssign(this.state.dialDrag,t.data),this.setState({dialDrag:this.state.dialDrag});break;case"TimerDrag":Object.customAssign(this.state.timerDrag,t.data),Object.customAssign(this.state.studentTimerDrag,t.data),this.setState({timerDrag:this.state.timerDrag,studentTimerDrag:this.state.studentTimerDrag});break;case"AnswerDrag":Object.customAssign(this.state.answerDrag,t.data),Object.customAssign(this.state.studentAnswerDrag,t.data),this.setState({answerDrag:this.state.answerDrag,studentAnswerDrag:this.state.studentAnswerDrag});break;case"ResponderDrag":Object.customAssign(this.state.responderDrag,t.data),Object.customAssign(this.state.studentResponderDrag,t.data),this.setState({responderDrag:this.state.responderDrag,studentResponderDrag:this.state.studentResponderDrag});break;case"CaptureImgDrag":t.data.position&&t.data.id&&this.state[t.data.id]&&this.setState((0,g.default)({},t.data.id,Object.customAssign({},t.data.position)));break;case"CaptureImg":if(t.data.captureImgInfo&&t.data.remSize){var a=window.innerWidth/ue.default.STANDARDSIZE,n=t.data.remSize,i="captureImg_"+t.data.captureImgInfo.fileid,r={width:n.width*a,height:n.height*a};this.setInitResize(i,r,.04);var o=t.data.captureImgInfo;this.handleCaptureImg(o)}break;case"CaptureImgResize":if(t.data.scale&&t.data.id){var s=t.data.scale;if(this.state.eleResizeInfos&&this.eleInitResizeInfos){var l=this.eleInitResizeInfos[t.data.id],d=l.width,u=l.height,c=d*s,h=u*s;this.state.eleResizeInfos[t.data.id]={width:c,height:h},this.setState({eleResizeInfos:this.state.eleResizeInfos})}}}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"CaptureImg":if(t.id.startsWith("CaptureImg_")){var a=t.id.split("_")[1],n=(0,f.default)({},this.state.captureImgInfos);delete n[a],this.setState({captureImgInfos:n})}break;case"ClassBegin":this.setState({captureImgInfos:{}})}}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=e.message,a=t.action,n=t.cmd,i=(0,f.default)({},this.state.useToolInfo);switch(a){case"viewStateUpdate":for(var r in n.viewState)switch(r){case"other":i.blackboardToolsInfo.pencilWidth=n.viewState.other.pencilWidth,i.blackboardToolsInfo.shapeWidth=n.viewState.other.shapeWidth,i.blackboardToolsInfo.eraserWidth=n.viewState.other.eraserWidth,i.blackboardToolsInfo.fontSize=n.viewState.other.fontSize,i.useToolColor=n.viewState.other.primaryColor,this.setState({useToolInfo:i});break;case"tool":var o=n.viewState[r],l=!0,u=!1,h=void 0;try{for(var m,g=(0,d.default)((0,s.default)(o));!(l=(m=g.next()).done);l=!0){var p=m.value,v=(0,c.default)(p,2),b=v[0],S=v[1];"tool_mouse"===b&&this.setState({selectMouse:o[b].isUse}),S.isUse&&(i.useToolKey=b,this.setState({useToolInfo:i}))}}catch(e){u=!0,h=e}finally{try{!l&&g.return&&g.return()}finally{if(u)throw h}}}}}},{key:"handlerMsglistDialDrag",value:function(e){var t=this;e.message.DialDragArray.map(function(e,a){Object.customAssign(t.state.dialDrag,e.data),t.setState({dialDrag:t.state.dialDrag})})}},{key:"handlerMsglistTimerDrag",value:function(e){var t=this;e.message.TimerDragArray.map(function(e,a){Object.customAssign(t.state.timerDrag,e.data),Object.customAssign(t.state.studentTimerDrag,e.data),t.setState({timerDrag:t.state.timerDrag,studentTimerDrag:t.state.studentTimerDrag})})}},{key:"handlerMsglistAnswerDrag",value:function(e){var t=this;e.message.AnswerDragArray.map(function(e,a){Object.customAssign(t.state.answerDrag,e.data),Object.customAssign(t.state.studentAnswerDrag,e.data),t.setState({answerDrag:t.state.answerDrag,studentAnswerDrag:t.state.studentAnswerDrag})})}},{key:"handlerMsglistResponderDrag",value:function(e){var t=this;e.message.ResponderDragArray.map(function(e,a){Object.customAssign(t.state.responderDrag,e.data),Object.customAssign(t.state.studentResponderDrag,e.data),t.setState({responderDrag:t.state.responderDrag,studentResponderDrag:t.state.studentResponderDrag})})}},{key:"handlerMsglistCaptureImg",value:function(e){var t=this,a=e.message.CaptureImgArray,n={};a.map(function(e,a){if(e.data.captureImgInfo){var i=e.data.captureImgInfo,r=i.fileid;n[r]=i,t.setState({captureImgInfos:n});var o=window.innerWidth/ue.default.STANDARDSIZE,s=e.data.remSize,l="captureImg_"+e.data.captureImgInfo.fileid,d={width:s.width*o,height:s.height*o};t.setInitResize(l,d,.04)}})}},{key:"handlerMsglistCaptureImgDrag",value:function(e){var t=this;e.message.CaptureImgDragArray.map(function(e,a){e.data.position&&e.data.id&&t.state[e.data.id]&&(Object.customAssign(t.state[e.data.id],e.data.position),t.setState((0,g.default)({},e.data.id,t.state[e.data.id])))})}},{key:"handlerMsglistCaptureImgResize",value:function(e){var t=this,a=e.message.CaptureImgResizeArray;a&&a.map(function(e,a){if(e.data.scale&&e.data.id){var n=e.data.scale;if(t.state.eleResizeInfos&&t.eleInitResizeInfos){var i=t.eleInitResizeInfos[e.data.id],r=i.width,o=i.height,s=r*n,l=o*n;t.state.eleResizeInfos[e.data.id]={width:s,height:l},t.setState({eleResizeInfos:t.state.eleResizeInfos})}}})}},{key:"callAllWrapOnClick",value:function(e){B.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"handleCaptureImg",value:function(e){var t=e.fileid,a=(0,f.default)({},this.state.captureImgInfos);a[t]=e,this.setState({captureImgInfos:a})}},{key:"_getCaptureImgEleArr",value:function(e){var t=[],a=!0,n=!1,i=void 0;try{for(var r,o=(0,d.default)((0,s.default)(e));!(a=(r=o.next()).done);a=!0){var l=r.value,u=(0,c.default)(l,2),h=u[0],f=u[1];this.state["captureImg_"+h]||(this.state["captureImg_"+h]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}),this.state.eleResizeInfos&&!this.state.eleResizeInfos["captureImg_"+h]&&(this.state.eleResizeInfos["captureImg_"+h]={width:0,height:0}),this.eleInitResizeInfos&&!this.eleInitResizeInfos["captureImg_"+h]&&(this.eleInitResizeInfos["captureImg_"+h]={width:0,height:0,eleInitResizeInfos:1});var m={percentPosition:this.state["captureImg_"+h],defaultSize:this.eleInitResizeInfos["captureImg_"+h],size:this.state.eleResizeInfos["captureImg_"+h],changeEleReSize:this.changeEleReSize.bind(this),onPanStart:this.onPanStart.bind(this),onPanEnd:this.onPanEnd.bind(this),onPinchStart:this.onPinchStart.bind(this),onPinch:this.onPinch.bind(this),onPinchEnd:this.onPinchEnd.bind(this)};t.push(E.default.createElement(ie.default,{key:h,id:"captureImg_"+h,captureImgInfo:f,dragData:m,useToolInfo:this.state.useToolInfo,sendSignallingOfDrag:this.sendSignallingOfDrag.bind(this),changeLayerIsShow:this.changeLayerIsShow.bind(this),selectMouse:this.state.selectMouse}))}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"changeLayerIsShow",value:function(e){this.setState({mainContentLayerIsShow:e})}},{key:"setInitResize",value:function(e,t,a){var n=(0,f.default)({},t),i=n.width/n.height,r=x.default.windowInnerWidth/ue.default.STANDARDSIZE,o=void 0,s=void 0;if("pc"===TK.SDKTYPE){var l=document.getElementById("lc-full-vessel");o=l.clientWidth,s=l.clientHeight}else o=x.default.windowInnerWidth,s=x.default.windowInnerHeight;return(n.width>o-2*a*r||n.height>s-2*a*r)&&(i>o/s?(n.width=o-2*a*r,n.height=n.width/i):(n.height=s-2*a*r,n.width=n.height*i)),this.eleInitResizeInfos[e]={width:n.width/r,height:n.height/r,originalResizeScale:i},this.state.eleResizeInfos[e]={width:n.width/r,height:n.height/r},this.setState({eleResizeInfos:this.state.eleResizeInfos}),n}},{key:"changeEleReSize",value:function(e,t){this.state.eleResizeInfos[e]=t,this.setState({eleResizeInfos:this.state.eleResizeInfos})}},{key:"sendSignallingOfResize",value:function(e){if(e.startsWith("captureImg_")){var t=e.split("_")[1],a={id:e,scale:this.state.eleResizeInfos[e].width/this.eleInitResizeInfos[e].width},n="CaptureImgResize_"+t,i="CaptureImg_"+t;L.default.sendSignallingFromCaptureImgResize(a,n,i)}}},{key:"initDragData",value:function(){var e=this;["moreBlackboardDrag","page_wrap","lc_tool_container","timerDrag","studentTimerDrag","dialDrag","answerDrag","studentAnswerDrag","responderDrag","studentResponderDrag","coursewareRemarks","holdAllBox"].map(function(t,a){e.state[t]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}})}},{key:"changePosition",value:function(e,t,a){t&&e&&(Object.customAssign(this.state[e],t),this.setState((0,g.default)({},e,this.state[e])),a&&this.sendSignallingOfDrag(e))}},{key:"sendSignallingOfDrag",value:function(e){var t=this.state[e],a=t.percentLeft,n=t.percentTop,i={percentLeft:a,percentTop:n,isDrag:!0};if(e.startsWith("captureImg_")){var r=e.split("_")[1],o={id:e,position:i},s="CaptureImgDrag_"+r,l="CaptureImg_"+r;L.default.sendSignallingFromCaptureImgDrag(o,s,l)}else switch(e){case"timerDrag":case"studentTimerDrag":L.default.sendSignallingFromTimerDrag(i);break;case"moreBlackboardDrag":B.default.CoreController.dispatchEvent({type:"isSendSignallingFromBlackBoardDrag",message:{data:i}});break;case"dialDrag":L.default.sendSignallingFromDialDrag(i);break;case"responderDrag":L.default.sendSignallingFromResponderDrag(i);break;case"answerDrag":L.default.sendSignallingFromAnswerDrag(i)}}},{key:"onPanStart",value:function(e){}},{key:"onPanEnd",value:function(e,t,a,n){!n||""===n||(0,r.default)(this.state[n].percentLeft,a.percentLeft)&&(0,r.default)(this.state[n].percentTop,a.percentTop)||(Object.customAssign(this.state[n],t,a),this.state[n].isDrag=!0,this.setState((0,g.default)({},n,this.state[n])),this.sendSignallingOfDrag(n))}},{key:"onPinchStart",value:function(e){}},{key:"onPinch",value:function(e,t,a){this.changeEleReSize(t,Object.customAssign({},a))}},{key:"onPinchEnd",value:function(e,t,a){this.sendSignallingOfResize(t),this.sendSignallingOfDrag(t)}},{key:"bbb",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.captureImgInfos,n=t.mainContentLayerIsShow,i=t.mobileDeviceType,r={bounds:"pc"===TK.SDKTYPE?"#lc-full-vessel":"#tk_app",onPanStart:this.onPanStart.bind(this),onPanEnd:this.onPanEnd.bind(this),changePosition:this.changePosition.bind(this),changeLayerIsShow:this.changeLayerIsShow.bind(this)};return E.default.createElement("section",{className:"app-mobile  all-container "+("phone"===x.default.mobileDeviceType||("videoDrawWhiteboardComponent"===x.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===x.default.clientComponentName)&&"phone"===i?"phone":"pad")+("videoDrawWhiteboardComponent"===x.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===x.default.clientComponentName?" remove-background":"")+("ios"===x.default.clientType?" temporary-hide":""),onTouchStart:this.callAllWrapOnClick.bind(this)},"mainContentComponent"===x.default.clientComponentName||""===x.default.clientComponentName?E.default.createElement(O.default,null):void 0," ","videoDrawWhiteboardComponent"===x.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===x.default.clientComponentName?E.default.createElement(le.default,null):void 0,E.default.createElement(F.default,{id:"moreBlackboardDrag",blackboardThumbnailImageId:"blackboardThumbnailImageId",blackboardCanvasBackgroundColor:"#ffffff",moreBlackboardDrag:e.state.moreBlackboardDrag,draggableData:r}),E.default.createElement(K.default,{id:"timerDrag",timerDrag:e.state.timerDrag,draggableData:r}),E.default.createElement(q.default,{id:"dialDrag",dialDrag:e.state.dialDrag,draggableData:r}),E.default.createElement(Z.default,{id:"responderDrag",responderDrag:e.state.responderDrag,draggableData:r}),E.default.createElement(ae.default,null),E.default.createElement(oe.default,{id:"holdAllBox",holdAllBoxDrag:e.state.holdAllBox,draggableData:r}),this._getCaptureImgEleArr(a),E.default.createElement(j.default,null)," ",E.default.createElement(X.default,{id:"answerDrag",answerDrag:e.state.answerDrag,draggableData:r}),E.default.createElement(ee.default,{id:"studentAnswerDrag",studentAnswerDrag:e.state.studentAnswerDrag,draggableData:r}),E.default.createElement("div",{style:{display:n?"block":"none"},className:"main-content-layer"}))}}]),t}(E.default.Component);t.default=ce},s3NG:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("RFtt"),r=n(i),o=a("HUPQ"),s=n(o),l=a("VSuD"),d=n(l),u=function(e){var t=e.dispose,a=e.parentState;return r.default.createElement("div",{className:"option-panel"},r.default.createElement("div",{className:"options"},function(){return a.options.map(function(e,a){return r.default.createElement("div",{className:"option-wrap",key:a},r.default.createElement("div",{className:(e.hasChose?"active":"")+" option option-"+a,onClick:function(){t({action:"optionClick",data:{index:a}})}},r.default.createElement("span",null,String.fromCharCode("A".charCodeAt()+a))))})}()),r.default.createElement("button",{style:{display:d.default.hasRole.roleChairman||d.default.hasRole.roleTeachingAssistant?"":"none"},className:"option-btn",onClick:function(){t({action:"changeOptionLength",data:{num:-1}})}},s.default.language.languageData.qPanel.delOption),r.default.createElement("button",{style:{display:d.default.hasRole.roleChairman||d.default.hasRole.roleTeachingAssistant?"":"none"},className:"option-btn",onClick:function(){t({action:"changeOptionLength",data:{num:1}})}},s.default.language.languageData.qPanel.addOption))};t.default=u},sI7p:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Yarq"),r=n(i),o=a("AA3o"),s=n(o),l=a("xSur"),d=n(l),u=a("UzKs"),c=n(u),h=a("Y7Ml"),f=n(h),m=a("RFtt"),g=n(m),p=a("/mFE"),v=(n(p),a("T+56")),b=n(v),S=a("DrPG"),y=(n(S),a("HUPQ")),k=n(y),w=a("yE5a"),T=(n(w),a("YRCL")),C=(n(T),a("VSuD")),D=n(C),A=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={show:!1,action:""},a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;b.default.CoreController.addEventListener(D.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"BlackBoard":case"ClassBegin":this.setState({show:!1})}}},{key:"restoreWebPageWindwo",value:function(){this.setState({isMinimize:!1}),b.default.CoreController.dispatchEvent({type:"changeWebPageWindowSize",message:{data:{isMinimize:!1,isBig:!0},action:"restoreWebPageWindwo"}})}},{key:"render",value:function(){var e=this,t=e.props,a=t.isMinimize,n=t.action,i=n&&"blackboardThumbnailImageId"===n?" blackboardThumbnailImageId":"";return g.default.createElement("div",{className:"minimize-window-wrap"+i,style:{display:a?"block":"none"}},g.default.createElement("div",{className:"minimize-window-header"},g.default.createElement("p",null,k.default.language.languageData.header.tool.blackBoard.title.open),g.default.createElement("button",{className:"restore-big-window",onClick:e.restoreWebPageWindwo.bind(e)})))}}]),t}(g.default.Component);t.default=A},sKCO:function(e,t){},stem:function(e,t,a){a("SMmX")("Map")},"t+Om":function(e,t,a){var n=a("FITv"),i=a("AKd3"),r=a("BRDz");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],o={};o[e]=t(a),n(n.S+n.F*r(function(){a(1)}),"Object",o)}},t8DS:function(e,t){e.exports=function(e,t,a,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(a+": incorrect invocation!");return e}},tcIe:function(e,t,a){var n=a("93K8"),i=a("YW8S");e.exports=a("AKd3").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},toDE:function(e,t,a){a("SMmX")("Set")},uhis:function(e,t,a){"use strict";var n=a("MxwP"),i=a("27tL");e.exports=a("4HpA")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},vhYp:function(e,t,a){var n=a("k/7E");e.exports=function(e,t){var a=[];return n(e,!1,a.push,a,t),a}},vyS5:function(e,t,a){"use strict";var n=a("FITv");e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},w5fS:function(e,t){},xPSH:function(e,t){},yE5a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=void 0,t=void 0,a=void 0,n=void 0,i=void 0,r=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return n},this.setLocalStream=function(e){n=e},this.getUserName=function(){return a},this.setUserName=function(e){a=e},this.getUserThirdid=function(){return i},this.setUserThirdid=function(e){i=e},this.getTkWhiteBoardManager=function(e){return r},this.setTkWhiteBoardManager=function(e){r=e},this.clearAll=function(){e=null,t=null,a=null,n=null,i=null,r=null}};t.default=new n},yZ13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={header:{tool:{blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous one",next:"Next person",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Again Send",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness"}},sharing:{title:"Sharing"},mouse:{title:"Mouse"},pencil:{title:"Pen",pen:{text:"Pencils"},Highlighter:{text:"Highlighters"},linellae:{text:"Lines"},arrow:{text:"Arrows"},laser:{title:"Laser pen",text:"Laser pen"}},text:{title:"Text Input",Msyh:{text:"Microsoft YaHei"},Ming:{text:"SimSun"},Arial:{text:"Arial"}},shape:{title:"Shapes",outlinedRectangle:{text:"Squares"},filledRectangle:{text:"Solid Squares"},outlinedCircle:{text:"Circles"},filledCircle:{text:"Solid Circles"}},eraser:{title:"Eraser"},undo:{title:"Undo"},redo:{title:"Recover"},clear:{title:" Clear Screen"},tool_zoom_big:{title:"Zoom In"},tool_zoom_small:{title:"Zoom Out"},tool_rotate_left:{title:"Contrarotate"},tool_rotate_right:{title:"Clockwise rotation"},colorAndMeasure:{title:"Colors and Thickness",selectColorText:"select Colour",selectMeasure:"select Thickness"},colors:{title:"Colors"},measure:{title:"Thickness"}},page:{prev:{text:"Previous Page"},next:{text:"Next Page"},add:{text:"Add Page"},lcFullBtn:{title:"Full Screen of Drawing Area"},pptFullBtn:{title:"Full Screen  of PPT"},h5FileFullBtn:{title:"Full Screen  of Courseware"},skipPage:{text_one:"To ",text_two:" pages"},ok:{text:"Confirm"},coursewareRemarks:{title:"Courseware Remarks"}},volume:{title:"volume"}},alertWin:{ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}}},toolCase:{toolBox:{text:"ToolBox"}},timers:{timerSetInterval:{text:"Timer"},timerBegin:{text:"Start"},timerStop:{text:"Pause"},again:{text:"Restart"}},dial:{turntable:{text:"Turntable"}},answers:{headerTopLeft:{text:"The answer is"},headerMiddel:{text:"Click the default answer"},beginAnswer:{text:"Begin to answer"},tureAccuracy:{text:"Accuracy"},add:{text:"The right answer"},reduce:{text:"Delete answer"},people:{text:"People"},trueAnswer:{text:"The right answer"},endAnswer:{text:"End of the answer"},restarting:{text:"Restart"},myAnswer:{text:"My Answer"},changeAnswer:{text:"Modify the answer"},selectAnswer:{text:"Please select at least one answer"},submitAnswer:{text:"Submit the answer"},numberOfAnswer:{text:"Number of answer"},PublishTheAnswer:{text:"Publish the answer"},published:{text:"Published"},details:{text:"Details"},statistics:{text:"Statistics"},student:{text:"Student"},TheSelectedTheAnswer:{text:"The selected the answer"},AnswerTime:{text:"Answer Time"},end:{text:"Please finish your questions first"},selectedAnswer:{text:"Selected answer"}},responder:{responder:{text:"Responder"},begin:{text:"Start"},restart:{text:"Restart"},clickTitle:{text:"Click button to start answering"},somebodyTeacher:{text:"Someone grabs"},my:{text:"Congratulations on your grab"},other:{text:"Has been grabbed"},inAnswerTitle:{text:"Answering..."},inAnswerBtn:{text:"Answering"},inAnswerStudent:{text:"Ready to answer"},noContest:{text:"No answer"}},videLabel:{exit:"Drop out"},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}},coursewareRemarks:{remarks:"remarks",close:"close"},moreUser:{text:"Under current scene，only onstage students can use little whiteboard !"},qPanel:{answerPanel:"Answer Panel",tips:["Click on the letter to preset the correct answer","Please Chose Option"],addOption:"Add",delOption:"Delete",start:"Start",end:"End",restart:"Restart",rightOptionIs:"The Right Option is",hasPub:"Published",answerNum:"Answer Number",people:"People",commitAnswer:"Commit",modifyAnswer:"Modify",detail:"Detail",statistics:"Statistics",useTime:"Time",choseAnswer:"Chose Answer",myAnswer:"My Answer",pubResult:"Publish Result",loading:"No Data"},whiteboardSetSize:{lineWidth:"Line width",eraserWidth:"Eraser size"},fontSize:{number:"Number"}};t.default=n},yms7:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Yarq"),r=n(i),o=a("AA3o"),s=n(o),l=a("xSur"),d=n(l),u=a("UzKs"),c=n(u),h=a("Y7Ml"),f=n(h),m=a("RFtt"),g=n(m),p=a("HUPQ"),v=n(p),b=a("yE5a"),S=(n(b),a("fZJ/")),y=n(S),k=a("Sa83"),w=n(k),T=a("T+56"),C=n(T),D=a("YRCL"),A=n(D),E=a("EXAz"),I=n(E),P=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),n=a.props.captureImgInfo;return a.state={captureImgBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageUrl:"",isShow:!1,backgroundColor:"transparent",instanceId:"captureImgBoard"+n.fileid,saveImage:!1,nickname:"captureImgBoard",deawPermission:w.default.handler.getAppPermissions("canDraw"),associatedMsgID:"CaptureImg_"+n.fileid},isRender:!1},a.isAnewCountPosition=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){C.default.Window.addEventListener(TkConstant.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("updateAppPermissions_canDraw",this.handlerUpdateAppPermissions_canDraw.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("updateAppPermissions_canDragCaptureImg",this.handlerUpdate_canDragCaptureImg.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("updateAppPermissions_canResizeCaptureImg",this.handlerUpdate_canResizeCaptureImg.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){C.default.Window.removeBackupListerner(this.listernerBackupid),C.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"handlerOnResize",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"handlerUpdateAppPermissions_canDraw",value:function(){this.state.captureImgBoardInfo.deawPermission=w.default.handler.getAppPermissions("canDraw"),this.setState({captureImgBoardInfo:this.state.captureImgBoardInfo})}},{key:"handlerUpdate_canDragCaptureImg",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"handlerUpdate_canResizeCaptureImg",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"captureImgCloseClick",value:function(){var e=this.props.captureImgInfo,t="CaptureImg_"+e.fileid,a={};A.default.sendSignallingFromCaptureImg(t,a,!0)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.captureImgInfo,n=e.dragData,i=e.useToolInfo,r=e.selectMouse,o=(e.changeLayerIsShow,this.state.captureImgBoardInfo),s=v.default.windowInnerWidth/TkConstant.STANDARDSIZE,l=a.swfpath.substring(a.swfpath.lastIndexOf("."))||".jpg",d=a.swfpath.replace(l,"-1"+l),u=TkConstant.SERVICEINFO.protocolAndHostname+":"+TkConstant.SERVICEINFO.port;o.watermarkImageUrl=u+d;var c="tool_eraser"===i.useToolKey?i.blackboardToolsInfo.eraser:i.blackboardToolsInfo.pencil;s&&(o.containerWidthAndHeight={width:n.size.width*s,height:n.size.height*s});var h=Object.customAssign({id:t,bounds:"pc"===TK.SDKTYPE?"#lc-full-vessel":"#tk_app",disabled:!(r&&w.default.handler.getAppPermissions("canDragCaptureImg")),canResize:w.default.handler.getAppPermissions("canResizeCaptureImg")&&r,minResize:{width:2,height:2},borderWidth:.04},n);return g.default.createElement(I.default,h,g.default.createElement("div",{id:t,className:"capture-img-box"},g.default.createElement(y.default,{resizeInfo:n.size,isBaseboard:!1,watermarkImageUrl:o.watermarkImageUrl,instanceId:o.instanceId,nickname:o.nickname,show:!0,backgroundColor:o.backgroundColor,containerWidthAndHeight:o.containerWidthAndHeight,showRemoteRemindContent:!1,deawPermission:o.deawPermission,associatedMsgID:o.associatedMsgID,fontSize:i.blackboardToolsInfo.text,useToolColor:i.useToolColor,pencilWidth:c,useToolKey:i.useToolKey}),g.default.createElement("div",{className:"capture-img-layer",style:{display:h.disabled?"none":"block"}}),g.default.createElement("button",{className:"capture-img-close",style:{display:TkConstant.hasRole.roleChairman||TkConstant.hasRole.roleTeachingAssistant?void 0:"none"},onClick:this.captureImgCloseClick.bind(this),title:"关闭"})))}}]),t}(g.default.Component);t.default=P},yrDz:function(e,t,a){"use strict";var n=a("WwGG"),i=a("FITv"),r=a("OXaN"),o=a("kDTw"),s=a("V2W7"),l=a("CFGK"),d=a("kksE"),u=a("YW8S");i(i.S+i.F*!a("75+0")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,i,c,h=r(e),f="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,p=void 0!==g,v=0,b=u(h);if(p&&(g=n(g,m>2?arguments[2]:void 0,2)),void 0==b||f==Array&&s(b))for(t=l(h.length),a=new f(t);t>v;v++)d(a,v,p?g(h[v],v):h[v]);else for(c=b.call(h),a=new f;!(i=c.next()).done;v++)d(a,v,p?o(c,g,[i.value,v],!0):i.value);return a.length=v,a}})},zsLt:function(e,t,a){e.exports={default:a("1J5t"),__esModule:!0}}},[0]);